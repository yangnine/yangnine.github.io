import{a as Dr,b as uo,c as mo,d as Ir,e as ho,f as po,g as fo,h as bi,i as go,j as _o,k as bo,l as vo,m as vi,n as yo,o as yi,p as xi,q as xo,r as wo,s as ko}from"./chunk-JPHVPI6Y.js";import{a as Co,b as So,c as wi}from"./chunk-4N3IVX5A.js";import{$ as Ga,$a as k,$b as eo,$c as lo,Aa as Gt,Ab as Dt,Ba as qa,Ca as Xe,Cb as lt,D as vr,Db as Zt,Ea as F,Ec as no,F as Tt,Fc as hi,Gc as io,Ha as Lt,Hc as Cr,Ia as b,Ib as qe,Ja as Qe,Jc as mt,K as di,Ka as yt,L as Ye,Lb as Ka,Lc as ro,M as pt,Ma as Tn,Mb as Ze,N as vt,O as ke,Oa as Mt,P as _,Pa as Za,Pb as Ke,Qa as xr,Qb as Ja,Qc as pi,Ra as Mn,Rc as fi,Sa as Dn,Ta as v,U as st,Ua as y,Ub as wr,Uc as Sr,V as B,Va as A,W as P,Wc as ao,Xb as to,Xc as oo,Ya as Se,Yc as so,Za as X,_ as Ce,_c as In,a as We,aa as $,ab as C,ba as Ut,bb as Wt,c as qt,cb as At,cc as kr,da as Rt,db as $t,dc as mi,eb as Q,ec as Je,f as Z,fa as Wa,fb as V,ga as $a,gb as z,ha as Ya,hd as en,ia as se,j as za,ja as Xa,jb as xt,jc as ce,jd as Tr,ka as yr,kb as M,kd as co,lb as le,ld as Rn,m as Ht,mb as Et,mc as ue,n as Pt,nc as de,nd as gi,oa as Qa,pd as wt,qa as f,qd as _i,r as Ha,ra as ja,rb as Yt,rd as me,s as Ua,sd as Mr,ta as Sn,tb as D,u as $e,ua as q,w as ui,wc as Xt,x as Cn,xb as je,xc as tn,y as br,ya as R,za as ft}from"./chunk-RVT5ZFCJ.js";var nn=class t{constructor(i=""){this.text=i;this.Lines=i.split(`\r
`),this.Title=this.Lines[0].split("	"),this.Value=this.Lines.filter((e,n)=>n!=0).map(e=>e.split("	"))}static FromJson(i){let n=Object.keys(i[0]||{}).join("	"),r=i.map(s=>Object.values(s).join("	")),o=[n,...r].join(`\r
`);return new t(o)}Lines=[];Title=[];Value=[];GetText(){return this.Lines.join(`\r
`)}ToJson(){let i=[];for(let e of this.Value){let n={};for(let r=0;r<this.Title.length;r++){let a=this.Title[r],o=e[r];n[a]=o}i.push(n)}return i}};var he=class t{static Holiday=["20230101","20230102","20230103","20230117","20230118","20230119","20230120","20230121","20230122","20230123","20230124","20230125","20230126","20230127","20230127","20230130","20230227","20230228","20230403","20230404","20230405","20230501","20230622","20230623","20230929","20231009","20231010","20240101","20240205","20240206","20240207","20240208","20240209","20240210","20240212","20240213","20240214","20240228","20240404","20240405","20240501","20240610","20240917","20241010","20250101","20250123","20250124","20250127","20250128","20250129","20250130","20250131"];static WeekOffDay=[0,6];static EventDay=["20230803","20240724","20240725","20241002","20241003"];static get Today(){let i=new Date;return i.getHours()<18&&i.setDate(i.getDate()-1),i.toLocaleString("zh-TW",{year:"numeric",month:"2-digit",day:"2-digit"}).replace(/\//g,"")}InitDateList(i=2){let e=[];for(let r=i;r>0;r--){let a=new Date;a.setMonth(a.getMonth()-r+1),e.push(...this.GetDateList(a))}let n=t.Today;return e=e.filter(r=>[...t.Holiday,...t.EventDay].includes(r.date)==!1).filter(r=>t.WeekOffDay.includes(r.day)==!1).filter(r=>r.date<=n),e.map(r=>r.date).reverse()}GetDateList(i=new Date){i.setDate(1),i.setMonth(i.getMonth()+1),i.setDate(0);let e=i,n=e.toLocaleString("zh-TW",{year:"numeric",month:"2-digit"}).replace(/\//g,""),r=e.getDate(),a=e.getDay(),o=[];for(let l=0;l<r;++l)o.push((a-l+35)%7);o=o.reverse();let s=[];for(let l=1;l<=r;++l){let c=("0"+l.toString()).slice(-2);s.push({date:n+c,day:o[l-1]})}return s}CreateBase(i,e){let n=[];for(let r=0;r<i.length;r++){let a=i[r],o=e[r];if(o)for(let s of o){let l=s[0],c=Number.parseFloat(s[6].replace(/,/g,"")),u=s[9][16],d=u==null?-1:u=="r"?1:-1,m=+s[10],h=s[8]!="--"?Number.parseFloat(s[8].replace(/,/g,"")):s[11]!="--"?Number.parseFloat(s[11].replace(/,/g,"")):0,p=n.find(H=>H.code==l);p||(p=new ht(s[0],s[1]),n.push(p)),p.date.push(a),p.price.push(h),p.volume.push(0),p.move.push(d*m),p.move_percent.push(d*mt.Random.Round(m/c,2));let S=p.price.length;S>2&&p.price[S-2]==0&&(p.price[S-2]=p.price[S-1])}}return n}FillVolume(i,e){for(let n in e){let r=e[n];for(let a of r){let o=a[0].replace(/\s/g,""),s=i.find(u=>u.code==o);if(s==null)continue;let l=a[4];if(l!=null){let u=l.replace(/,/g,""),d=Number.parseInt(u);s.volume[n]=Math.floor(d/1e3)}let c=a[10];if(c!=null){let u=c.replace(/,/g,""),d=Number.parseInt(u);s.volume_fund[n]=Math.floor(d/1e3)}}}return i}FillName(i,e){for(let n of e){let r=i.find(a=>a.code==n[0]);r&&r.name==""&&(r.name=n[1])}return i}FillEps(i,e){e=e.filter(n=>n[14]!=""&&n[14]!="N/A").sort((n,r)=>n[11].localeCompare(r[11]));for(let n of e){let r=i.find(a=>a.code==n[1]);r&&(r.eps=+n[14],r.name==""&&(r.name=n[2]))}return i}},Rr=class{constructor(i="",e="",n=0,r=0,a=[],o=[],s=[],l=[],c=[],u=[],d=[],m=[]){this.code=i;this.name=e;this.eps=n;this.rate=r;this.date=a;this.move=o;this.price=s;this.open=l;this.high=c;this.low=u;this.volume=d;this.volume_fund=m}static STOCK_FAV="STOCK_FAV";static STOCK_Condition="STOCK_RULE";get Title(){return`${this.code} : ${this.name}`}},ht=class t extends Rr{constructor(e="",n="",r=0,a=0,o=[],s=[],l=[],c=[],u=[],d=[],m=[],h=[]){super(e,n,r,a,o,s,l,m,h);this.code=e;this.name=n;this.eps=r;this.rate=a;this.date=o;this.move=s;this.price=l;this.open=c;this.high=u;this.low=d;this.volume=m;this.volume_fund=h}inverse_price=[];inverse_volume=[];inverse_cost=[];inverse_up=[];now=0;cost=0;up=0;diff=0;unit=0;move_percent=[];move_unit=[];volume_percent=[];volume_total=[];MA20=[];SD20=[];EMA26=[];EMA12=[];DIF=[];DEA=[];OSC=[];FillCost(e){e>=this.date.length&&(e=this.date.length-1),this.cost=-this.inverse_cost[e],this.now=this.price[0],this.up=this.inverse_up[e],this.cost&&(this.diff=Math.round(1e4*(this.now-Math.abs(this.cost))/Math.abs(this.cost))/100)}FillInverse(){this.volume_total=this.volume.map((o,s)=>o+this.volume_fund[s]);let e=0,n=0;this.inverse_volume=new Array(this.date.length),this.inverse_price=new Array(this.date.length),this.inverse_cost=new Array(this.date.length),this.inverse_up=new Array(this.date.length);let r=this.price,a=this.volume_total;for(let o=0;o<a.length;o++)n-=a[o],e-=a[o]*r[o],this.inverse_volume[o]=n,this.inverse_price[o]=mt.Random.Round(e,2),this.inverse_cost[o]=n?mt.Random.Round(e/Math.abs(n)):0,o==0||r[0]==0||r[o]==0?this.inverse_up[o]=0:this.inverse_up[o]=mt.Random.Round(100*(r[0]-r[o])/r[o],1)}PreCalculate(){this.unit=this.CalcUnit(Math.min(...this.price)),this.move_unit=this.move.map(n=>mt.Random.Round(n/this.unit));let e=this.MoveAvg(this.price);this.MA20=e.map(n=>n.avg),this.SD20=e.map(n=>n.StDevi),this.MACD(),this.FillInverse()}MACD(){let e=this.MoveAvgConvDiv();this.EMA26=e.ema26.reverse(),this.EMA12=e.ema12.reverse(),this.DIF=e.DIF.reverse(),this.DEA=e.DEA.reverse(),this.OSC=e.OSC.reverse()}MoveAvg(e,n=20,r=0){let a=e.concat().reverse();r=r||a.length;let o=new Array(r),s=[];for(let l=0;l<o.length;l++){s.push(a[l]),s.length>n&&s.shift();let c=new mt.Array(s);o[l]=c}return o.reverse()}MoveAvgConvDiv(e=26,n=12,r=9){let a=this.price.concat().reverse(),o=this.MoveAvg(a,e,e).map(p=>p.avg).reverse(),s=this.MoveAvg(a,n,n).map(p=>p.avg).reverse(),l=new Array(a.length).fill(0),c=new Array(a.length).fill(0),u=new Array(a.length).fill(0);for(let p=0;p<u.length;++p)l[p]=p<e?o[p]:this.ExponMoveAvg(a[p],l[p-1],e),c[p]=p<n?s[p]:this.ExponMoveAvg(a[p],c[p-1],n),u[p]=c[p]-l[p];let d=this.MoveAvg(u,r,r).map(p=>p.avg),m=new Array(a.length).fill(0),h=new Array(a.length).fill(0);for(let p=0;p<m.length;++p)m[p]=p<r?d[p]:this.ExponMoveAvg(u[p],m[p-1],r),h[p]=u[p]-m[p];return{DIF:u,DEA:m,OSC:h,ema26:l,ema12:c,sma12:s}}ExponMoveAvg(e,n,r=26){return e*2/r+n*(r-2)/r}CalcUnit(e){let n=Math.floor(e).toString().length,r=Math.pow(10,n-1);return(e/r<5?5:10)*r/1e3}ToDD(){let e=[];for(let n=0;n<this.date.length;n++){let r=new An(this.date[n],this.price[n],this.open[n],this.high[n],this.low[n],this.volume[n],this.volume_fund[n],this.volume[n]+this.volume_fund[n],this.MA20[n],this.SD20[n],this.OSC[n],this.inverse_volume[n]);r.price&&e.push(r)}return e}DeepClone(e=10){let n=new t;return Object.assign(n,JSON.parse(JSON.stringify(this))),n.date=n.date.filter((r,a)=>a>=e),n.move=n.move.filter((r,a)=>a>=e),n.price=n.price.filter((r,a)=>a>=e),n.volume=n.volume.filter((r,a)=>a>=e),n.volume_fund=n.volume_fund.filter((r,a)=>a>=e),n.PreCalculate(),n}},An=class{constructor(i="20230501",e=0,n=0,r=0,a=0,o=0,s=0,l=0,c=0,u=0,d=0,m=0){this.date=i;this.price=e;this.open=n;this.high=r;this.low=a;this.volume=o;this.volume_fund=s;this.volume_total=l;this.MA20=c;this.SD20=u;this.OSC=d;this.inverse_volume=m}total=0;money=0;cost=0;static FillCost(i=[]){if(!i.length)return;let e=i[i.length-1].inverse_volume;i[0].total=-e;for(let r=1;r<i.length;r++)i[r].total=i[r-1].inverse_volume-e;let n=0;for(let r=i.length-1;r>=0;r--){let a=i[r].price,o=i[r].volume_total;n+=o*a,i[r].money=mt.Random.Round(n),i[r].cost=mt.Random.Round(n/Math.abs(i[r].total),2)}return i}};var To={XSmall:"(max-width: 599.98px)",Small:"(min-width: 600px) and (max-width: 959.98px)",Medium:"(min-width: 960px) and (max-width: 1279.98px)",Large:"(min-width: 1280px) and (max-width: 1919.98px)",XLarge:"(min-width: 1920px)",Handset:"(max-width: 599.98px) and (orientation: portrait), (max-width: 959.98px) and (orientation: landscape)",Tablet:"(min-width: 600px) and (max-width: 839.98px) and (orientation: portrait), (min-width: 960px) and (max-width: 1279.98px) and (orientation: landscape)",Web:"(min-width: 840px) and (orientation: portrait), (min-width: 1280px) and (orientation: landscape)",HandsetPortrait:"(max-width: 599.98px) and (orientation: portrait)",TabletPortrait:"(min-width: 600px) and (max-width: 839.98px) and (orientation: portrait)",WebPortrait:"(min-width: 840px) and (orientation: portrait)",HandsetLandscape:"(max-width: 959.98px) and (orientation: landscape)",TabletLandscape:"(min-width: 960px) and (max-width: 1279.98px) and (orientation: landscape)",WebLandscape:"(min-width: 1280px) and (orientation: landscape)"};function Gc(t,i){if(t&1){let e=X();v(0,"div",1)(1,"button",2),k("click",function(){B(e);let r=C();return P(r.action())}),M(2),y()()}if(t&2){let e=C();f(2),Et(" ",e.data.action," ")}}var Wc=["label"];function $c(t,i){}var Yc=Math.pow(2,31)-1,En=class{_overlayRef;instance;containerInstance;_afterDismissed=new Z;_afterOpened=new Z;_onAction=new Z;_durationTimeoutId;_dismissedByAction=!1;constructor(i,e){this._overlayRef=e,this.containerInstance=i,i._onExit.subscribe(()=>this._finishDismiss())}dismiss(){this._afterDismissed.closed||this.containerInstance.exit(),clearTimeout(this._durationTimeoutId)}dismissWithAction(){this._onAction.closed||(this._dismissedByAction=!0,this._onAction.next(),this._onAction.complete(),this.dismiss()),clearTimeout(this._durationTimeoutId)}closeWithAction(){this.dismissWithAction()}_dismissAfter(i){this._durationTimeoutId=setTimeout(()=>this.dismiss(),Math.min(i,Yc))}_open(){this._afterOpened.closed||(this._afterOpened.next(),this._afterOpened.complete())}_finishDismiss(){this._overlayRef.dispose(),this._onAction.closed||this._onAction.complete(),this._afterDismissed.next({dismissedByAction:this._dismissedByAction}),this._afterDismissed.complete(),this._dismissedByAction=!1}afterDismissed(){return this._afterDismissed}afterOpened(){return this.containerInstance._onEnter}onAction(){return this._onAction}},Mo=new vt("MatSnackBarData"),rn=class{politeness="assertive";announcementMessage="";viewContainerRef;duration=0;panelClass;direction;data=null;horizontalPosition="center";verticalPosition="bottom"},Xc=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275dir=Gt({type:t,selectors:[["","matSnackBarLabel",""]],hostAttrs:[1,"mat-mdc-snack-bar-label","mdc-snackbar__label"]})}return t})(),Qc=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275dir=Gt({type:t,selectors:[["","matSnackBarActions",""]],hostAttrs:[1,"mat-mdc-snack-bar-actions","mdc-snackbar__actions"]})}return t})(),jc=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275dir=Gt({type:t,selectors:[["","matSnackBarAction",""]],hostAttrs:[1,"mat-mdc-snack-bar-action","mdc-snackbar__action"]})}return t})(),qc=(()=>{class t{snackBarRef=_(En);data=_(Mo);constructor(){}action(){this.snackBarRef.dismissWithAction()}get hasAction(){return!!this.data.action}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=R({type:t,selectors:[["simple-snack-bar"]],hostAttrs:[1,"mat-mdc-simple-snack-bar"],exportAs:["matSnackBar"],decls:3,vars:2,consts:[["matSnackBarLabel",""],["matSnackBarActions",""],["mat-button","","matSnackBarAction","",3,"click"]],template:function(n,r){n&1&&(v(0,"div",0),M(1),y(),F(2,Gc,3,1,"div",1)),n&2&&(f(),Et(" ",r.data.message,`
`),f(),Mt(r.hasAction?2:-1))},dependencies:[me,Xc,Qc,jc],styles:[`.mat-mdc-simple-snack-bar{display:flex}
`],encapsulation:2,changeDetection:0})}return t})(),Ar="_mat-snack-bar-enter",Er="_mat-snack-bar-exit",Zc=(()=>{class t extends mo{_ngZone=_(Ut);_elementRef=_(Rt);_changeDetectorRef=_(Dt);_platform=_(Xt);_rendersRef;_animationsDisabled=_(se,{optional:!0})==="NoopAnimations";snackBarConfig=_(rn);_document=_(qe);_trackedModals=new Set;_enterFallback;_exitFallback;_renders=new Z;_announceDelay=150;_announceTimeoutId;_destroyed=!1;_portalOutlet;_onAnnounce=new Z;_onExit=new Z;_onEnter=new Z;_animationState="void";_live;_label;_role;_liveElementId=_(In).getId("mat-snack-bar-container-live-");constructor(){super();let e=this.snackBarConfig;e.politeness==="assertive"&&!e.announcementMessage?this._live="assertive":e.politeness==="off"?this._live="off":this._live="polite",this._platform.FIREFOX&&(this._live==="polite"&&(this._role="status"),this._live==="assertive"&&(this._role="alert")),this._rendersRef=Xa(()=>this._renders.next(),{manualCleanup:!0})}attachComponentPortal(e){this._assertNotAttached();let n=this._portalOutlet.attachComponentPortal(e);return this._afterPortalAttached(),n}attachTemplatePortal(e){this._assertNotAttached();let n=this._portalOutlet.attachTemplatePortal(e);return this._afterPortalAttached(),n}attachDomPortal=e=>{this._assertNotAttached();let n=this._portalOutlet.attachDomPortal(e);return this._afterPortalAttached(),n};onAnimationEnd(e){e===Er?this._completeExit():e===Ar&&(clearTimeout(this._enterFallback),this._ngZone.run(()=>{this._onEnter.next(),this._onEnter.complete()}))}enter(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.markForCheck(),this._changeDetectorRef.detectChanges(),this._screenReaderAnnounce(),this._animationsDisabled?this._renders.pipe(Cn(1)).subscribe(()=>{this._ngZone.run(()=>queueMicrotask(()=>this.onAnimationEnd(Ar)))}):(clearTimeout(this._enterFallback),this._enterFallback=setTimeout(()=>{this._elementRef.nativeElement.classList.add("mat-snack-bar-fallback-visible"),this.onAnimationEnd(Ar)},200)))}exit(){return this._destroyed?za(void 0):(this._ngZone.run(()=>{this._animationState="hidden",this._changeDetectorRef.markForCheck(),this._elementRef.nativeElement.setAttribute("mat-exit",""),clearTimeout(this._announceTimeoutId),this._animationsDisabled?this._renders.pipe(Cn(1)).subscribe(()=>{this._ngZone.run(()=>queueMicrotask(()=>this.onAnimationEnd(Er)))}):(clearTimeout(this._exitFallback),this._exitFallback=setTimeout(()=>this.onAnimationEnd(Er),200))}),this._onExit)}ngOnDestroy(){this._destroyed=!0,this._clearFromModals(),this._completeExit(),this._renders.complete(),this._rendersRef.destroy()}_completeExit(){clearTimeout(this._exitFallback),queueMicrotask(()=>{this._onExit.next(),this._onExit.complete()})}_afterPortalAttached(){let e=this._elementRef.nativeElement,n=this.snackBarConfig.panelClass;n&&(Array.isArray(n)?n.forEach(o=>e.classList.add(o)):e.classList.add(n)),this._exposeToModals();let r=this._label.nativeElement,a="mdc-snackbar__label";r.classList.toggle(a,!r.querySelector(`.${a}`))}_exposeToModals(){let e=this._liveElementId,n=this._document.querySelectorAll('body > .cdk-overlay-container [aria-modal="true"]');for(let r=0;r<n.length;r++){let a=n[r],o=a.getAttribute("aria-owns");this._trackedModals.add(a),o?o.indexOf(e)===-1&&a.setAttribute("aria-owns",o+" "+e):a.setAttribute("aria-owns",e)}}_clearFromModals(){this._trackedModals.forEach(e=>{let n=e.getAttribute("aria-owns");if(n){let r=n.replace(this._liveElementId,"").trim();r.length>0?e.setAttribute("aria-owns",r):e.removeAttribute("aria-owns")}}),this._trackedModals.clear()}_assertNotAttached(){this._portalOutlet.hasAttached()}_screenReaderAnnounce(){this._announceTimeoutId||this._ngZone.runOutsideAngular(()=>{this._announceTimeoutId=setTimeout(()=>{if(this._destroyed)return;let e=this._elementRef.nativeElement,n=e.querySelector("[aria-hidden]"),r=e.querySelector("[aria-live]");if(n&&r){let a=null;this._platform.isBrowser&&document.activeElement instanceof HTMLElement&&n.contains(document.activeElement)&&(a=document.activeElement),n.removeAttribute("aria-hidden"),r.appendChild(n),a?.focus(),this._onAnnounce.next(),this._onAnnounce.complete()}},this._announceDelay)})}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=R({type:t,selectors:[["mat-snack-bar-container"]],viewQuery:function(n,r){if(n&1&&(Q(Ir,7),Q(Wc,7)),n&2){let a;V(a=z())&&(r._portalOutlet=a.first),V(a=z())&&(r._label=a.first)}},hostAttrs:[1,"mdc-snackbar","mat-mdc-snack-bar-container"],hostVars:6,hostBindings:function(n,r){n&1&&k("animationend",function(o){return r.onAnimationEnd(o.animationName)})("animationcancel",function(o){return r.onAnimationEnd(o.animationName)}),n&2&&yt("mat-snack-bar-container-enter",r._animationState==="visible")("mat-snack-bar-container-exit",r._animationState==="hidden")("mat-snack-bar-container-animations-enabled",!r._animationsDisabled)},features:[Xe],decls:6,vars:3,consts:[["label",""],[1,"mdc-snackbar__surface","mat-mdc-snackbar-surface"],[1,"mat-mdc-snack-bar-label"],["aria-hidden","true"],["cdkPortalOutlet",""]],template:function(n,r){n&1&&(v(0,"div",1)(1,"div",2,0)(3,"div",3),F(4,$c,0,0,"ng-template",4),y(),A(5,"div"),y()()),n&2&&(f(5),Lt("aria-live",r._live)("role",r._role)("id",r._liveElementId))},dependencies:[Ir],styles:[`@keyframes _mat-snack-bar-enter{from{transform:scale(0.8);opacity:0}to{transform:scale(1);opacity:1}}@keyframes _mat-snack-bar-exit{from{opacity:1}to{opacity:0}}.mat-mdc-snack-bar-container{display:flex;align-items:center;justify-content:center;box-sizing:border-box;-webkit-tap-highlight-color:rgba(0,0,0,0);margin:8px}.mat-mdc-snack-bar-handset .mat-mdc-snack-bar-container{width:100vw}.mat-snack-bar-container-animations-enabled{opacity:0}.mat-snack-bar-container-animations-enabled.mat-snack-bar-fallback-visible{opacity:1}.mat-snack-bar-container-animations-enabled.mat-snack-bar-container-enter{animation:_mat-snack-bar-enter 150ms cubic-bezier(0, 0, 0.2, 1) forwards}.mat-snack-bar-container-animations-enabled.mat-snack-bar-container-exit{animation:_mat-snack-bar-exit 75ms cubic-bezier(0.4, 0, 1, 1) forwards}.mat-mdc-snackbar-surface{box-shadow:0px 3px 5px -1px rgba(0, 0, 0, 0.2), 0px 6px 10px 0px rgba(0, 0, 0, 0.14), 0px 1px 18px 0px rgba(0, 0, 0, 0.12);display:flex;align-items:center;justify-content:flex-start;box-sizing:border-box;padding-left:0;padding-right:8px}[dir=rtl] .mat-mdc-snackbar-surface{padding-right:0;padding-left:8px}.mat-mdc-snack-bar-container .mat-mdc-snackbar-surface{min-width:344px;max-width:672px}.mat-mdc-snack-bar-handset .mat-mdc-snackbar-surface{width:100%;min-width:0}@media(forced-colors: active){.mat-mdc-snackbar-surface{outline:solid 1px}}.mat-mdc-snack-bar-container .mat-mdc-snackbar-surface{color:var(--mdc-snackbar-supporting-text-color, var(--mat-sys-inverse-on-surface));border-radius:var(--mdc-snackbar-container-shape, var(--mat-sys-corner-extra-small));background-color:var(--mdc-snackbar-container-color, var(--mat-sys-inverse-surface))}.mdc-snackbar__label{width:100%;flex-grow:1;box-sizing:border-box;margin:0;padding:14px 8px 14px 16px}[dir=rtl] .mdc-snackbar__label{padding-left:8px;padding-right:16px}.mat-mdc-snack-bar-container .mdc-snackbar__label{font-family:var(--mdc-snackbar-supporting-text-font, var(--mat-sys-body-medium-font));font-size:var(--mdc-snackbar-supporting-text-size, var(--mat-sys-body-medium-size));font-weight:var(--mdc-snackbar-supporting-text-weight, var(--mat-sys-body-medium-weight));line-height:var(--mdc-snackbar-supporting-text-line-height, var(--mat-sys-body-medium-line-height))}.mat-mdc-snack-bar-actions{display:flex;flex-shrink:0;align-items:center;box-sizing:border-box}.mat-mdc-snack-bar-handset,.mat-mdc-snack-bar-container,.mat-mdc-snack-bar-label{flex:1 1 auto}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled).mat-unthemed{color:var(--mat-snack-bar-button-color, var(--mat-sys-inverse-primary))}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled){--mat-text-button-state-layer-color:currentColor;--mat-text-button-ripple-color:currentColor}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled) .mat-ripple-element{opacity:.1}
`],encapsulation:2})}return t})();function Kc(){return new rn}var Jc=new vt("mat-snack-bar-default-options",{providedIn:"root",factory:Kc}),Do=(()=>{class t{_overlay=_(po);_live=_(so);_injector=_(Ce);_breakpointObserver=_(Sr);_parentSnackBar=_(t,{optional:!0,skipSelf:!0});_defaultConfig=_(Jc);_snackBarRefAtThisLevel=null;simpleSnackBarComponent=qc;snackBarContainerComponent=Zc;handsetCssClass="mat-mdc-snack-bar-handset";get _openedSnackBarRef(){let e=this._parentSnackBar;return e?e._openedSnackBarRef:this._snackBarRefAtThisLevel}set _openedSnackBarRef(e){this._parentSnackBar?this._parentSnackBar._openedSnackBarRef=e:this._snackBarRefAtThisLevel=e}constructor(){}openFromComponent(e,n){return this._attach(e,n)}openFromTemplate(e,n){return this._attach(e,n)}open(e,n="",r){let a=We(We({},this._defaultConfig),r);return a.data={message:e,action:n},a.announcementMessage===e&&(a.announcementMessage=void 0),this.openFromComponent(this.simpleSnackBarComponent,a)}dismiss(){this._openedSnackBarRef&&this._openedSnackBarRef.dismiss()}ngOnDestroy(){this._snackBarRefAtThisLevel&&this._snackBarRefAtThisLevel.dismiss()}_attachSnackBarContainer(e,n){let r=n&&n.viewContainerRef&&n.viewContainerRef.injector,a=Ce.create({parent:r||this._injector,providers:[{provide:rn,useValue:n}]}),o=new Dr(this.snackBarContainerComponent,n.viewContainerRef,a),s=e.attach(o);return s.instance.snackBarConfig=n,s.instance}_attach(e,n){let r=We(We(We({},new rn),this._defaultConfig),n),a=this._createOverlay(r),o=this._attachSnackBarContainer(a,r),s=new En(o,a);if(e instanceof ja){let l=new uo(e,null,{$implicit:r.data,snackBarRef:s});s.instance=o.attachTemplatePortal(l)}else{let l=this._createInjector(r,s),c=new Dr(e,void 0,l),u=o.attachComponentPortal(c);s.instance=u.instance}return this._breakpointObserver.observe(To.HandsetPortrait).pipe(Tt(a.detachments())).subscribe(l=>{a.overlayElement.classList.toggle(this.handsetCssClass,l.matches)}),r.announcementMessage&&o._onAnnounce.subscribe(()=>{this._live.announce(r.announcementMessage,r.politeness)}),this._animateSnackBar(s,r),this._openedSnackBarRef=s,this._openedSnackBarRef}_animateSnackBar(e,n){e.afterDismissed().subscribe(()=>{this._openedSnackBarRef==e&&(this._openedSnackBarRef=null),n.announcementMessage&&this._live.clear()}),n.duration&&n.duration>0&&e.afterOpened().subscribe(()=>e._dismissAfter(n.duration)),this._openedSnackBarRef?(this._openedSnackBarRef.afterDismissed().subscribe(()=>{e.containerInstance.enter()}),this._openedSnackBarRef.dismiss()):e.containerInstance.enter()}_createOverlay(e){let n=new ho;n.direction=e.direction;let r=this._overlay.position().global(),a=e.direction==="rtl",o=e.horizontalPosition==="left"||e.horizontalPosition==="start"&&!a||e.horizontalPosition==="end"&&a,s=!o&&e.horizontalPosition!=="center";return o?r.left("0"):s?r.right("0"):r.centerHorizontally(),e.verticalPosition==="top"?r.top("0"):r.bottom("0"),n.positionStrategy=r,this._overlay.create(n)}_createInjector(e,n){let r=e&&e.viewContainerRef&&e.viewContainerRef.injector;return Ce.create({parent:r||this._injector,providers:[{provide:En,useValue:n},{provide:Mo,useValue:e.data}]})}static \u0275fac=function(n){return new(n||t)};static \u0275prov=Ye({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var pe=class t{constructor(i,e,n){this.HttpClient=i;this.StorageService=e;this.MatSnackBar=n;this.Http=new So(this.HttpClient)}Http;Origin=new he;CollectLen(i=3){return this.Http.get("invest/org/"+i)}GetTPEX(i,e){return this.Http.get(`tpex/${i}/${e}`)}GetPrice_TP(i){return this.GetTPEX("otc",i)}GetVolume_TP(i){return this.GetTPEX("dailyTrade",i)}GetTWSE(i,e){return this.Http.get(`twse/${i}/${e}`)}GetPrice_TW(i){return this.GetTWSE("MI_INDEX",i)}GetVolume_TW(i){return this.GetTWSE("T86",i)}GetBWIBBU(){return this.StorageService.GetJson("invest/BWIBBU_d.json")}GetPE(){return this.StorageService.GetJson("invest/peQryDate.json")}GetEPS(){return this.StorageService.GetJson("invest/EPS.json")}GoogleSh(){return this.HttpClient.get("https://docs.google.com/spreadsheets/d/e/2PACX-1vROJWH9qMSixNw-SNYHTdBvCROL2lxNH-nf54sNPlz_aJZGYieV0-3_jogNO8E_x3nzCMVTV8NjdYoI/pub?gid=0&single=true&output=tsv",{responseType:"text"}).pipe(Pt(n=>new nn(n).ToJson()))}static \u0275fac=function(e){return new(e||t)(ke(to),ke(wi),ke(Do))};static \u0275prov=Ye({token:t,factory:t.\u0275fac,providedIn:"root"})};var E=class t{constructor(i,e){this.Name=i;this.Cmds=e;this.Rules=this.SetRules(e)}Rules;SetRules(i=[]){return this.Cmds=i,this.Rules=i.map(e=>new ct(e))}StockTW=[];SetStockTW(i){this.StockTW=i}Filter(){return this.StockTW.filter(i=>this.Rules.every(e=>e.Fit(i)))}Clone(){return new t(this.Name,this.Cmds.map(i=>i))}ToInterface(){return{Name:this.Name,Rules:this.Rules.map(i=>i.cmd)}}static FormInterface(i){return new t(i.Name,i.Rules)}static Type={NoName:"NoName",ETF:"ETF",TW:"TW",Expensive:"\u9AD8\u50F9",BBH:"BBH",BBL:"BBL",MACD:"MACD",MAH:"MAH",MAL:"MAL",Favor:"TraceList",IT:"\u8CC7\u8A0A",Technology:"\u79D1\u6280",Transport:"\u822A\u904B",Weight:"\u6B0A\u503C",Power:"\u80FD\u6E90"};static Favor=[""];static IT=["3293","2359","6188"];static Technology=["2330","2454","2317","2308","2382","6223","6669","3231","2376","2357","2377","2353","2324"];static Transport=["2618","2610","2630","2646","2645","2603","2609","2615","6757"];static Weight=["2330","2317","2454","2881","2308","2382","2882","2412","3711","2891"];static Power=["1519","1513","1514","1503","2308","1609","6869","6438","1611","1608"];static Filter(i,e=[]){switch(i){case t.Type.Expensive:return e.filter(n=>n.unit>=1);case t.Type.ETF:return e.filter(n=>n.code[0]=="0");case t.Type.NoName:return e.filter(n=>n.code[0]!="0"&&n.name=="");case t.Type.TW:return e.filter(n=>n.code[0]!="0")}switch(i){case t.Type.Favor:return this.Favor.map(n=>e.find(r=>r.code==n)).filter(n=>!!n);case t.Type.IT:return this.IT.map(n=>e.find(r=>r.code==n)).filter(n=>!!n);case t.Type.Technology:return this.Technology.map(n=>e.find(r=>r.code==n)).filter(n=>!!n);case t.Type.Transport:return this.Transport.map(n=>e.find(r=>r.code==n)).filter(n=>!!n);case t.Type.Weight:return this.Weight.map(n=>e.find(r=>r.code==n)).filter(n=>!!n);case t.Type.Power:return this.Power.map(n=>e.find(r=>r.code==n)).filter(n=>!!n)}switch(e=t.Filter(t.Type.TW,e),i){case t.Type.MACD:return e.filter(n=>n.OSC[0]>=n.OSC[1]).sort((n,r)=>n.OSC[0]-n.OSC[1]-(r.OSC[0]-r.OSC[1]));case t.Type.BBH:return e.filter(n=>n.price.some((r,a)=>a<3&&r>n.MA20[a]+n.SD20[a]*2));case t.Type.BBL:return e.filter(n=>n.price.some((r,a)=>a<3&&r<n.MA20[a]-n.SD20[a]*2));case t.Type.MAH:return e.filter(n=>n.price.some((r,a)=>a<3&&r>n.MA20[a]));case t.Type.MAL:return e.filter(n=>n.price.some((r,a)=>a<3&&r<n.MA20[a]))}return e}};var ct=class t{constructor(i){this.cmd=i;i=i.toLowerCase();let e=i.split("in"),n=e.length==2?e[1]:null;if(n&&n.includes("day")){let o=n.split("day")[0].trim();this.Day=Number.parseInt(o)??void 0}let r=e[0];this.Operator=r.includes(">")?">":r.includes("<")?"<":"=",this.If=t.IF[this.Operator];let a=r.split(this.Operator);this.Name=a[0].trim(),this.Value=Number.isNaN(a[1])?0:Number.parseInt(a[1]),this.Func=t[this.Name],this.Parm=this.Name=="cost"?["reverse_cost","price"]:this.Name=="fund"?["volume_fund","price"]:this.Name=="total"?["inverse_volume","price"]:this.Name=="avg_p"?["price","volume_total"]:this.Name=="avg_v"?["price","volume_total"]:this.Name=="up"?["inverse_volume","inverse_up"]:this.Name=="down"?["inverse_volume","inverse_up"]:["volume","price"]}static Type={Avg100V:"Avg 100 V",Buy3Day:"Buy 3 Day",Buy20Day:"Buy 20 Day",SellWell:"\u8CE3\u7684\u597D",UP5:"\u7576\u5929\u6F32\u591A"};static IF={">":(i,e)=>i>e,"<":(i,e)=>i<e,"=":(i,e)=>i==e};Name;Func;Operator;If;Value;Day;Parm=[];Fit(i){let[e,n]=this.Parm;return this.Func.apply(t,[i[e],i[n],this.Value,this.Day,this.Operator])}static overHelf(i=0,e=0){return i>Math.floor(e/2)}static up(i=[0],e=[0],n=5,r=0,a=">"){return this.IF[a](e[r-1],n)}static down(i=[0],e=[0],n=5,r=0,a=">"){return this.IF[a](-e[r-1],n)}static avg_p(i=[0],e=[0],n=5,r=0,a=">"){let o=this.in(r,e);if(!o.length)return!1;let s=o.reduce((c,u)=>c+Math.abs(u),0),l=mt.Random.Round(s/o.length,2);return this.IF[a](l,n)}static avg_v(i=[0],e=[0],n=5,r=0,a=">"){let o=this.in(r,e);if(!o.length)return!1;let s=o.reduce((c,u)=>c+Math.abs(u),0),l=mt.Random.Round(s/o.length,2);return this.IF[a](l,n)}static range(i=[0],e=[0],n=5,r=0,a=">"){let o=this.in(r,e);if(!o.length)return!1;let s=o.reduce((u,d)=>u+d,0)/o.length,l=Math.max(...o),c=Math.min(...o);return this.IF[a]((l-c)/s,n/100)}static buy(i=[0],e=[0],n=1e3,r=0,a=">"){let o=this.in(r,i);if(!o.length)return!1;let s=o.filter(l=>this.IF[a](l,n));return this.overHelf(s.length,r)}static fund(i=[0],e=[0],n=1e3,r=0,a=">"){let o=this.in(r,i);if(!o.length)return!1;let s=o.filter(l=>this.IF[a](l,n));return this.overHelf(s.length,r)}static total(i=[0],e=[0],n=5e3,r=0,a=">"){let o=-i[r-1];return o==null?!1:this.IF[a](o,n)}static cost(i=[0],e=[0],n=1,r=0,a=">"){let o=Math.abs(i[r-1]),s=e[0];return this.IF[a](o-s,n)}static in(i,e){i=i==0?e.length:i;let n=[];for(let r=0;r<i&&e[r]!=null;r++)n.push(e[r]);return n}};var ki=class t{transform(i,...e){return null}static PVToStockEx(i){let e=[];for(let n of i){let r=n.date;for(let a=0;a<99;a++){let o=a<10?n[`pv0${a}`]:n[`pv${a}`];if(!o)continue;let s=JSON.parse(o);for(let l=0;l<s.c.length;l++){let c=e.find(u=>u.code==s.c[l]);c==null&&(c=new ht(s.c[l]),e.push(c)),c.date.push(r),c.price.push(s.p[l]),c.open.push(s.o[l]),c.high.push(s.h[l]),c.low.push(s.l[l]),c.volume.push(Math.floor(s.v[l]/1e3)),c.volume_fund.push(Math.floor(s.f[l]/1e3))}}}for(let n of e)for(let r=0;r<n.price.length;r++){let a=n.price[r+1]?n.price[r]-n.price[r+1]:0;n.move.push(mt.Random.Round(a,2))}return e}static \u0275fac=function(e){return new(e||t)};static \u0275pipe=qa({name:"stock",type:t,pure:!0})};var J=class t{constructor(i,e){this.StorageService=i;this.ApiService=e}StockRoot=new Fn([]);ChartType=0;Defult=[];MinDays=-15;Days=new ue;SetDaysLen(i){this.MinDays=-i,this.Days.setValue(Math.floor(this.MinDays/2))}FavorSave(i){this.StorageService.PostLocal(ht.STOCK_FAV,i)}FavorLoad(){return this.StorageService.GetLocal(ht.STOCK_FAV)||[]}FavorAdd(i){let e=this.StockRoot,n=e.GetStock(i);return n&&(e.FavorAdd(n),this.FavorSave(e.Favor)),e.Favor}FavorDelete(i){let e=this.StockRoot,n=e.GetStock(i);return n&&(e.FavorDelete(n),this.FavorSave(e.Favor)),e.Favor}ConditionInit(i){this.ConditionGet().map(e=>i.ConditionAdd(e))}ConditionGet(){return(this.StorageService.GetLocal(ht.STOCK_Condition)||this.Defult).map(e=>E.FormInterface(e))}ConditionSave(i){this.StorageService.PostLocal(ht.STOCK_Condition,i)}ConditionAdd(i){let e=this.StockRoot.ConditionAdd(i);this.ConditionSave(e.map(n=>n.ToInterface()))}ConditionDelete(i){let e=this.StockRoot.ConditionDelete(i);this.ConditionSave(e.map(n=>n.ToInterface()))}GetStocks(i){return qt(this,null,function*(){console.time("GetStock");let e=this.FromStorage(),n=[];switch(i=e.length?"skip":i,i){case"prod":e=yield this.FromGoogleSh();break;case"local":e=yield this.FromLocal();break;case"org":n=yield this.GetOrigin();break;default:break}console.log(i),e.length&&(n=ki.PVToStockEx(e)),console.timeEnd("GetStock");let[r,a,o]=yield Promise.all([Ht(this.ApiService.GetEPS().pipe(Pt(s=>s.data))),Ht(this.ApiService.GetBWIBBU().pipe(Pt(s=>s.data))),Ht(this.ApiService.GetPE().pipe(Pt(s=>s.tables[0].data)))]);return n=this.ApiService.Origin.FillName(n,a),n=this.ApiService.Origin.FillName(n,o),n=this.ApiService.Origin.FillEps(n,r),n})}FromStorage(){let i=this.StorageService.GetLocal("PV");return i&&console.log(he.Today,"Get:",i[0].date,i[0].date!=he.Today),!i||i.length==0||i[0].date!=he.Today?[]:i}FromGoogleSh(){return qt(this,null,function*(){let i=yield Ht(this.ApiService.GoogleSh());return this.StorageService.PostLocal("PV",i),i})}FromLocal(){return qt(this,null,function*(){let i=yield Ht(this.ApiService.CollectLen());return this.StorageService.PostLocal("PV",i),i})}GetOrigin(){return qt(this,null,function*(){let i=this.ApiService.Origin.InitDateList(),e=i.map(s=>Ht(this.ApiService.GetPrice_TW(s).pipe(Pt(l=>l?.tables[8].data)))),n=i.map(s=>Ht(this.ApiService.GetVolume_TW(s).pipe(Pt(l=>l?.data)))),r=yield Promise.all(e),a=yield Promise.all(n),o=this.ApiService.Origin.CreateBase(i,r);return o=this.ApiService.Origin.FillVolume(o,a),o})}static \u0275fac=function(e){return new(e||t)(ke(wi),ke(pe))};static \u0275prov=Ye({token:t,factory:t.\u0275fac,providedIn:"root"})},Fn=class{constructor(i){this.Stocks=i;this.Len=this.GetStock({code:"2330"})?.date.length||5}Len;Conditions=[];get Favor(){return E.Favor}set Favor(i){E.Favor=i}FavorAdd(i){return this.Favor.every(e=>e!=i.code)&&this.Favor.push(i.code),this.Favor}FavorDelete(i){let e=this.Favor.indexOf(i.code);return e>0&&this.Favor.splice(e,1),this.Favor}ConditionAdd(i){return this.Conditions.every(e=>e.Name!=i.Name)&&(this.Conditions.push(i),this.SetFilterBase(E.Type.TW),i.SetStockTW(this.Filter(""))),this.Conditions}ConditionDelete(i){let e=this.Conditions.indexOf(i);return e>0&&this.Conditions.splice(e,1),this.Conditions}PreCalculate(){console.time("PreCalculate"),this.Stocks.forEach(i=>i.PreCalculate()),console.timeEnd("PreCalculate"),this.SetFilterBase(E.Type.Favor)}FillCost(i){this.Stocks.forEach(e=>e.FillCost(i))}GetStock(i){return this.Stocks.find(e=>e.code==i.code||e.name==i.name)}FilterCondition(i){let e=this.Conditions.find(n=>n.Name==i);if(e)return e.Filter()}FilterSD(i=2,e=3){}Base=[];BaseType="";SetFilterBase(i){!i||i==this.BaseType||(this.Base=E.Filter(i,this.Stocks))}Filter(i,e=this.Base){switch(i){default:return e;case ct.Type.Avg100V:return e.filter(n=>new ct("avg_v > 100 in 20 day").Fit(n));case ct.Type.Buy3Day:return e.filter(n=>new ct("total > 0 in 3 day").Fit(n));case ct.Type.Buy20Day:return e.filter(n=>new ct("total > 0 in 20 day").Fit(n))}}};var Ci=class t{constructor(i,e){this.Service=i;this.StockService=e}ngOnInit(){}CollectData(){return qt(this,null,function*(){let i=this.StockService.FromStorage();i.length||(i=yield Ht(this.Service.CollectLen()));let n=nn.FromJson(i).GetText();navigator.clipboard?(navigator.clipboard?.writeText(n),console.log("Copy Done!")):console.log(n)})}static \u0275fac=function(e){return new(e||t)(q(pe),q(J))};static \u0275cmp=R({type:t,selectors:[["app-invest"]],standalone:!1,decls:9,vars:0,consts:[[1,"Invest","Bk-BlackBlue","Flex-C-BS","F-8",2,"height","100dvh","overflow","hidden"],[1,"Container","Flex-R-BC","Menu",2,"width","100%","height","32px"],[1,"Flex-C","Broder-R"],[1,"Spacer"],[1,"Flex-C","Broder-R",3,"click"],[1,"Container",2,"width","100%","height","calc(100dvh - 32px)"]],template:function(e,n){e&1&&(v(0,"div",0)(1,"div",1)(2,"span",2),M(3,"Stock For Alice"),y(),A(4,"span",3),v(5,"span",4),k("click",function(){return n.CollectData()}),M(6,"CollectData"),y()(),v(7,"div",5),A(8,"router-outlet"),y()())},dependencies:[eo],styles:[".Invest[_ngcontent-%COMP%]{--mat-sidenav-content-background-color: #282A35;--mat-sidenav-container-background-color: #282A35;--mat-table-row-item-label-text-size: 10sp}.Invest[_ngcontent-%COMP%]   .Menu[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{height:100%;padding:0 8px;transition:color .4s}.Invest[_ngcontent-%COMP%]   .Menu[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:hover{cursor:pointer;color:#1e90ff}.Invest[_ngcontent-%COMP%]   .Menu[_ngcontent-%COMP%]   .Broder-L[_ngcontent-%COMP%]{border-left:1px solid gray}.Invest[_ngcontent-%COMP%]   .Menu[_ngcontent-%COMP%]   .Broder-R[_ngcontent-%COMP%]{border-right:1px solid gray}"]})};var nu=["knob"],iu=["valueIndicatorContainer"];function ru(t,i){if(t&1&&(v(0,"div",2,1)(2,"div",5)(3,"span",6),M(4),y()()()),t&2){let e=C();f(4),le(e.valueIndicatorText)}}var au=["trackActive"],ou=["*"];function su(t,i){if(t&1&&A(0,"div"),t&2){let e=i.$implicit,n=i.$index,r=C(3);Tn(e===0?"mdc-slider__tick-mark--active":"mdc-slider__tick-mark--inactive"),Qe("transform",r._calcTickMarkTransform(n))}}function lu(t,i){if(t&1&&Mn(0,su,1,4,"div",8,Za),t&2){let e=C(2);Dn(e._tickMarks)}}function cu(t,i){if(t&1&&(v(0,"div",6,1),F(2,lu,2,0),y()),t&2){let e=C();f(2),Mt(e._cachedWidth?2:-1)}}function uu(t,i){if(t&1&&A(0,"mat-slider-visual-thumb",7),t&2){let e=C();b("discrete",e.discrete)("thumbPosition",1)("valueIndicatorText",e.startValueIndicatorText)}}var w=function(t){return t[t.START=1]="START",t[t.END=2]="END",t}(w||{}),an=function(t){return t[t.ACTIVE=0]="ACTIVE",t[t.INACTIVE=1]="INACTIVE",t}(an||{}),Fr=new vt("_MatSlider"),Ro=new vt("_MatSliderThumb"),du=new vt("_MatSliderRangeThumb"),Ao=new vt("_MatSliderVisualThumb");var mu=(()=>{class t{_cdr=_(Dt);_ngZone=_(Ut);_slider=_(Fr);_renderer=_(Sn);_listenerCleanups;discrete;thumbPosition;valueIndicatorText;_ripple;_knob;_valueIndicatorContainer;_sliderInput;_sliderInputEl;_hoverRippleRef;_focusRippleRef;_activeRippleRef;_isHovered=!1;_isActive=!1;_isValueIndicatorVisible=!1;_hostElement=_(Rt).nativeElement;_platform=_(Xt);constructor(){}ngAfterViewInit(){let e=this._slider._getInput(this.thumbPosition);e&&(this._ripple.radius=24,this._sliderInput=e,this._sliderInputEl=this._sliderInput._hostElement,this._ngZone.runOutsideAngular(()=>{let n=this._sliderInputEl,r=this._renderer;this._listenerCleanups=[r.listen(n,"pointermove",this._onPointerMove),r.listen(n,"pointerdown",this._onDragStart),r.listen(n,"pointerup",this._onDragEnd),r.listen(n,"pointerleave",this._onMouseLeave),r.listen(n,"focus",this._onFocus),r.listen(n,"blur",this._onBlur)]}))}ngOnDestroy(){this._listenerCleanups?.forEach(e=>e())}_onPointerMove=e=>{if(this._sliderInput._isFocused)return;let n=this._hostElement.getBoundingClientRect(),r=this._slider._isCursorOnSliderThumb(e,n);this._isHovered=r,r?this._showHoverRipple():this._hideRipple(this._hoverRippleRef)};_onMouseLeave=()=>{this._isHovered=!1,this._hideRipple(this._hoverRippleRef)};_onFocus=()=>{this._hideRipple(this._hoverRippleRef),this._showFocusRipple(),this._hostElement.classList.add("mdc-slider__thumb--focused")};_onBlur=()=>{this._isActive||this._hideRipple(this._focusRippleRef),this._isHovered&&this._showHoverRipple(),this._hostElement.classList.remove("mdc-slider__thumb--focused")};_onDragStart=e=>{e.button===0&&(this._isActive=!0,this._showActiveRipple())};_onDragEnd=()=>{this._isActive=!1,this._hideRipple(this._activeRippleRef),this._sliderInput._isFocused||this._hideRipple(this._focusRippleRef),this._platform.SAFARI&&this._showHoverRipple()};_showHoverRipple(){this._isShowingRipple(this._hoverRippleRef)||(this._hoverRippleRef=this._showRipple({enterDuration:0,exitDuration:0}),this._hoverRippleRef?.element.classList.add("mat-mdc-slider-hover-ripple"))}_showFocusRipple(){this._isShowingRipple(this._focusRippleRef)||(this._focusRippleRef=this._showRipple({enterDuration:0,exitDuration:0},!0),this._focusRippleRef?.element.classList.add("mat-mdc-slider-focus-ripple"))}_showActiveRipple(){this._isShowingRipple(this._activeRippleRef)||(this._activeRippleRef=this._showRipple({enterDuration:225,exitDuration:400}),this._activeRippleRef?.element.classList.add("mat-mdc-slider-active-ripple"))}_isShowingRipple(e){return e?.state===Tr.FADING_IN||e?.state===Tr.VISIBLE}_showRipple(e,n){if(!this._slider.disabled&&(this._showValueIndicator(),this._slider._isRange&&this._slider._getThumb(this.thumbPosition===w.START?w.END:w.START)._showValueIndicator(),!(this._slider._globalRippleOptions?.disabled&&!n)))return this._ripple.launch({animation:this._slider._noopAnimations?{enterDuration:0,exitDuration:0}:e,centered:!0,persistent:!0})}_hideRipple(e){if(e?.fadeOut(),this._isShowingAnyRipple())return;this._slider._isRange||this._hideValueIndicator();let n=this._getSibling();n._isShowingAnyRipple()||(this._hideValueIndicator(),n._hideValueIndicator())}_showValueIndicator(){this._hostElement.classList.add("mdc-slider__thumb--with-indicator")}_hideValueIndicator(){this._hostElement.classList.remove("mdc-slider__thumb--with-indicator")}_getSibling(){return this._slider._getThumb(this.thumbPosition===w.START?w.END:w.START)}_getValueIndicatorContainer(){return this._valueIndicatorContainer?.nativeElement}_getKnob(){return this._knob.nativeElement}_isShowingAnyRipple(){return this._isShowingRipple(this._hoverRippleRef)||this._isShowingRipple(this._focusRippleRef)||this._isShowingRipple(this._activeRippleRef)}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=R({type:t,selectors:[["mat-slider-visual-thumb"]],viewQuery:function(n,r){if(n&1&&(Q(Rn,5),Q(nu,5),Q(iu,5)),n&2){let a;V(a=z())&&(r._ripple=a.first),V(a=z())&&(r._knob=a.first),V(a=z())&&(r._valueIndicatorContainer=a.first)}},hostAttrs:[1,"mdc-slider__thumb","mat-mdc-slider-visual-thumb"],inputs:{discrete:"discrete",thumbPosition:"thumbPosition",valueIndicatorText:"valueIndicatorText"},features:[Yt([{provide:Ao,useExisting:t}])],decls:4,vars:2,consts:[["knob",""],["valueIndicatorContainer",""],[1,"mdc-slider__value-indicator-container"],[1,"mdc-slider__thumb-knob"],["matRipple","",1,"mat-focus-indicator",3,"matRippleDisabled"],[1,"mdc-slider__value-indicator"],[1,"mdc-slider__value-indicator-text"]],template:function(n,r){n&1&&(F(0,ru,5,1,"div",2),A(1,"div",3,0)(3,"div",4)),n&2&&(Mt(r.discrete?0:-1),f(3),b("matRippleDisabled",!0))},dependencies:[Rn],styles:[`.mat-mdc-slider-visual-thumb .mat-ripple{height:100%;width:100%}.mat-mdc-slider .mdc-slider__tick-marks{justify-content:start}.mat-mdc-slider .mdc-slider__tick-marks .mdc-slider__tick-mark--active,.mat-mdc-slider .mdc-slider__tick-marks .mdc-slider__tick-mark--inactive{position:absolute;left:2px}
`],encapsulation:2,changeDetection:0})}return t})(),on=(()=>{class t{_ngZone=_(Ut);_cdr=_(Dt);_elementRef=_(Rt);_dir=_(tn,{optional:!0});_globalRippleOptions=_(co,{optional:!0});_trackActive;_thumbs;_input;_inputs;get disabled(){return this._disabled}set disabled(e){this._disabled=e;let n=this._getInput(w.END),r=this._getInput(w.START);n&&(n.disabled=this._disabled),r&&(r.disabled=this._disabled)}_disabled=!1;get discrete(){return this._discrete}set discrete(e){this._discrete=e,this._updateValueIndicatorUIs()}_discrete=!1;showTickMarks=!1;get min(){return this._min}set min(e){let n=isNaN(e)?this._min:e;this._min!==n&&this._updateMin(n)}_min=0;color;disableRipple=!1;_updateMin(e){let n=this._min;this._min=e,this._isRange?this._updateMinRange({old:n,new:e}):this._updateMinNonRange(e),this._onMinMaxOrStepChange()}_updateMinRange(e){let n=this._getInput(w.END),r=this._getInput(w.START),a=n.value,o=r.value;r.min=e.new,n.min=Math.max(e.new,r.value),r.max=Math.min(n.max,n.value),r._updateWidthInactive(),n._updateWidthInactive(),e.new<e.old?this._onTranslateXChangeBySideEffect(n,r):this._onTranslateXChangeBySideEffect(r,n),a!==n.value&&this._onValueChange(n),o!==r.value&&this._onValueChange(r)}_updateMinNonRange(e){let n=this._getInput(w.END);if(n){let r=n.value;n.min=e,n._updateThumbUIByValue(),this._updateTrackUI(n),r!==n.value&&this._onValueChange(n)}}get max(){return this._max}set max(e){let n=isNaN(e)?this._max:e;this._max!==n&&this._updateMax(n)}_max=100;_updateMax(e){let n=this._max;this._max=e,this._isRange?this._updateMaxRange({old:n,new:e}):this._updateMaxNonRange(e),this._onMinMaxOrStepChange()}_updateMaxRange(e){let n=this._getInput(w.END),r=this._getInput(w.START),a=n.value,o=r.value;n.max=e.new,r.max=Math.min(e.new,n.value),n.min=r.value,n._updateWidthInactive(),r._updateWidthInactive(),e.new>e.old?this._onTranslateXChangeBySideEffect(r,n):this._onTranslateXChangeBySideEffect(n,r),a!==n.value&&this._onValueChange(n),o!==r.value&&this._onValueChange(r)}_updateMaxNonRange(e){let n=this._getInput(w.END);if(n){let r=n.value;n.max=e,n._updateThumbUIByValue(),this._updateTrackUI(n),r!==n.value&&this._onValueChange(n)}}get step(){return this._step}set step(e){let n=isNaN(e)?this._step:e;this._step!==n&&this._updateStep(n)}_step=1;_updateStep(e){this._step=e,this._isRange?this._updateStepRange():this._updateStepNonRange(),this._onMinMaxOrStepChange()}_updateStepRange(){let e=this._getInput(w.END),n=this._getInput(w.START),r=e.value,a=n.value,o=n.value;e.min=this._min,n.max=this._max,e.step=this._step,n.step=this._step,this._platform.SAFARI&&(e.value=e.value,n.value=n.value),e.min=Math.max(this._min,n.value),n.max=Math.min(this._max,e.value),n._updateWidthInactive(),e._updateWidthInactive(),e.value<o?this._onTranslateXChangeBySideEffect(n,e):this._onTranslateXChangeBySideEffect(e,n),r!==e.value&&this._onValueChange(e),a!==n.value&&this._onValueChange(n)}_updateStepNonRange(){let e=this._getInput(w.END);if(e){let n=e.value;e.step=this._step,this._platform.SAFARI&&(e.value=e.value),e._updateThumbUIByValue(),n!==e.value&&this._onValueChange(e)}}displayWith=e=>`${e}`;_tickMarks;_noopAnimations;_dirChangeSubscription;_resizeObserver;_cachedWidth;_cachedLeft;_rippleRadius=24;startValueIndicatorText="";endValueIndicatorText="";_endThumbTransform;_startThumbTransform;_isRange=!1;_isRtl=!1;_hasViewInitialized=!1;_tickMarkTrackWidth=0;_hasAnimation=!1;_resizeTimer=null;_platform=_(Xt);constructor(){_(fi).load(gi);let e=_(se,{optional:!0});this._noopAnimations=e==="NoopAnimations",this._dir&&(this._dirChangeSubscription=this._dir.change.subscribe(()=>this._onDirChange()),this._isRtl=this._dir.value==="rtl")}_knobRadius=8;_inputPadding;ngAfterViewInit(){this._platform.isBrowser&&this._updateDimensions();let e=this._getInput(w.END),n=this._getInput(w.START);this._isRange=!!e&&!!n,this._cdr.detectChanges();let r=this._getThumb(w.END);this._rippleRadius=r._ripple.radius,this._inputPadding=this._rippleRadius-this._knobRadius,this._isRange?this._initUIRange(e,n):this._initUINonRange(e),this._updateTrackUI(e),this._updateTickMarkUI(),this._updateTickMarkTrackUI(),this._observeHostResize(),this._cdr.detectChanges()}_initUINonRange(e){e.initProps(),e.initUI(),this._updateValueIndicatorUI(e),this._hasViewInitialized=!0,e._updateThumbUIByValue()}_initUIRange(e,n){e.initProps(),e.initUI(),n.initProps(),n.initUI(),e._updateMinMax(),n._updateMinMax(),e._updateStaticStyles(),n._updateStaticStyles(),this._updateValueIndicatorUIs(),this._hasViewInitialized=!0,e._updateThumbUIByValue(),n._updateThumbUIByValue()}ngOnDestroy(){this._dirChangeSubscription.unsubscribe(),this._resizeObserver?.disconnect(),this._resizeObserver=null}_onDirChange(){this._isRtl=this._dir?.value==="rtl",this._isRange?this._onDirChangeRange():this._onDirChangeNonRange(),this._updateTickMarkUI()}_onDirChangeRange(){let e=this._getInput(w.END),n=this._getInput(w.START);e._setIsLeftThumb(),n._setIsLeftThumb(),e.translateX=e._calcTranslateXByValue(),n.translateX=n._calcTranslateXByValue(),e._updateStaticStyles(),n._updateStaticStyles(),e._updateWidthInactive(),n._updateWidthInactive(),e._updateThumbUIByValue(),n._updateThumbUIByValue()}_onDirChangeNonRange(){this._getInput(w.END)._updateThumbUIByValue()}_observeHostResize(){typeof ResizeObserver>"u"||!ResizeObserver||this._ngZone.runOutsideAngular(()=>{this._resizeObserver=new ResizeObserver(()=>{this._isActive()||(this._resizeTimer&&clearTimeout(this._resizeTimer),this._onResize())}),this._resizeObserver.observe(this._elementRef.nativeElement)})}_isActive(){return this._getThumb(w.START)._isActive||this._getThumb(w.END)._isActive}_getValue(e=w.END){let n=this._getInput(e);return n?n.value:this.min}_skipUpdate(){return!!(this._getInput(w.START)?._skipUIUpdate||this._getInput(w.END)?._skipUIUpdate)}_updateDimensions(){this._cachedWidth=this._elementRef.nativeElement.offsetWidth,this._cachedLeft=this._elementRef.nativeElement.getBoundingClientRect().left}_setTrackActiveStyles(e){let n=this._trackActive.nativeElement.style;n.left=e.left,n.right=e.right,n.transformOrigin=e.transformOrigin,n.transform=e.transform}_calcTickMarkTransform(e){let n=e*(this._tickMarkTrackWidth/(this._tickMarks.length-1));return`translateX(${this._isRtl?this._cachedWidth-6-n:n}px`}_onTranslateXChange(e){this._hasViewInitialized&&(this._updateThumbUI(e),this._updateTrackUI(e),this._updateOverlappingThumbUI(e))}_onTranslateXChangeBySideEffect(e,n){this._hasViewInitialized&&(e._updateThumbUIByValue(),n._updateThumbUIByValue())}_onValueChange(e){this._hasViewInitialized&&(this._updateValueIndicatorUI(e),this._updateTickMarkUI(),this._cdr.detectChanges())}_onMinMaxOrStepChange(){this._hasViewInitialized&&(this._updateTickMarkUI(),this._updateTickMarkTrackUI(),this._cdr.markForCheck())}_onResize(){if(this._hasViewInitialized){if(this._updateDimensions(),this._isRange){let e=this._getInput(w.END),n=this._getInput(w.START);e._updateThumbUIByValue(),n._updateThumbUIByValue(),e._updateStaticStyles(),n._updateStaticStyles(),e._updateMinMax(),n._updateMinMax(),e._updateWidthInactive(),n._updateWidthInactive()}else{let e=this._getInput(w.END);e&&e._updateThumbUIByValue()}this._updateTickMarkUI(),this._updateTickMarkTrackUI(),this._cdr.detectChanges()}}_thumbsOverlap=!1;_areThumbsOverlapping(){let e=this._getInput(w.START),n=this._getInput(w.END);return!e||!n?!1:n.translateX-e.translateX<20}_updateOverlappingThumbClassNames(e){let n=e.getSibling(),r=this._getThumb(e.thumbPosition);this._getThumb(n.thumbPosition)._hostElement.classList.remove("mdc-slider__thumb--top"),r._hostElement.classList.toggle("mdc-slider__thumb--top",this._thumbsOverlap)}_updateOverlappingThumbUI(e){!this._isRange||this._skipUpdate()||this._thumbsOverlap!==this._areThumbsOverlapping()&&(this._thumbsOverlap=!this._thumbsOverlap,this._updateOverlappingThumbClassNames(e))}_updateThumbUI(e){if(this._skipUpdate())return;let n=this._getThumb(e.thumbPosition===w.END?w.END:w.START);n._hostElement.style.transform=`translateX(${e.translateX}px)`}_updateValueIndicatorUI(e){if(this._skipUpdate())return;let n=this.displayWith(e.value);if(this._hasViewInitialized?e._valuetext.set(n):e._hostElement.setAttribute("aria-valuetext",n),this.discrete){e.thumbPosition===w.START?this.startValueIndicatorText=n:this.endValueIndicatorText=n;let r=this._getThumb(e.thumbPosition);n.length<3?r._hostElement.classList.add("mdc-slider__thumb--short-value"):r._hostElement.classList.remove("mdc-slider__thumb--short-value")}}_updateValueIndicatorUIs(){let e=this._getInput(w.END),n=this._getInput(w.START);e&&this._updateValueIndicatorUI(e),n&&this._updateValueIndicatorUI(n)}_updateTickMarkTrackUI(){if(!this.showTickMarks||this._skipUpdate())return;let e=this._step&&this._step>0?this._step:1,r=(Math.floor(this.max/e)*e-this.min)/(this.max-this.min);this._tickMarkTrackWidth=(this._cachedWidth-6)*r}_updateTrackUI(e){this._skipUpdate()||(this._isRange?this._updateTrackUIRange(e):this._updateTrackUINonRange(e))}_updateTrackUIRange(e){let n=e.getSibling();if(!n||!this._cachedWidth)return;let r=Math.abs(n.translateX-e.translateX)/this._cachedWidth;e._isLeftThumb&&this._cachedWidth?this._setTrackActiveStyles({left:"auto",right:`${this._cachedWidth-n.translateX}px`,transformOrigin:"right",transform:`scaleX(${r})`}):this._setTrackActiveStyles({left:`${n.translateX}px`,right:"auto",transformOrigin:"left",transform:`scaleX(${r})`})}_updateTrackUINonRange(e){this._isRtl?this._setTrackActiveStyles({left:"auto",right:"0px",transformOrigin:"right",transform:`scaleX(${1-e.fillPercentage})`}):this._setTrackActiveStyles({left:"0px",right:"auto",transformOrigin:"left",transform:`scaleX(${e.fillPercentage})`})}_updateTickMarkUI(){if(!this.showTickMarks||this.step===void 0||this.min===void 0||this.max===void 0)return;let e=this.step>0?this.step:1;this._isRange?this._updateTickMarkUIRange(e):this._updateTickMarkUINonRange(e)}_updateTickMarkUINonRange(e){let n=this._getValue(),r=Math.max(Math.round((n-this.min)/e),0)+1,a=Math.max(Math.round((this.max-n)/e),0)-1;this._isRtl?r++:a++,this._tickMarks=Array(r).fill(an.ACTIVE).concat(Array(a).fill(an.INACTIVE))}_updateTickMarkUIRange(e){let n=this._getValue(),r=this._getValue(w.START),a=Math.max(Math.round((r-this.min)/e),0),o=Math.max(Math.round((n-r)/e)+1,0),s=Math.max(Math.round((this.max-n)/e),0);this._tickMarks=Array(a).fill(an.INACTIVE).concat(Array(o).fill(an.ACTIVE),Array(s).fill(an.INACTIVE))}_getInput(e){if(e===w.END&&this._input)return this._input;if(this._inputs?.length)return e===w.START?this._inputs.first:this._inputs.last}_getThumb(e){return e===w.END?this._thumbs?.last:this._thumbs?.first}_setTransition(e){this._hasAnimation=!this._platform.IOS&&e&&!this._noopAnimations,this._elementRef.nativeElement.classList.toggle("mat-mdc-slider-with-animation",this._hasAnimation)}_isCursorOnSliderThumb(e,n){let r=n.width/2,a=n.x+r,o=n.y+r,s=e.clientX-a,l=e.clientY-o;return Math.pow(s,2)+Math.pow(l,2)<Math.pow(r,2)}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=R({type:t,selectors:[["mat-slider"]],contentQueries:function(n,r,a){if(n&1&&($t(a,Ro,5),$t(a,du,4)),n&2){let o;V(o=z())&&(r._input=o.first),V(o=z())&&(r._inputs=o)}},viewQuery:function(n,r){if(n&1&&(Q(au,5),Q(Ao,5)),n&2){let a;V(a=z())&&(r._trackActive=a.first),V(a=z())&&(r._thumbs=a)}},hostAttrs:[1,"mat-mdc-slider","mdc-slider"],hostVars:12,hostBindings:function(n,r){n&2&&(Tn("mat-"+(r.color||"primary")),yt("mdc-slider--range",r._isRange)("mdc-slider--disabled",r.disabled)("mdc-slider--discrete",r.discrete)("mdc-slider--tick-marks",r.showTickMarks)("_mat-animation-noopable",r._noopAnimations))},inputs:{disabled:[2,"disabled","disabled",lt],discrete:[2,"discrete","discrete",lt],showTickMarks:[2,"showTickMarks","showTickMarks",lt],min:[2,"min","min",Zt],color:"color",disableRipple:[2,"disableRipple","disableRipple",lt],max:[2,"max","max",Zt],step:[2,"step","step",Zt],displayWith:"displayWith"},exportAs:["matSlider"],features:[Yt([{provide:Fr,useExisting:t}])],ngContentSelectors:ou,decls:9,vars:5,consts:[["trackActive",""],["tickMarkContainer",""],[1,"mdc-slider__track"],[1,"mdc-slider__track--inactive"],[1,"mdc-slider__track--active"],[1,"mdc-slider__track--active_fill"],[1,"mdc-slider__tick-marks"],[3,"discrete","thumbPosition","valueIndicatorText"],[3,"class","transform"]],template:function(n,r){n&1&&(Wt(),At(0),v(1,"div",2),A(2,"div",3),v(3,"div",4),A(4,"div",5,0),y(),F(6,cu,3,1,"div",6),y(),F(7,uu,1,3,"mat-slider-visual-thumb",7),A(8,"mat-slider-visual-thumb",7)),n&2&&(f(6),Mt(r.showTickMarks?6:-1),f(),Mt(r._isRange?7:-1),f(),b("discrete",r.discrete)("thumbPosition",2)("valueIndicatorText",r.endValueIndicatorText))},dependencies:[mu],styles:[`.mdc-slider__track{position:absolute;top:50%;transform:translateY(-50%);width:100%;pointer-events:none;height:var(--mdc-slider-inactive-track-height, 4px)}.mdc-slider__track--active,.mdc-slider__track--inactive{display:flex;height:100%;position:absolute;width:100%}.mdc-slider__track--active{overflow:hidden;border-radius:var(--mdc-slider-active-track-shape, var(--mat-sys-corner-full));height:var(--mdc-slider-active-track-height, 4px);top:calc((var(--mdc-slider-inactive-track-height, 4px) - var(--mdc-slider-active-track-height, 4px))/2)}.mdc-slider__track--active_fill{border-top-style:solid;box-sizing:border-box;height:100%;width:100%;position:relative;transform-origin:left;transition:transform 80ms ease;border-color:var(--mdc-slider-active-track-color, var(--mat-sys-primary));border-top-width:var(--mdc-slider-active-track-height, 4px)}.mdc-slider--disabled .mdc-slider__track--active_fill{border-color:var(--mdc-slider-disabled-active-track-color, var(--mat-sys-on-surface))}[dir=rtl] .mdc-slider__track--active_fill{-webkit-transform-origin:right;transform-origin:right}.mdc-slider__track--inactive{left:0;top:0;opacity:.24;background-color:var(--mdc-slider-inactive-track-color, var(--mat-sys-surface-variant));height:var(--mdc-slider-inactive-track-height, 4px);border-radius:var(--mdc-slider-inactive-track-shape, var(--mat-sys-corner-full))}.mdc-slider--disabled .mdc-slider__track--inactive{background-color:var(--mdc-slider-disabled-inactive-track-color, var(--mat-sys-on-surface));opacity:.24}.mdc-slider__track--inactive::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media(forced-colors: active){.mdc-slider__track--inactive::before{border-color:CanvasText}}.mdc-slider__value-indicator-container{bottom:44px;left:50%;pointer-events:none;position:absolute;transform:translateX(-50%);transform:var(--mat-slider-value-indicator-container-transform, translateX(-50%) rotate(-45deg))}.mdc-slider__thumb--with-indicator .mdc-slider__value-indicator-container{pointer-events:auto}.mdc-slider__value-indicator{display:flex;align-items:center;border-radius:4px;height:32px;padding:0 12px;transform:scale(0);transform-origin:bottom;opacity:1;transition:transform 100ms cubic-bezier(0.4, 0, 1, 1);word-break:normal;background-color:var(--mdc-slider-label-container-color, var(--mat-sys-primary));color:var(--mdc-slider-label-label-text-color, var(--mat-sys-on-primary));width:var(--mat-slider-value-indicator-width, 28px);height:var(--mat-slider-value-indicator-height, 28px);padding:var(--mat-slider-value-indicator-padding, 0);opacity:var(--mat-slider-value-indicator-opacity, 1);border-radius:var(--mat-slider-value-indicator-border-radius, 50% 50% 50% 0)}.mdc-slider__thumb--with-indicator .mdc-slider__value-indicator{transition:transform 100ms cubic-bezier(0, 0, 0.2, 1);transform:scale(1)}.mdc-slider__value-indicator::before{border-left:6px solid rgba(0,0,0,0);border-right:6px solid rgba(0,0,0,0);border-top:6px solid;bottom:-5px;content:"";height:0;left:50%;position:absolute;transform:translateX(-50%);width:0;display:var(--mat-slider-value-indicator-caret-display, none);border-top-color:var(--mdc-slider-label-container-color, var(--mat-sys-primary))}.mdc-slider__value-indicator::after{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media(forced-colors: active){.mdc-slider__value-indicator::after{border-color:CanvasText}}.mdc-slider__value-indicator-text{text-align:center;width:var(--mat-slider-value-indicator-width, 28px);transform:var(--mat-slider-value-indicator-text-transform, rotate(45deg));font-family:var(--mdc-slider-label-label-text-font, var(--mat-sys-label-medium-font));font-size:var(--mdc-slider-label-label-text-size, var(--mat-sys-label-medium-size));font-weight:var(--mdc-slider-label-label-text-weight, var(--mat-sys-label-medium-weight));line-height:var(--mdc-slider-label-label-text-line-height, var(--mat-sys-label-medium-line-height));letter-spacing:var(--mdc-slider-label-label-text-tracking, var(--mat-sys-label-medium-tracking))}.mdc-slider__thumb{-webkit-user-select:none;user-select:none;display:flex;left:-24px;outline:none;position:absolute;height:48px;width:48px;pointer-events:none}.mdc-slider--discrete .mdc-slider__thumb{transition:transform 80ms ease}.mdc-slider--disabled .mdc-slider__thumb{pointer-events:none}.mdc-slider__thumb--top{z-index:1}.mdc-slider__thumb-knob{position:absolute;box-sizing:border-box;left:50%;top:50%;transform:translate(-50%, -50%);border-style:solid;width:var(--mdc-slider-handle-width, 20px);height:var(--mdc-slider-handle-height, 20px);border-width:calc(var(--mdc-slider-handle-height, 20px)/2) calc(var(--mdc-slider-handle-width, 20px)/2);box-shadow:var(--mdc-slider-handle-elevation, var(--mat-sys-level1));background-color:var(--mdc-slider-handle-color, var(--mat-sys-primary));border-color:var(--mdc-slider-handle-color, var(--mat-sys-primary));border-radius:var(--mdc-slider-handle-shape, var(--mat-sys-corner-full))}.mdc-slider__thumb:hover .mdc-slider__thumb-knob{background-color:var(--mdc-slider-hover-handle-color, var(--mat-sys-primary));border-color:var(--mdc-slider-hover-handle-color, var(--mat-sys-primary))}.mdc-slider__thumb--focused .mdc-slider__thumb-knob{background-color:var(--mdc-slider-focus-handle-color, var(--mat-sys-primary));border-color:var(--mdc-slider-focus-handle-color, var(--mat-sys-primary))}.mdc-slider--disabled .mdc-slider__thumb-knob{background-color:var(--mdc-slider-disabled-handle-color, var(--mat-sys-on-surface));border-color:var(--mdc-slider-disabled-handle-color, var(--mat-sys-on-surface))}.mdc-slider__thumb--top .mdc-slider__thumb-knob,.mdc-slider__thumb--top.mdc-slider__thumb:hover .mdc-slider__thumb-knob,.mdc-slider__thumb--top.mdc-slider__thumb--focused .mdc-slider__thumb-knob{border:solid 1px #fff;box-sizing:content-box;border-color:var(--mdc-slider-with-overlap-handle-outline-color, var(--mat-sys-on-primary));border-width:var(--mdc-slider-with-overlap-handle-outline-width, 1px)}.mdc-slider__tick-marks{align-items:center;box-sizing:border-box;display:flex;height:100%;justify-content:space-between;padding:0 1px;position:absolute;width:100%}.mdc-slider__tick-mark--active,.mdc-slider__tick-mark--inactive{width:var(--mdc-slider-with-tick-marks-container-size, 2px);height:var(--mdc-slider-with-tick-marks-container-size, 2px);border-radius:var(--mdc-slider-with-tick-marks-container-shape, var(--mat-sys-corner-full))}.mdc-slider__tick-mark--inactive{opacity:var(--mdc-slider-with-tick-marks-inactive-container-opacity, 0.38);background-color:var(--mdc-slider-with-tick-marks-inactive-container-color, var(--mat-sys-on-surface-variant))}.mdc-slider--disabled .mdc-slider__tick-mark--inactive{opacity:var(--mdc-slider-with-tick-marks-inactive-container-opacity, 0.38);background-color:var(--mdc-slider-with-tick-marks-disabled-container-color, var(--mat-sys-on-surface))}.mdc-slider__tick-mark--active{opacity:var(--mdc-slider-with-tick-marks-active-container-opacity, 0.38);background-color:var(--mdc-slider-with-tick-marks-active-container-color, var(--mat-sys-on-primary))}.mdc-slider__input{cursor:pointer;left:2px;margin:0;height:44px;opacity:0;position:absolute;top:2px;width:44px;box-sizing:content-box}.mdc-slider__input.mat-mdc-slider-input-no-pointer-events{pointer-events:none}.mdc-slider__input.mat-slider__right-input{left:auto;right:0}.mat-mdc-slider{display:inline-block;box-sizing:border-box;outline:none;vertical-align:middle;cursor:pointer;height:48px;margin:0 8px;position:relative;touch-action:pan-y;width:auto;min-width:112px;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-slider.mdc-slider--disabled{cursor:auto;opacity:.38}.mat-mdc-slider .mdc-slider__thumb,.mat-mdc-slider .mdc-slider__track--active_fill{transition-duration:0ms}.mat-mdc-slider.mat-mdc-slider-with-animation .mdc-slider__thumb,.mat-mdc-slider.mat-mdc-slider-with-animation .mdc-slider__track--active_fill{transition-duration:80ms}.mat-mdc-slider.mdc-slider--discrete .mdc-slider__thumb,.mat-mdc-slider.mdc-slider--discrete .mdc-slider__track--active_fill{transition-duration:0ms}.mat-mdc-slider.mat-mdc-slider-with-animation .mdc-slider__thumb,.mat-mdc-slider.mat-mdc-slider-with-animation .mdc-slider__track--active_fill{transition-duration:80ms}.mat-mdc-slider .mat-ripple .mat-ripple-element{background-color:var(--mat-slider-ripple-color, var(--mat-sys-primary))}.mat-mdc-slider .mat-ripple .mat-mdc-slider-hover-ripple{background-color:var(--mat-slider-hover-state-layer-color, color-mix(in srgb, var(--mat-sys-primary) 5%, transparent))}.mat-mdc-slider .mat-ripple .mat-mdc-slider-focus-ripple,.mat-mdc-slider .mat-ripple .mat-mdc-slider-active-ripple{background-color:var(--mat-slider-focus-state-layer-color, color-mix(in srgb, var(--mat-sys-primary) 20%, transparent))}.mat-mdc-slider._mat-animation-noopable.mdc-slider--discrete .mdc-slider__thumb,.mat-mdc-slider._mat-animation-noopable.mdc-slider--discrete .mdc-slider__track--active_fill,.mat-mdc-slider._mat-animation-noopable .mdc-slider__value-indicator{transition:none}.mat-mdc-slider .mat-focus-indicator::before{border-radius:50%}.mdc-slider__thumb--focused .mat-focus-indicator::before{content:""}
`],encapsulation:2,changeDetection:0})}return t})();var hu={provide:mi,useExisting:di(()=>Te),multi:!0};var Te=(()=>{class t{_ngZone=_(Ut);_elementRef=_(Rt);_cdr=_(Dt);_slider=_(Fr);_platform=_(Xt);_listenerCleanups;get value(){return Zt(this._hostElement.value,0)}set value(e){e=isNaN(e)?0:e;let n=e+"";if(!this._hasSetInitialValue){this._initialValue=n;return}this._isActive||this._setValue(n)}_setValue(e){this._hostElement.value=e,this._updateThumbUIByValue(),this._slider._onValueChange(this),this._cdr.detectChanges(),this._slider._cdr.markForCheck()}valueChange=new $;dragStart=new $;dragEnd=new $;get translateX(){return this._slider.min>=this._slider.max?(this._translateX=this._tickMarkOffset,this._translateX):(this._translateX===void 0&&(this._translateX=this._calcTranslateXByValue()),this._translateX)}set translateX(e){this._translateX=e}_translateX;thumbPosition=w.END;get min(){return Zt(this._hostElement.min,0)}set min(e){this._hostElement.min=e+"",this._cdr.detectChanges()}get max(){return Zt(this._hostElement.max,0)}set max(e){this._hostElement.max=e+"",this._cdr.detectChanges()}get step(){return Zt(this._hostElement.step,0)}set step(e){this._hostElement.step=e+"",this._cdr.detectChanges()}get disabled(){return lt(this._hostElement.disabled)}set disabled(e){this._hostElement.disabled=e,this._cdr.detectChanges(),this._slider.disabled!==this.disabled&&(this._slider.disabled=this.disabled)}get percentage(){return this._slider.min>=this._slider.max?this._slider._isRtl?1:0:(this.value-this._slider.min)/(this._slider.max-this._slider.min)}get fillPercentage(){return this._slider._cachedWidth?this._translateX===0?0:this.translateX/this._slider._cachedWidth:this._slider._isRtl?1:0}_hostElement=this._elementRef.nativeElement;_valuetext=Wa("");_knobRadius=8;_tickMarkOffset=3;_isActive=!1;_isFocused=!1;_setIsFocused(e){this._isFocused=e}_hasSetInitialValue=!1;_initialValue;_formControl;_destroyed=new Z;_skipUIUpdate=!1;_onChangeFn;_onTouchedFn=()=>{};_isControlInitialized=!1;constructor(){let e=_(Sn);this._ngZone.runOutsideAngular(()=>{this._listenerCleanups=[e.listen(this._hostElement,"pointerdown",this._onPointerDown.bind(this)),e.listen(this._hostElement,"pointermove",this._onPointerMove.bind(this)),e.listen(this._hostElement,"pointerup",this._onPointerUp.bind(this))]})}ngOnDestroy(){this._listenerCleanups.forEach(e=>e()),this._destroyed.next(),this._destroyed.complete(),this.dragStart.complete(),this.dragEnd.complete()}initProps(){this._updateWidthInactive(),this.disabled!==this._slider.disabled&&(this._slider.disabled=!0),this.step=this._slider.step,this.min=this._slider.min,this.max=this._slider.max,this._initValue()}initUI(){this._updateThumbUIByValue()}_initValue(){this._hasSetInitialValue=!0,this._initialValue===void 0?this.value=this._getDefaultValue():(this._hostElement.value=this._initialValue,this._updateThumbUIByValue(),this._slider._onValueChange(this),this._cdr.detectChanges())}_getDefaultValue(){return this.min}_onBlur(){this._setIsFocused(!1),this._onTouchedFn()}_onFocus(){this._slider._setTransition(!1),this._slider._updateTrackUI(this),this._setIsFocused(!0)}_onChange(){this.valueChange.emit(this.value),this._isActive&&this._updateThumbUIByValue({withAnimation:!0})}_onInput(){this._onChangeFn?.(this.value),(this._slider.step||!this._isActive)&&this._updateThumbUIByValue({withAnimation:!0}),this._slider._onValueChange(this)}_onNgControlValueChange(){(!this._isActive||!this._isFocused)&&(this._slider._onValueChange(this),this._updateThumbUIByValue()),this._slider.disabled=this._formControl.disabled}_onPointerDown(e){if(!(this.disabled||e.button!==0)){if(this._platform.IOS){let n=this._slider._isCursorOnSliderThumb(e,this._slider._getThumb(this.thumbPosition)._hostElement.getBoundingClientRect());this._isActive=n,this._updateWidthActive(),this._slider._updateDimensions();return}this._isActive=!0,this._setIsFocused(!0),this._updateWidthActive(),this._slider._updateDimensions(),this._slider.step||this._updateThumbUIByPointerEvent(e,{withAnimation:!0}),this.disabled||(this._handleValueCorrection(e),this.dragStart.emit({source:this,parent:this._slider,value:this.value}))}}_handleValueCorrection(e){this._skipUIUpdate=!0,setTimeout(()=>{this._skipUIUpdate=!1,this._fixValue(e)},0)}_fixValue(e){let n=e.clientX-this._slider._cachedLeft,r=this._slider._cachedWidth,a=this._slider.step===0?1:this._slider.step,o=Math.floor((this._slider.max-this._slider.min)/a),s=this._slider._isRtl?1-n/r:n/r,c=Math.round(s*o)/o*(this._slider.max-this._slider.min)+this._slider.min,u=Math.round(c/a)*a,d=this.value;if(u===d){this._slider._onValueChange(this),this._slider.step>0?this._updateThumbUIByValue():this._updateThumbUIByPointerEvent(e,{withAnimation:this._slider._hasAnimation});return}this.value=u,this.valueChange.emit(this.value),this._onChangeFn?.(this.value),this._slider._onValueChange(this),this._slider.step>0?this._updateThumbUIByValue():this._updateThumbUIByPointerEvent(e,{withAnimation:this._slider._hasAnimation})}_onPointerMove(e){!this._slider.step&&this._isActive&&this._updateThumbUIByPointerEvent(e)}_onPointerUp(){this._isActive&&(this._isActive=!1,this._platform.SAFARI&&this._setIsFocused(!1),this.dragEnd.emit({source:this,parent:this._slider,value:this.value}),setTimeout(()=>this._updateWidthInactive(),this._platform.IOS?10:0))}_clamp(e){let n=this._tickMarkOffset,r=this._slider._cachedWidth-this._tickMarkOffset;return Math.max(Math.min(e,r),n)}_calcTranslateXByValue(){return this._slider._isRtl?(1-this.percentage)*(this._slider._cachedWidth-this._tickMarkOffset*2)+this._tickMarkOffset:this.percentage*(this._slider._cachedWidth-this._tickMarkOffset*2)+this._tickMarkOffset}_calcTranslateXByPointerEvent(e){return e.clientX-this._slider._cachedLeft}_updateWidthActive(){}_updateWidthInactive(){this._hostElement.style.padding=`0 ${this._slider._inputPadding}px`,this._hostElement.style.width=`calc(100% + ${this._slider._inputPadding-this._tickMarkOffset*2}px)`,this._hostElement.style.left=`-${this._slider._rippleRadius-this._tickMarkOffset}px`}_updateThumbUIByValue(e){this.translateX=this._clamp(this._calcTranslateXByValue()),this._updateThumbUI(e)}_updateThumbUIByPointerEvent(e,n){this.translateX=this._clamp(this._calcTranslateXByPointerEvent(e)),this._updateThumbUI(n)}_updateThumbUI(e){this._slider._setTransition(!!e?.withAnimation),this._slider._onTranslateXChange(this)}writeValue(e){(this._isControlInitialized||e!==null)&&(this.value=e)}registerOnChange(e){this._onChangeFn=e,this._isControlInitialized=!0}registerOnTouched(e){this._onTouchedFn=e}setDisabledState(e){this.disabled=e}focus(){this._hostElement.focus()}blur(){this._hostElement.blur()}static \u0275fac=function(n){return new(n||t)};static \u0275dir=Gt({type:t,selectors:[["input","matSliderThumb",""]],hostAttrs:["type","range",1,"mdc-slider__input"],hostVars:1,hostBindings:function(n,r){n&1&&k("change",function(){return r._onChange()})("input",function(){return r._onInput()})("blur",function(){return r._onBlur()})("focus",function(){return r._onFocus()}),n&2&&Lt("aria-valuetext",r._valuetext())},inputs:{value:[2,"value","value",Zt]},outputs:{valueChange:"valueChange",dragStart:"dragStart",dragEnd:"dragEnd"},exportAs:["matSliderThumb"],features:[Yt([hu,{provide:Ro,useExisting:t}])]})}return t})();var Eo=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275mod=ft({type:t});static \u0275inj=pt({imports:[wt,_i]})}return t})();var Fo=["*"],gu=["content"],_u=[[["mat-drawer"]],[["mat-drawer-content"]],"*"],bu=["mat-drawer","mat-drawer-content","*"];function vu(t,i){if(t&1){let e=X();v(0,"div",1),k("click",function(){B(e);let r=C();return P(r._onBackdropClicked())}),y()}if(t&2){let e=C();yt("mat-drawer-shown",e._isShowingBackdrop())}}function yu(t,i){t&1&&(v(0,"mat-drawer-content"),At(1,2),y())}var xu=new vt("MAT_DRAWER_DEFAULT_AUTOSIZE",{providedIn:"root",factory:wu}),Oo=new vt("MAT_DRAWER_CONTAINER");function wu(){return!1}var Br=(()=>{class t extends hi{_platform=_(Xt);_changeDetectorRef=_(Dt);_container=_(Lr);constructor(){let e=_(Rt),n=_(no),r=_(Ut);super(e,n,r)}ngAfterContentInit(){this._container._contentMarginChanges.subscribe(()=>{this._changeDetectorRef.markForCheck()})}_shouldBeHidden(){if(this._platform.isBrowser)return!1;let{start:e,end:n}=this._container;return e!=null&&e.mode!=="over"&&e.opened||n!=null&&n.mode!=="over"&&n.opened}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=R({type:t,selectors:[["mat-drawer-content"]],hostAttrs:[1,"mat-drawer-content"],hostVars:6,hostBindings:function(n,r){n&2&&(Qe("margin-left",r._container._contentMargins.left,"px")("margin-right",r._container._contentMargins.right,"px"),yt("mat-drawer-content-hidden",r._shouldBeHidden()))},features:[Yt([{provide:hi,useExisting:t}]),Xe],ngContentSelectors:Fo,decls:1,vars:0,template:function(n,r){n&1&&(Wt(),At(0))},encapsulation:2,changeDetection:0})}return t})(),Pr=(()=>{class t{_elementRef=_(Rt);_focusTrapFactory=_(oo);_focusMonitor=_(pi);_platform=_(Xt);_ngZone=_(Ut);_renderer=_(Sn);_interactivityChecker=_(ao);_doc=_(qe,{optional:!0});_container=_(Oo,{optional:!0});_focusTrap=null;_elementFocusedBeforeDrawerWasOpened=null;_eventCleanups;_isAttached;_anchor;get position(){return this._position}set position(e){e=e==="end"?"end":"start",e!==this._position&&(this._isAttached&&this._updatePositionInParent(e),this._position=e,this.onPositionChanged.emit())}_position="start";get mode(){return this._mode}set mode(e){this._mode=e,this._updateFocusTrapState(),this._modeChanged.next()}_mode="over";get disableClose(){return this._disableClose}set disableClose(e){this._disableClose=en(e)}_disableClose=!1;get autoFocus(){let e=this._autoFocus;return e??(this.mode==="side"?"dialog":"first-tabbable")}set autoFocus(e){(e==="true"||e==="false"||e==null)&&(e=en(e)),this._autoFocus=e}_autoFocus;get opened(){return this._opened}set opened(e){this.toggle(en(e))}_opened=!1;_openedVia;_animationStarted=new Z;_animationEnd=new Z;openedChange=new $(!0);_openedStream=this.openedChange.pipe($e(e=>e),Pt(()=>{}));openedStart=this._animationStarted.pipe($e(()=>this.opened),br(void 0));_closedStream=this.openedChange.pipe($e(e=>!e),Pt(()=>{}));closedStart=this._animationStarted.pipe($e(()=>!this.opened),br(void 0));_destroyed=new Z;onPositionChanged=new $;_content;_modeChanged=new Z;_injector=_(Ce);_changeDetectorRef=_(Dt);constructor(){this.openedChange.pipe(Tt(this._destroyed)).subscribe(e=>{e?(this._doc&&(this._elementFocusedBeforeDrawerWasOpened=this._doc.activeElement),this._takeFocus()):this._isFocusWithinDrawer()&&this._restoreFocus(this._openedVia||"program")}),this._ngZone.runOutsideAngular(()=>{let e=this._elementRef.nativeElement;Ha(e,"keydown").pipe($e(n=>n.keyCode===27&&!this.disableClose&&!lo(n)),Tt(this._destroyed)).subscribe(n=>this._ngZone.run(()=>{this.close(),n.stopPropagation(),n.preventDefault()})),this._eventCleanups=[this._renderer.listen(e,"transitionrun",this._handleTransitionEvent),this._renderer.listen(e,"transitionend",this._handleTransitionEvent),this._renderer.listen(e,"transitioncancel",this._handleTransitionEvent)]}),this._animationEnd.subscribe(()=>{this.openedChange.emit(this._opened)})}_forceFocus(e,n){this._interactivityChecker.isFocusable(e)||(e.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{let r=()=>{a(),o(),e.removeAttribute("tabindex")},a=this._renderer.listen(e,"blur",r),o=this._renderer.listen(e,"mousedown",r)})),e.focus(n)}_focusByCssSelector(e,n){let r=this._elementRef.nativeElement.querySelector(e);r&&this._forceFocus(r,n)}_takeFocus(){if(!this._focusTrap)return;let e=this._elementRef.nativeElement;switch(this.autoFocus){case!1:case"dialog":return;case!0:case"first-tabbable":yr(()=>{!this._focusTrap.focusInitialElement()&&typeof e.focus=="function"&&e.focus()},{injector:this._injector});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this.autoFocus);break}}_restoreFocus(e){this.autoFocus!=="dialog"&&(this._elementFocusedBeforeDrawerWasOpened?this._focusMonitor.focusVia(this._elementFocusedBeforeDrawerWasOpened,e):this._elementRef.nativeElement.blur(),this._elementFocusedBeforeDrawerWasOpened=null)}_isFocusWithinDrawer(){let e=this._doc.activeElement;return!!e&&this._elementRef.nativeElement.contains(e)}ngAfterViewInit(){this._isAttached=!0,this._position==="end"&&this._updatePositionInParent("end"),this._platform.isBrowser&&(this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._updateFocusTrapState())}ngOnDestroy(){this._eventCleanups.forEach(e=>e()),this._focusTrap?.destroy(),this._anchor?.remove(),this._anchor=null,this._animationStarted.complete(),this._animationEnd.complete(),this._modeChanged.complete(),this._destroyed.next(),this._destroyed.complete()}open(e){return this.toggle(!0,e)}close(){return this.toggle(!1)}_closeViaBackdropClick(){return this._setOpen(!1,!0,"mouse")}toggle(e=!this.opened,n){e&&n&&(this._openedVia=n);let r=this._setOpen(e,!e&&this._isFocusWithinDrawer(),this._openedVia||"program");return e||(this._openedVia=null),r}_setOpen(e,n,r){return e===this._opened?Promise.resolve(e?"open":"close"):(this._opened=e,this._container?._transitionsEnabled?this._setIsAnimating(!0):setTimeout(()=>{this._animationStarted.next(),this._animationEnd.next()}),this._elementRef.nativeElement.classList.toggle("mat-drawer-opened",e),!e&&n&&this._restoreFocus(r),this._changeDetectorRef.markForCheck(),this._updateFocusTrapState(),new Promise(a=>{this.openedChange.pipe(Cn(1)).subscribe(o=>a(o?"open":"close"))}))}_setIsAnimating(e){this._elementRef.nativeElement.classList.toggle("mat-drawer-animating",e)}_getWidth(){return this._elementRef.nativeElement.offsetWidth||0}_updateFocusTrapState(){this._focusTrap&&(this._focusTrap.enabled=!!this._container?.hasBackdrop&&this.opened)}_updatePositionInParent(e){if(!this._platform.isBrowser)return;let n=this._elementRef.nativeElement,r=n.parentNode;e==="end"?(this._anchor||(this._anchor=this._doc.createComment("mat-drawer-anchor"),r.insertBefore(this._anchor,n)),r.appendChild(n)):this._anchor&&this._anchor.parentNode.insertBefore(n,this._anchor)}_handleTransitionEvent=e=>{let n=this._elementRef.nativeElement;e.target===n&&this._ngZone.run(()=>{e.type==="transitionrun"?this._animationStarted.next(e):(e.type==="transitionend"&&this._setIsAnimating(!1),this._animationEnd.next(e))})};static \u0275fac=function(n){return new(n||t)};static \u0275cmp=R({type:t,selectors:[["mat-drawer"]],viewQuery:function(n,r){if(n&1&&Q(gu,5),n&2){let a;V(a=z())&&(r._content=a.first)}},hostAttrs:[1,"mat-drawer"],hostVars:12,hostBindings:function(n,r){n&2&&(Lt("align",null)("tabIndex",r.mode!=="side"?"-1":null),Qe("visibility",!r._container&&!r.opened?"hidden":null),yt("mat-drawer-end",r.position==="end")("mat-drawer-over",r.mode==="over")("mat-drawer-push",r.mode==="push")("mat-drawer-side",r.mode==="side"))},inputs:{position:"position",mode:"mode",disableClose:"disableClose",autoFocus:"autoFocus",opened:"opened"},outputs:{openedChange:"openedChange",_openedStream:"opened",openedStart:"openedStart",_closedStream:"closed",closedStart:"closedStart",onPositionChanged:"positionChanged"},exportAs:["matDrawer"],ngContentSelectors:Fo,decls:3,vars:0,consts:[["content",""],["cdkScrollable","",1,"mat-drawer-inner-container"]],template:function(n,r){n&1&&(Wt(),v(0,"div",1,0),At(2),y())},dependencies:[hi],encapsulation:2,changeDetection:0})}return t})(),Lr=(()=>{class t{_dir=_(tn,{optional:!0});_element=_(Rt);_ngZone=_(Ut);_changeDetectorRef=_(Dt);_animationMode=_(se,{optional:!0});_transitionsEnabled=!1;_allDrawers;_drawers=new $a;_content;_userContent;get start(){return this._start}get end(){return this._end}get autosize(){return this._autosize}set autosize(e){this._autosize=en(e)}_autosize=_(xu);get hasBackdrop(){return this._drawerHasBackdrop(this._start)||this._drawerHasBackdrop(this._end)}set hasBackdrop(e){this._backdropOverride=e==null?null:en(e)}_backdropOverride;backdropClick=new $;_start;_end;_left;_right;_destroyed=new Z;_doCheckSubject=new Z;_contentMargins={left:null,right:null};_contentMarginChanges=new Z;get scrollable(){return this._userContent||this._content}_injector=_(Ce);constructor(){let e=_(Xt),n=_(io);this._dir?.change.pipe(Tt(this._destroyed)).subscribe(()=>{this._validateDrawers(),this.updateContentMargins()}),n.change().pipe(Tt(this._destroyed)).subscribe(()=>this.updateContentMargins()),this._animationMode!=="NoopAnimations"&&e.isBrowser&&this._ngZone.runOutsideAngular(()=>{setTimeout(()=>{this._element.nativeElement.classList.add("mat-drawer-transition"),this._transitionsEnabled=!0},200)})}ngAfterContentInit(){this._allDrawers.changes.pipe(vr(this._allDrawers),Tt(this._destroyed)).subscribe(e=>{this._drawers.reset(e.filter(n=>!n._container||n._container===this)),this._drawers.notifyOnChanges()}),this._drawers.changes.pipe(vr(null)).subscribe(()=>{this._validateDrawers(),this._drawers.forEach(e=>{this._watchDrawerToggle(e),this._watchDrawerPosition(e),this._watchDrawerMode(e)}),(!this._drawers.length||this._isDrawerOpen(this._start)||this._isDrawerOpen(this._end))&&this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),this._ngZone.runOutsideAngular(()=>{this._doCheckSubject.pipe(ui(10),Tt(this._destroyed)).subscribe(()=>this.updateContentMargins())})}ngOnDestroy(){this._contentMarginChanges.complete(),this._doCheckSubject.complete(),this._drawers.destroy(),this._destroyed.next(),this._destroyed.complete()}open(){this._drawers.forEach(e=>e.open())}close(){this._drawers.forEach(e=>e.close())}updateContentMargins(){let e=0,n=0;if(this._left&&this._left.opened){if(this._left.mode=="side")e+=this._left._getWidth();else if(this._left.mode=="push"){let r=this._left._getWidth();e+=r,n-=r}}if(this._right&&this._right.opened){if(this._right.mode=="side")n+=this._right._getWidth();else if(this._right.mode=="push"){let r=this._right._getWidth();n+=r,e-=r}}e=e||null,n=n||null,(e!==this._contentMargins.left||n!==this._contentMargins.right)&&(this._contentMargins={left:e,right:n},this._ngZone.run(()=>this._contentMarginChanges.next(this._contentMargins)))}ngDoCheck(){this._autosize&&this._isPushed()&&this._ngZone.runOutsideAngular(()=>this._doCheckSubject.next())}_watchDrawerToggle(e){e._animationStarted.pipe(Tt(this._drawers.changes)).subscribe(()=>{this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),e.mode!=="side"&&e.openedChange.pipe(Tt(this._drawers.changes)).subscribe(()=>this._setContainerClass(e.opened))}_watchDrawerPosition(e){e.onPositionChanged.pipe(Tt(this._drawers.changes)).subscribe(()=>{yr({read:()=>this._validateDrawers()},{injector:this._injector})})}_watchDrawerMode(e){e._modeChanged.pipe(Tt(Ua(this._drawers.changes,this._destroyed))).subscribe(()=>{this.updateContentMargins(),this._changeDetectorRef.markForCheck()})}_setContainerClass(e){let n=this._element.nativeElement.classList,r="mat-drawer-container-has-open";e?n.add(r):n.remove(r)}_validateDrawers(){this._start=this._end=null,this._drawers.forEach(e=>{e.position=="end"?(this._end!=null,this._end=e):(this._start!=null,this._start=e)}),this._right=this._left=null,this._dir&&this._dir.value==="rtl"?(this._left=this._end,this._right=this._start):(this._left=this._start,this._right=this._end)}_isPushed(){return this._isDrawerOpen(this._start)&&this._start.mode!="over"||this._isDrawerOpen(this._end)&&this._end.mode!="over"}_onBackdropClicked(){this.backdropClick.emit(),this._closeModalDrawersViaBackdrop()}_closeModalDrawersViaBackdrop(){[this._start,this._end].filter(e=>e&&!e.disableClose&&this._drawerHasBackdrop(e)).forEach(e=>e._closeViaBackdropClick())}_isShowingBackdrop(){return this._isDrawerOpen(this._start)&&this._drawerHasBackdrop(this._start)||this._isDrawerOpen(this._end)&&this._drawerHasBackdrop(this._end)}_isDrawerOpen(e){return e!=null&&e.opened}_drawerHasBackdrop(e){return this._backdropOverride==null?!!e&&e.mode!=="side":this._backdropOverride}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=R({type:t,selectors:[["mat-drawer-container"]],contentQueries:function(n,r,a){if(n&1&&($t(a,Br,5),$t(a,Pr,5)),n&2){let o;V(o=z())&&(r._content=o.first),V(o=z())&&(r._allDrawers=o)}},viewQuery:function(n,r){if(n&1&&Q(Br,5),n&2){let a;V(a=z())&&(r._userContent=a.first)}},hostAttrs:[1,"mat-drawer-container"],hostVars:2,hostBindings:function(n,r){n&2&&yt("mat-drawer-container-explicit-backdrop",r._backdropOverride)},inputs:{autosize:"autosize",hasBackdrop:"hasBackdrop"},outputs:{backdropClick:"backdropClick"},exportAs:["matDrawerContainer"],features:[Yt([{provide:Oo,useExisting:t}])],ngContentSelectors:bu,decls:4,vars:2,consts:[[1,"mat-drawer-backdrop",3,"mat-drawer-shown"],[1,"mat-drawer-backdrop",3,"click"]],template:function(n,r){n&1&&(Wt(_u),F(0,vu,1,2,"div",0),At(1),At(2,1),F(3,yu,2,0,"mat-drawer-content")),n&2&&(Mt(r.hasBackdrop?0:-1),f(3),Mt(r._content?-1:3))},dependencies:[Br],styles:[`.mat-drawer-container{position:relative;z-index:1;color:var(--mat-sidenav-content-text-color, var(--mat-sys-on-background));background-color:var(--mat-sidenav-content-background-color, var(--mat-sys-background));box-sizing:border-box;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible;background-color:var(--mat-sidenav-scrim-color, color-mix(in srgb, var(--mat-sys-neutral-variant20) 40%, transparent))}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}@media(forced-colors: active){.mat-drawer-backdrop{opacity:.5}}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-content.mat-drawer-content-hidden{opacity:0}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;color:var(--mat-sidenav-container-text-color, var(--mat-sys-on-surface-variant));box-shadow:var(--mat-sidenav-container-elevation-shadow, none);background-color:var(--mat-sidenav-container-background-color, var(--mat-sys-surface));border-top-right-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));border-bottom-right-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));width:var(--mat-sidenav-container-width, 360px);display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}@media(forced-colors: active){.mat-drawer,[dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}}@media(forced-colors: active){[dir=rtl] .mat-drawer,.mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0);border-top-left-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));border-bottom-left-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));border-top-right-radius:0;border-bottom-right-radius:0}[dir=rtl] .mat-drawer{border-top-left-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));border-bottom-left-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));border-top-right-radius:0;border-bottom-right-radius:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{border-top-right-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));border-bottom-right-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));border-top-left-radius:0;border-bottom-left-radius:0;left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer-transition .mat-drawer{transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-drawer:not(.mat-drawer-opened):not(.mat-drawer-animating){visibility:hidden;box-shadow:none}.mat-drawer:not(.mat-drawer-opened):not(.mat-drawer-animating) .mat-drawer-inner-container{display:none}.mat-drawer.mat-drawer-opened.mat-drawer-opened{transform:none}.mat-drawer-side{box-shadow:none;border-right-color:var(--mat-sidenav-container-divider-color, transparent);border-right-width:1px;border-right-style:solid}.mat-drawer-side.mat-drawer-end{border-left-color:var(--mat-sidenav-container-divider-color, transparent);border-left-width:1px;border-left-style:solid;border-right:none}[dir=rtl] .mat-drawer-side{border-left-color:var(--mat-sidenav-container-divider-color, transparent);border-left-width:1px;border-left-style:solid;border-right:none}[dir=rtl] .mat-drawer-side.mat-drawer-end{border-right-color:var(--mat-sidenav-container-divider-color, transparent);border-right-width:1px;border-right-style:solid;border-left:none}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto}.mat-sidenav-fixed{position:fixed}
`],encapsulation:2,changeDetection:0})}return t})();var Bo=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275mod=ft({type:t});static \u0275inj=pt({imports:[wt,Cr,Cr,wt]})}return t})();var Cu=["button"],Su=["*"];function Tu(t,i){if(t&1&&(v(0,"div",2),A(1,"mat-pseudo-checkbox",6),y()),t&2){let e=C();f(),b("disabled",e.disabled)}}var Po=new vt("MAT_BUTTON_TOGGLE_DEFAULT_OPTIONS",{providedIn:"root",factory:Mu});function Mu(){return{hideSingleSelectionIndicator:!1,hideMultipleSelectionIndicator:!1,disabledInteractive:!1}}var Lo=new vt("MatButtonToggleGroup"),Du={provide:mi,useExisting:di(()=>On),multi:!0},Si=class{source;value;constructor(i,e){this.source=i,this.value=e}},On=(()=>{class t{_changeDetector=_(Dt);_dir=_(tn,{optional:!0});_multiple=!1;_disabled=!1;_disabledInteractive=!1;_selectionModel;_rawValue;_controlValueAccessorChangeFn=()=>{};_onTouched=()=>{};_buttonToggles;appearance;get name(){return this._name}set name(e){this._name=e,this._markButtonsForCheck()}_name=_(In).getId("mat-button-toggle-group-");vertical;get value(){let e=this._selectionModel?this._selectionModel.selected:[];return this.multiple?e.map(n=>n.value):e[0]?e[0].value:void 0}set value(e){this._setSelectionByValue(e),this.valueChange.emit(this.value)}valueChange=new $;get selected(){let e=this._selectionModel?this._selectionModel.selected:[];return this.multiple?e:e[0]||null}get multiple(){return this._multiple}set multiple(e){this._multiple=e,this._markButtonsForCheck()}get disabled(){return this._disabled}set disabled(e){this._disabled=e,this._markButtonsForCheck()}get disabledInteractive(){return this._disabledInteractive}set disabledInteractive(e){this._disabledInteractive=e,this._markButtonsForCheck()}get dir(){return this._dir&&this._dir.value==="rtl"?"rtl":"ltr"}change=new $;get hideSingleSelectionIndicator(){return this._hideSingleSelectionIndicator}set hideSingleSelectionIndicator(e){this._hideSingleSelectionIndicator=e,this._markButtonsForCheck()}_hideSingleSelectionIndicator;get hideMultipleSelectionIndicator(){return this._hideMultipleSelectionIndicator}set hideMultipleSelectionIndicator(e){this._hideMultipleSelectionIndicator=e,this._markButtonsForCheck()}_hideMultipleSelectionIndicator;constructor(){let e=_(Po,{optional:!0});this.appearance=e&&e.appearance?e.appearance:"standard",this.hideSingleSelectionIndicator=e?.hideSingleSelectionIndicator??!1,this.hideMultipleSelectionIndicator=e?.hideMultipleSelectionIndicator??!1}ngOnInit(){this._selectionModel=new bo(this.multiple,void 0,!1)}ngAfterContentInit(){this._selectionModel.select(...this._buttonToggles.filter(e=>e.checked)),this.multiple||this._initializeTabIndex()}writeValue(e){this.value=e,this._changeDetector.markForCheck()}registerOnChange(e){this._controlValueAccessorChangeFn=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e}_keydown(e){if(this.multiple||this.disabled)return;let r=e.target.id,a=this._buttonToggles.toArray().findIndex(s=>s.buttonId===r),o=null;switch(e.keyCode){case 32:case 13:o=this._buttonToggles.get(a)||null;break;case 38:o=this._getNextButton(a,-1);break;case 37:o=this._getNextButton(a,this.dir==="ltr"?-1:1);break;case 40:o=this._getNextButton(a,1);break;case 39:o=this._getNextButton(a,this.dir==="ltr"?1:-1);break;default:return}o&&(e.preventDefault(),o._onButtonClick(),o.focus())}_emitChangeEvent(e){let n=new Si(e,this.value);this._rawValue=n.value,this._controlValueAccessorChangeFn(n.value),this.change.emit(n)}_syncButtonToggle(e,n,r=!1,a=!1){!this.multiple&&this.selected&&!e.checked&&(this.selected.checked=!1),this._selectionModel?n?this._selectionModel.select(e):this._selectionModel.deselect(e):a=!0,a?Promise.resolve().then(()=>this._updateModelValue(e,r)):this._updateModelValue(e,r)}_isSelected(e){return this._selectionModel&&this._selectionModel.isSelected(e)}_isPrechecked(e){return typeof this._rawValue>"u"?!1:this.multiple&&Array.isArray(this._rawValue)?this._rawValue.some(n=>e.value!=null&&n===e.value):e.value===this._rawValue}_initializeTabIndex(){if(this._buttonToggles.forEach(e=>{e.tabIndex=-1}),this.selected)this.selected.tabIndex=0;else for(let e=0;e<this._buttonToggles.length;e++){let n=this._buttonToggles.get(e);if(!n.disabled){n.tabIndex=0;break}}this._markButtonsForCheck()}_getNextButton(e,n){let r=this._buttonToggles;for(let a=1;a<=r.length;a++){let o=(e+n*a+r.length)%r.length,s=r.get(o);if(s&&!s.disabled)return s}return null}_setSelectionByValue(e){if(this._rawValue=e,!this._buttonToggles)return;let n=this._buttonToggles.toArray();if(this.multiple&&e?(Array.isArray(e),this._clearSelection(),e.forEach(r=>this._selectValue(r,n))):(this._clearSelection(),this._selectValue(e,n)),!this.multiple&&n.every(r=>r.tabIndex===-1)){for(let r of n)if(!r.disabled){r.tabIndex=0;break}}}_clearSelection(){this._selectionModel.clear(),this._buttonToggles.forEach(e=>{e.checked=!1,this.multiple||(e.tabIndex=-1)})}_selectValue(e,n){for(let r of n)if(r.value===e){r.checked=!0,this._selectionModel.select(r),this.multiple||(r.tabIndex=0);break}}_updateModelValue(e,n){n&&this._emitChangeEvent(e),this.valueChange.emit(this.value)}_markButtonsForCheck(){this._buttonToggles?.forEach(e=>e._markForCheck())}static \u0275fac=function(n){return new(n||t)};static \u0275dir=Gt({type:t,selectors:[["mat-button-toggle-group"]],contentQueries:function(n,r,a){if(n&1&&$t(a,sn,5),n&2){let o;V(o=z())&&(r._buttonToggles=o)}},hostAttrs:[1,"mat-button-toggle-group"],hostVars:6,hostBindings:function(n,r){n&1&&k("keydown",function(o){return r._keydown(o)}),n&2&&(Lt("role",r.multiple?"group":"radiogroup")("aria-disabled",r.disabled),yt("mat-button-toggle-vertical",r.vertical)("mat-button-toggle-group-appearance-standard",r.appearance==="standard"))},inputs:{appearance:"appearance",name:"name",vertical:[2,"vertical","vertical",lt],value:"value",multiple:[2,"multiple","multiple",lt],disabled:[2,"disabled","disabled",lt],disabledInteractive:[2,"disabledInteractive","disabledInteractive",lt],hideSingleSelectionIndicator:[2,"hideSingleSelectionIndicator","hideSingleSelectionIndicator",lt],hideMultipleSelectionIndicator:[2,"hideMultipleSelectionIndicator","hideMultipleSelectionIndicator",lt]},outputs:{valueChange:"valueChange",change:"change"},exportAs:["matButtonToggleGroup"],features:[Yt([Du,{provide:Lo,useExisting:t}])]})}return t})(),sn=(()=>{class t{_changeDetectorRef=_(Dt);_elementRef=_(Rt);_focusMonitor=_(pi);_idGenerator=_(In);_animationMode=_(se,{optional:!0});_checked=!1;ariaLabel;ariaLabelledby=null;_buttonElement;buttonToggleGroup;get buttonId(){return`${this.id}-button`}id;name;value;get tabIndex(){return this._tabIndex}set tabIndex(e){e!==this._tabIndex&&(this._tabIndex=e,this._markForCheck())}_tabIndex;disableRipple;get appearance(){return this.buttonToggleGroup?this.buttonToggleGroup.appearance:this._appearance}set appearance(e){this._appearance=e}_appearance;get checked(){return this.buttonToggleGroup?this.buttonToggleGroup._isSelected(this):this._checked}set checked(e){e!==this._checked&&(this._checked=e,this.buttonToggleGroup&&this.buttonToggleGroup._syncButtonToggle(this,this._checked),this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled||this.buttonToggleGroup&&this.buttonToggleGroup.disabled}set disabled(e){this._disabled=e}_disabled=!1;get disabledInteractive(){return this._disabledInteractive||this.buttonToggleGroup!==null&&this.buttonToggleGroup.disabledInteractive}set disabledInteractive(e){this._disabledInteractive=e}_disabledInteractive;change=new $;constructor(){_(fi).load(gi);let e=_(Lo,{optional:!0}),n=_(new Ga("tabindex"),{optional:!0})||"",r=_(Po,{optional:!0});this._tabIndex=parseInt(n)||0,this.buttonToggleGroup=e,this.appearance=r&&r.appearance?r.appearance:"standard",this.disabledInteractive=r?.disabledInteractive??!1}ngOnInit(){let e=this.buttonToggleGroup;this.id=this.id||this._idGenerator.getId("mat-button-toggle-"),e&&(e._isPrechecked(this)?this.checked=!0:e._isSelected(this)!==this._checked&&e._syncButtonToggle(this,this._checked))}ngAfterViewInit(){this._animationMode!=="NoopAnimations"&&this._elementRef.nativeElement.classList.add("mat-button-toggle-animations-enabled"),this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){let e=this.buttonToggleGroup;this._focusMonitor.stopMonitoring(this._elementRef),e&&e._isSelected(this)&&e._syncButtonToggle(this,!1,!1,!0)}focus(e){this._buttonElement.nativeElement.focus(e)}_onButtonClick(){if(this.disabled)return;let e=this.isSingleSelector()?!0:!this._checked;if(e!==this._checked&&(this._checked=e,this.buttonToggleGroup&&(this.buttonToggleGroup._syncButtonToggle(this,this._checked,!0),this.buttonToggleGroup._onTouched())),this.isSingleSelector()){let n=this.buttonToggleGroup._buttonToggles.find(r=>r.tabIndex===0);n&&(n.tabIndex=-1),this.tabIndex=0}this.change.emit(new Si(this,this.value))}_markForCheck(){this._changeDetectorRef.markForCheck()}_getButtonName(){return this.isSingleSelector()?this.buttonToggleGroup.name:this.name||null}isSingleSelector(){return this.buttonToggleGroup&&!this.buttonToggleGroup.multiple}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=R({type:t,selectors:[["mat-button-toggle"]],viewQuery:function(n,r){if(n&1&&Q(Cu,5),n&2){let a;V(a=z())&&(r._buttonElement=a.first)}},hostAttrs:["role","presentation",1,"mat-button-toggle"],hostVars:14,hostBindings:function(n,r){n&1&&k("focus",function(){return r.focus()}),n&2&&(Lt("aria-label",null)("aria-labelledby",null)("id",r.id)("name",null),yt("mat-button-toggle-standalone",!r.buttonToggleGroup)("mat-button-toggle-checked",r.checked)("mat-button-toggle-disabled",r.disabled)("mat-button-toggle-disabled-interactive",r.disabledInteractive)("mat-button-toggle-appearance-standard",r.appearance==="standard"))},inputs:{ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],id:"id",name:"name",value:"value",tabIndex:"tabIndex",disableRipple:[2,"disableRipple","disableRipple",lt],appearance:"appearance",checked:[2,"checked","checked",lt],disabled:[2,"disabled","disabled",lt],disabledInteractive:[2,"disabledInteractive","disabledInteractive",lt]},outputs:{change:"change"},exportAs:["matButtonToggle"],ngContentSelectors:Su,decls:7,vars:13,consts:[["button",""],["type","button",1,"mat-button-toggle-button","mat-focus-indicator",3,"click","id","disabled"],[1,"mat-button-toggle-checkbox-wrapper"],[1,"mat-button-toggle-label-content"],[1,"mat-button-toggle-focus-overlay"],["matRipple","",1,"mat-button-toggle-ripple",3,"matRippleTrigger","matRippleDisabled"],["state","checked","aria-hidden","true","appearance","minimal",3,"disabled"]],template:function(n,r){if(n&1){let a=X();Wt(),v(0,"button",1,0),k("click",function(){return B(a),P(r._onButtonClick())}),F(2,Tu,2,1,"div",2),v(3,"span",3),At(4),y()(),A(5,"span",4)(6,"span",5)}if(n&2){let a=xt(1);b("id",r.buttonId)("disabled",r.disabled&&!r.disabledInteractive||null),Lt("role",r.isSingleSelector()?"radio":"button")("tabindex",r.disabled&&!r.disabledInteractive?-1:r.tabIndex)("aria-pressed",r.isSingleSelector()?null:r.checked)("aria-checked",r.isSingleSelector()?r.checked:null)("name",r._getButtonName())("aria-label",r.ariaLabel)("aria-labelledby",r.ariaLabelledby)("aria-disabled",r.disabled&&r.disabledInteractive?"true":null),f(2),Mt(r.buttonToggleGroup&&(!r.buttonToggleGroup.multiple&&!r.buttonToggleGroup.hideSingleSelectionIndicator||r.buttonToggleGroup.multiple&&!r.buttonToggleGroup.hideMultipleSelectionIndicator)?2:-1),f(4),b("matRippleTrigger",a)("matRippleDisabled",r.disableRipple||r.disabled)}},dependencies:[Rn,vo],styles:[`.mat-button-toggle-standalone,.mat-button-toggle-group{position:relative;display:inline-flex;flex-direction:row;white-space:nowrap;overflow:hidden;-webkit-tap-highlight-color:rgba(0,0,0,0);transform:translateZ(0);border-radius:var(--mat-legacy-button-toggle-shape)}.mat-button-toggle-standalone:not([class*=mat-elevation-z]),.mat-button-toggle-group:not([class*=mat-elevation-z]){box-shadow:0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12)}@media(forced-colors: active){.mat-button-toggle-standalone,.mat-button-toggle-group{outline:solid 1px}}.mat-button-toggle-standalone.mat-button-toggle-appearance-standard,.mat-button-toggle-group-appearance-standard{border-radius:var(--mat-standard-button-toggle-shape, var(--mat-sys-corner-extra-large));border:solid 1px var(--mat-standard-button-toggle-divider-color, var(--mat-sys-outline))}.mat-button-toggle-standalone.mat-button-toggle-appearance-standard .mat-pseudo-checkbox,.mat-button-toggle-group-appearance-standard .mat-pseudo-checkbox{--mat-minimal-pseudo-checkbox-selected-checkmark-color: var(--mat-standard-button-toggle-selected-state-text-color, var(--mat-sys-on-secondary-container))}.mat-button-toggle-standalone.mat-button-toggle-appearance-standard:not([class*=mat-elevation-z]),.mat-button-toggle-group-appearance-standard:not([class*=mat-elevation-z]){box-shadow:none}@media(forced-colors: active){.mat-button-toggle-standalone.mat-button-toggle-appearance-standard,.mat-button-toggle-group-appearance-standard{outline:0}}.mat-button-toggle-vertical{flex-direction:column}.mat-button-toggle-vertical .mat-button-toggle-label-content{display:block}.mat-button-toggle{white-space:nowrap;position:relative;color:var(--mat-legacy-button-toggle-text-color);font-family:var(--mat-legacy-button-toggle-label-text-font);font-size:var(--mat-legacy-button-toggle-label-text-size);line-height:var(--mat-legacy-button-toggle-label-text-line-height);font-weight:var(--mat-legacy-button-toggle-label-text-weight);letter-spacing:var(--mat-legacy-button-toggle-label-text-tracking);--mat-minimal-pseudo-checkbox-selected-checkmark-color: var(--mat-legacy-button-toggle-selected-state-text-color)}.mat-button-toggle.cdk-keyboard-focused .mat-button-toggle-focus-overlay{opacity:var(--mat-legacy-button-toggle-focus-state-layer-opacity)}.mat-button-toggle .mat-icon svg{vertical-align:top}.mat-button-toggle-checkbox-wrapper{display:inline-block;justify-content:flex-start;align-items:center;width:0;height:18px;line-height:18px;overflow:hidden;box-sizing:border-box;position:absolute;top:50%;left:16px;transform:translate3d(0, -50%, 0)}[dir=rtl] .mat-button-toggle-checkbox-wrapper{left:auto;right:16px}.mat-button-toggle-appearance-standard .mat-button-toggle-checkbox-wrapper{left:12px}[dir=rtl] .mat-button-toggle-appearance-standard .mat-button-toggle-checkbox-wrapper{left:auto;right:12px}.mat-button-toggle-checked .mat-button-toggle-checkbox-wrapper{width:18px}.mat-button-toggle-animations-enabled .mat-button-toggle-checkbox-wrapper{transition:width 150ms 45ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-button-toggle-vertical .mat-button-toggle-checkbox-wrapper{transition:none}.mat-button-toggle-checked{color:var(--mat-legacy-button-toggle-selected-state-text-color);background-color:var(--mat-legacy-button-toggle-selected-state-background-color)}.mat-button-toggle-disabled{pointer-events:none;color:var(--mat-legacy-button-toggle-disabled-state-text-color);background-color:var(--mat-legacy-button-toggle-disabled-state-background-color);--mat-minimal-pseudo-checkbox-disabled-selected-checkmark-color: var(--mat-legacy-button-toggle-disabled-state-text-color)}.mat-button-toggle-disabled.mat-button-toggle-checked{background-color:var(--mat-legacy-button-toggle-disabled-selected-state-background-color)}.mat-button-toggle-disabled-interactive{pointer-events:auto}.mat-button-toggle-appearance-standard{color:var(--mat-standard-button-toggle-text-color, var(--mat-sys-on-surface));background-color:var(--mat-standard-button-toggle-background-color, transparent);font-family:var(--mat-standard-button-toggle-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mat-standard-button-toggle-label-text-size, var(--mat-sys-label-large-size));line-height:var(--mat-standard-button-toggle-label-text-line-height, var(--mat-sys-label-large-line-height));font-weight:var(--mat-standard-button-toggle-label-text-weight, var(--mat-sys-label-large-weight));letter-spacing:var(--mat-standard-button-toggle-label-text-tracking, var(--mat-sys-label-large-tracking))}.mat-button-toggle-group-appearance-standard .mat-button-toggle-appearance-standard+.mat-button-toggle-appearance-standard{border-left:solid 1px var(--mat-standard-button-toggle-divider-color, var(--mat-sys-outline))}[dir=rtl] .mat-button-toggle-group-appearance-standard .mat-button-toggle-appearance-standard+.mat-button-toggle-appearance-standard{border-left:none;border-right:solid 1px var(--mat-standard-button-toggle-divider-color, var(--mat-sys-outline))}.mat-button-toggle-group-appearance-standard.mat-button-toggle-vertical .mat-button-toggle-appearance-standard+.mat-button-toggle-appearance-standard{border-left:none;border-right:none;border-top:solid 1px var(--mat-standard-button-toggle-divider-color, var(--mat-sys-outline))}.mat-button-toggle-appearance-standard.mat-button-toggle-checked{color:var(--mat-standard-button-toggle-selected-state-text-color, var(--mat-sys-on-secondary-container));background-color:var(--mat-standard-button-toggle-selected-state-background-color, var(--mat-sys-secondary-container))}.mat-button-toggle-appearance-standard.mat-button-toggle-disabled{color:var(--mat-standard-button-toggle-disabled-state-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));background-color:var(--mat-standard-button-toggle-disabled-state-background-color, transparent)}.mat-button-toggle-appearance-standard.mat-button-toggle-disabled .mat-pseudo-checkbox{--mat-minimal-pseudo-checkbox-disabled-selected-checkmark-color: var(--mat-standard-button-toggle-disabled-selected-state-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-button-toggle-appearance-standard.mat-button-toggle-disabled.mat-button-toggle-checked{color:var(--mat-standard-button-toggle-disabled-selected-state-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));background-color:var(--mat-standard-button-toggle-disabled-selected-state-background-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-button-toggle-appearance-standard .mat-button-toggle-focus-overlay{background-color:var(--mat-standard-button-toggle-state-layer-color, var(--mat-sys-on-surface))}.mat-button-toggle-appearance-standard:hover .mat-button-toggle-focus-overlay{opacity:var(--mat-standard-button-toggle-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-button-toggle-appearance-standard.cdk-keyboard-focused .mat-button-toggle-focus-overlay{opacity:var(--mat-standard-button-toggle-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}@media(hover: none){.mat-button-toggle-appearance-standard:hover .mat-button-toggle-focus-overlay{display:none}}.mat-button-toggle-label-content{-webkit-user-select:none;user-select:none;display:inline-block;padding:0 16px;line-height:var(--mat-legacy-button-toggle-height);position:relative}.mat-button-toggle-appearance-standard .mat-button-toggle-label-content{padding:0 12px;line-height:var(--mat-standard-button-toggle-height, 40px)}.mat-button-toggle-label-content>*{vertical-align:middle}.mat-button-toggle-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:inherit;pointer-events:none;opacity:0;background-color:var(--mat-legacy-button-toggle-state-layer-color)}@media(forced-colors: active){.mat-button-toggle-checked .mat-button-toggle-focus-overlay{border-bottom:solid 500px;opacity:.5;height:0}.mat-button-toggle-checked:hover .mat-button-toggle-focus-overlay{opacity:.6}.mat-button-toggle-checked.mat-button-toggle-appearance-standard .mat-button-toggle-focus-overlay{border-bottom:solid 500px}}.mat-button-toggle .mat-button-toggle-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-button-toggle-button{border:0;background:none;color:inherit;padding:0;margin:0;font:inherit;outline:none;width:100%;cursor:pointer}.mat-button-toggle-animations-enabled .mat-button-toggle-button{transition:padding 150ms 45ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-button-toggle-vertical .mat-button-toggle-button{transition:none}.mat-button-toggle-disabled .mat-button-toggle-button{cursor:default}.mat-button-toggle-button::-moz-focus-inner{border:0}.mat-button-toggle-checked .mat-button-toggle-button:has(.mat-button-toggle-checkbox-wrapper){padding-left:30px}[dir=rtl] .mat-button-toggle-checked .mat-button-toggle-button:has(.mat-button-toggle-checkbox-wrapper){padding-left:0;padding-right:30px}.mat-button-toggle-standalone.mat-button-toggle-appearance-standard{--mat-focus-indicator-border-radius:var(--mat-standard-button-toggle-shape, var(--mat-sys-corner-extra-large))}.mat-button-toggle-group-appearance-standard:not(.mat-button-toggle-vertical) .mat-button-toggle:last-of-type .mat-button-toggle-button::before{border-top-right-radius:var(--mat-standard-button-toggle-shape, var(--mat-sys-corner-extra-large));border-bottom-right-radius:var(--mat-standard-button-toggle-shape, var(--mat-sys-corner-extra-large))}.mat-button-toggle-group-appearance-standard:not(.mat-button-toggle-vertical) .mat-button-toggle:first-of-type .mat-button-toggle-button::before{border-top-left-radius:var(--mat-standard-button-toggle-shape, var(--mat-sys-corner-extra-large));border-bottom-left-radius:var(--mat-standard-button-toggle-shape, var(--mat-sys-corner-extra-large))}.mat-button-toggle-group-appearance-standard.mat-button-toggle-vertical .mat-button-toggle:last-of-type .mat-button-toggle-button::before{border-bottom-right-radius:var(--mat-standard-button-toggle-shape, var(--mat-sys-corner-extra-large));border-bottom-left-radius:var(--mat-standard-button-toggle-shape, var(--mat-sys-corner-extra-large))}.mat-button-toggle-group-appearance-standard.mat-button-toggle-vertical .mat-button-toggle:first-of-type .mat-button-toggle-button::before{border-top-right-radius:var(--mat-standard-button-toggle-shape, var(--mat-sys-corner-extra-large));border-top-left-radius:var(--mat-standard-button-toggle-shape, var(--mat-sys-corner-extra-large))}
`],encapsulation:2,changeDetection:0})}return t})(),No=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275mod=ft({type:t});static \u0275inj=pt({imports:[wt,_i,sn,wt]})}return t})();var Au=["template"];function Eu(t,i){if(t&1){let e=X();v(0,"mat-chip-option",12),k("removed",function(){let r=B(e).$implicit,a=C();return P(a.Delete(r))})("click",function(){let r=B(e).$implicit,a=C();return P(a.Click(r))}),M(1),v(2,"button",13)(3,"mat-icon"),M(4,"cancel"),y()()()}if(t&2){let e=i.$implicit;f(),Et(" ",e.Name," ")}}function Fu(t,i){t&1&&A(0,"div",14)}var Ti=class t{constructor(i,e){this.Service=i;this.Dialog=e;i.Days.valueChanges.subscribe(n=>this.DayChange(n)),this.formControl.valueChanges.subscribe(n=>console.log(n))}template;Res=new $;Condition=new E("\u9023\u8CB7",["buy>0"]);formControl=new ue([]);ngOnInit(){}ngOnChanges(i){}DayChange(i){let e=-i,n=[];for(let r of this.Condition.Rules){let a=r.cmd.split(" in")[0];n.push(`${a} in ${e} day`)}this.ConditionSelected(n,e)}Changed(i){console.log(i)}Click(i){let e=-this.Service.Days.value,n=this.Service.StockRoot;n.FillCost(e-1),this.Condition=i.Clone(),this.Res.emit(n.FilterCondition(i.Name))}ConditionSelected(i,e){if(!e||e<=0)return;this.Service.StockRoot.FillCost(e-1);let r=this.Service.StockRoot.Filter(E.Type.TW);this.Condition.SetRules(i),this.Condition.SetStockTW(r),this.Res.emit(this.Condition.Filter())}Save(i){let e=new E(i,this.Condition.Cmds);this.Service.ConditionAdd(e)}Delete(i){this.Dialog.open(_o,{panelClass:"Dialog-Glass",width:"300px",height:"200px",data:{template:this.template,title:"\u522A\u9664"}}).afterClosed().subscribe(n=>{n&&this.Service.ConditionDelete(i)})}static \u0275fac=function(e){return new(e||t)(q(J),q(fo))};static \u0275cmp=R({type:t,selectors:[["invest-stock-nav-rule"]],viewQuery:function(e,n){if(e&1&&Q(Au,5),e&2){let r;V(r=z())&&(n.template=r.first)}},outputs:{Res:"Res"},standalone:!1,features:[st],decls:18,vars:6,consts:[["ruleName",""],["template",""],[1,"Flex-R-SS"],[2,"width","100%","height","200px","position","relative"],[1,"Input-Full",2,"position","absolute","right","0","margin","4px","z-index","100","width","200px"],["mat-button","","color","accent",2,"position","absolute","right","0","margin","4px","z-index","100",3,"click"],[3,"Selected","Conditions"],[1,"Flex-R-SC",2,"width","100%"],[2,"width","80%",3,"min","max"],["matSliderThumb","",3,"formControl"],[2,"width","150px"],["aria-label","Cutest rule breeds","multiple","true",1,"mat-mdc-chip-set-stacked",3,"change","formControl"],[3,"removed","click"],["matChipRemove",""],[1,"Flex-R-AS"]],template:function(e,n){if(e&1){let r=X();v(0,"div",2)(1,"div",3),A(2,"input",4,0),v(4,"button",5),k("click",function(){B(r);let o=xt(3);return P(n.Save(o.value))}),M(5,"Save"),y(),v(6,"tool-filter",6),k("Selected",function(o){return B(r),P(n.ConditionSelected(o))}),y()(),v(7,"div",7)(8,"mat-slider",8),A(9,"input",9),y(),v(10,"span"),M(11),y()(),v(12,"div",10)(13,"mat-chip-listbox",11),k("change",function(o){return B(r),P(n.Changed(o))}),Mn(14,Eu,5,1,"mat-chip-option",null,xr),y()()(),F(16,Fu,1,0,"ng-template",null,1,je)}e&2&&(f(6),b("Conditions",n.Condition.Cmds),f(2),b("min",n.Service.MinDays)("max",-1),f(),b("formControl",n.Service.Days),f(2),Et("\u65E5\u671F: ",-n.Service.Days.value,""),f(2),b("formControl",n.formControl),f(),Dn(n.Service.StockRoot.Conditions))},dependencies:[Je,ce,de,wo,me,xi,yi,yo,bi,on,Te],encapsulation:2})};function Bu(t,i){if(t&1&&(v(0,"mat-chip-option"),M(1),y()),t&2){let e=i.$implicit;f(),le(e)}}function Pu(t,i){if(t&1&&(v(0,"mat-chip-option"),M(1),y()),t&2){let e=i.$implicit;f(),le(e)}}var Mi=class t{constructor(i){this.Service=i;this.RuleControl.valueChanges.subscribe(e=>e?this.RuleChanged(e):"")}Res=new $;FilterBase=[E.Type.Favor,E.Type.MACD,E.Type.BBH,E.Type.BBL,E.Type.MAH,E.Type.MAL,E.Type.IT,E.Type.Technology,E.Type.Transport,E.Type.Weight,E.Type.Power,E.Type.Expensive,E.Type.NoName,E.Type.ETF,E.Type.TW];FilterRule=[ct.Type.Avg100V,ct.Type.Buy3Day,ct.Type.Buy20Day];RuleControl=new ue([""]);Search(i){let e=this.Service.StockRoot.GetStock({code:i,name:i});e&&this.Res.emit([e])}Changed(i,e){if(e=="base"){this.Service.StockRoot.SetFilterBase(i.value);let n=[ct.Type.Avg100V,ct.Type.Buy3Day,ct.Type.Buy20Day];i.value==E.Type.Favor&&(n=[]),this.RuleControl.setValue(n)}}RuleChanged(i){if(!i)return this.Res.emit([]);let e=this.Service.StockRoot.Filter("");for(let n of i)e=this.Service.StockRoot.Filter(n,e);this.Res.emit(e)}static \u0275fac=function(e){return new(e||t)(q(J))};static \u0275cmp=R({type:t,selectors:[["invest-stock-nav-fav"]],outputs:{Res:"Res"},standalone:!1,decls:13,vars:3,consts:[["search",""],[1,"Flex-R-SB",2,"width","100%","max-width","330px"],[1,"Flex",2,"background","white","padding","2px","position","relative","border-radius","4px"],[1,"Input-Full","F-24",3,"blur"],["mat-button","",2,"height","30px","position","absolute","right","2px","background","var(--mat-sidenav-content-background-color)"],[2,"width","150px"],[1,"mat-mdc-chip-set-stacked",3,"change"],[4,"ngFor","ngForOf"],["multiple","",1,"mat-mdc-chip-set-stacked",3,"change","formControl"]],template:function(e,n){if(e&1){let r=X();v(0,"div",1)(1,"div",2)(2,"input",3,0),k("blur",function(){B(r);let o=xt(3);return P(n.Search(o.value))}),y(),v(4,"button",4)(5,"mat-icon"),M(6,"search"),y()()(),v(7,"div",5)(8,"mat-chip-listbox",6),k("change",function(o){return B(r),P(n.Changed(o,"base"))}),F(9,Bu,2,1,"mat-chip-option",7),y()(),v(10,"div",5)(11,"mat-chip-listbox",8),k("change",function(o){return B(r),P(n.Changed(o,"rule"))}),F(12,Pu,2,1,"mat-chip-option",7),y()()()}e&2&&(f(9),b("ngForOf",n.FilterBase),f(2),b("formControl",n.RuleControl),f(),b("ngForOf",n.FilterRule))},dependencies:[Ka,ce,de,me,xi,yi,bi],encapsulation:2})};function Nu(t,i){if(t&1){let e=X();v(0,"invest-stock-nav-fav",4),k("Res",function(r){B(e);let a=C();return P(a.FilterResultFav(r))}),y()}}function Vu(t,i){if(t&1){let e=X();v(0,"invest-stock-nav-rule",4),k("Res",function(r){B(e);let a=C();return P(a.FilterResultRule(r))}),y()}}var Ii=class t{Res=new $;TabName="fav";constructor(){}ngOnInit(){}ngOnChanges(i){}ChangeNav(i){this.TabName=i.value}FilterResultFav(i){this.TabName=="fav"&&this.Res.emit(i)}FilterResultRule(i){this.TabName=="rule"&&this.Res.emit(i)}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=R({type:t,selectors:[["invest-stock-nav"]],outputs:{Res:"Res"},standalone:!1,features:[st],decls:8,vars:2,consts:[[3,"change"],["value","fav"],["value","rule"],[3,"Res",4,"ngIf"],[3,"Res"]],template:function(e,n){e&1&&(v(0,"div")(1,"mat-button-toggle-group",0),k("change",function(a){return n.ChangeNav(a)}),v(2,"mat-button-toggle",1),M(3,"Favorite"),y(),v(4,"mat-button-toggle",2),M(5,"Rule"),y()(),F(6,Nu,1,0,"invest-stock-nav-fav",3)(7,Vu,1,0,"invest-stock-nav-rule",3),y()),e&2&&(f(6),b("ngIf",n.TabName=="fav"),f(),b("ngIf",n.TabName=="rule"))},dependencies:[Ze,On,sn,Ti,Mi],encapsulation:2})};var Ri=class t{constructor(i){this.Service=i}Stocks=[];Days=14;Select=new $;Sort=new $;MSG="\u6708\u5E95\u51FA\u91D1 or \u6708\u4E2D\u7D50\u7B97";IsChart=!1;TableColumn=["code","name","cost","now","up"];TableSource=[];DebounceTime=500;Debounce=new Z;ngOnInit(){this.Debounce.pipe(ui(this.DebounceTime)).subscribe(i=>this.TableSource=i)}ngOnDestroy(){this.Debounce.complete()}ngOnChanges(i){this.Debounce.next(this.Stocks)}Selected(i){this.Select.emit(i)}Sorted(i){this.Sort.emit(i)}static \u0275fac=function(e){return new(e||t)(q(J))};static \u0275cmp=R({type:t,selectors:[["invest-stock-table-list"]],inputs:{Stocks:"Stocks",Days:"Days"},outputs:{Select:"Select",Sort:"Sort"},standalone:!1,features:[st],decls:5,vars:4,consts:[[2,"color","red","width","380px"],[3,"Select","Sort","Source","Column"]],template:function(e,n){e&1&&(v(0,"div",0),M(1),y(),v(2,"span"),M(3),y(),v(4,"tool-table",1),k("Select",function(a){return n.Selected(a)})("Sort",function(a){return n.Sorted(a)}),y()),e&2&&(f(),le(n.MSG),f(2),Et(" Count : ",n.Stocks.length,""),f(),b("Source",n.TableSource)("Column",n.TableColumn))},dependencies:[vi],encapsulation:2})};var ln=class t{constructor(i,e,n,r){this.title=i;this.xAxis=e;this.sets=n;this.range=r;this.Datasets=this.sets.map(a=>a.ToChartDataset()).filter(a=>!!a)}ChartData=null;Datasets=[];GetChartData(i=0){let e=this.xAxis.length-(i+1);return this.Datasets.map((n,r)=>n.data=this.sets[r].yAxis.filter((a,o)=>o>e)),this.ChartData={},this.ChartData.labels=this.xAxis.map(n=>n.split("-").at(-1)).filter((n,r)=>r>e),this.ChartData.datasets=this.Datasets,this.ChartData}static get Non(){return new t("Non",[],[],[])}},Ft=class{constructor(i,e,n,r){this.name=i;this.type=e;this.color=n;this.yAxis=r}ToChartDataset(){let[i,e]=this.type.split("_"),n={label:this.name,data:this.yAxis,borderWidth:1,backgroundColor:this.color};switch(i){case"bar":let r={};r.type="bar",r.yAxisID="y0",r.stack="Stack 0",Object.assign(n,r);break;case"line":let a={};a.type="line",a.yAxisID="y1",a.pointRadius=Number.parseInt(e),Object.assign(n,a);break;case"non":default:return null}return n}};function Me(t,i){return t==null||i==null?NaN:t<i?-1:t>i?1:t>=i?0:NaN}function Vr(t,i){return t==null||i==null?NaN:i<t?-1:i>t?1:i>=t?0:NaN}function Ai(t){let i,e,n;t.length!==2?(i=Me,e=(s,l)=>Me(t(s),l),n=(s,l)=>t(s)-l):(i=t===Me||t===Vr?t:Gu,e=t,n=t);function r(s,l,c=0,u=s.length){if(c<u){if(i(l,l)!==0)return u;do{let d=c+u>>>1;e(s[d],l)<0?c=d+1:u=d}while(c<u)}return c}function a(s,l,c=0,u=s.length){if(c<u){if(i(l,l)!==0)return u;do{let d=c+u>>>1;e(s[d],l)<=0?c=d+1:u=d}while(c<u)}return c}function o(s,l,c=0,u=s.length){let d=r(s,l,c,u-1);return d>c&&n(s[d-1],l)>-n(s[d],l)?d-1:d}return{left:r,center:o,right:a}}function Gu(){return 0}function zr(t){return t===null?NaN:+t}var Ho=Ai(Me),Uo=Ho.right,Wu=Ho.left,$u=Ai(zr).center,Hr=Uo;var cn=class extends Map{constructor(i,e=Qu){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:e}}),i!=null)for(let[n,r]of i)this.set(n,r)}get(i){return super.get(Go(this,i))}has(i){return super.has(Go(this,i))}set(i,e){return super.set(Yu(this,i),e)}delete(i){return super.delete(Xu(this,i))}};function Go({_intern:t,_key:i},e){let n=i(e);return t.has(n)?t.get(n):e}function Yu({_intern:t,_key:i},e){let n=i(e);return t.has(n)?t.get(n):(t.set(n,e),e)}function Xu({_intern:t,_key:i},e){let n=i(e);return t.has(n)&&(e=t.get(n),t.delete(n)),e}function Qu(t){return t!==null&&typeof t=="object"?t.valueOf():t}var ju=Math.sqrt(50),qu=Math.sqrt(10),Zu=Math.sqrt(2);function Ei(t,i,e){let n=(i-t)/Math.max(0,e),r=Math.floor(Math.log10(n)),a=n/Math.pow(10,r),o=a>=ju?10:a>=qu?5:a>=Zu?2:1,s,l,c;return r<0?(c=Math.pow(10,-r)/o,s=Math.round(t*c),l=Math.round(i*c),s/c<t&&++s,l/c>i&&--l,c=-c):(c=Math.pow(10,r)*o,s=Math.round(t/c),l=Math.round(i/c),s*c<t&&++s,l*c>i&&--l),l<s&&.5<=e&&e<2?Ei(t,i,e*2):[s,l,c]}function Fi(t,i,e){if(i=+i,t=+t,e=+e,!(e>0))return[];if(t===i)return[t];let n=i<t,[r,a,o]=n?Ei(i,t,e):Ei(t,i,e);if(!(a>=r))return[];let s=a-r+1,l=new Array(s);if(n)if(o<0)for(let c=0;c<s;++c)l[c]=(a-c)/-o;else for(let c=0;c<s;++c)l[c]=(a-c)*o;else if(o<0)for(let c=0;c<s;++c)l[c]=(r+c)/-o;else for(let c=0;c<s;++c)l[c]=(r+c)*o;return l}function Bn(t,i,e){return i=+i,t=+t,e=+e,Ei(t,i,e)[2]}function Ur(t,i,e){i=+i,t=+t,e=+e;let n=i<t,r=n?Bn(i,t,e):Bn(t,i,e);return(n?-1:1)*(r<0?1/-r:r)}function Oi(t,i,e){t=+t,i=+i,e=(r=arguments.length)<2?(i=t,t=0,1):r<3?1:+e;for(var n=-1,r=Math.max(0,Math.ceil((i-t)/e))|0,a=new Array(r);++n<r;)a[n]=t+n*e;return a}function Wo(t){return t}var Gr=1,Bi=2,Wr=3,Pn=4,$o=1e-6;function Ku(t){return"translate("+t+",0)"}function Ju(t){return"translate(0,"+t+")"}function td(t){return i=>+t(i)}function ed(t,i){return i=Math.max(0,t.bandwidth()-i*2)/2,t.round()&&(i=Math.round(i)),e=>+t(e)+i}function nd(){return!this.__axis}function $r(t,i){var e=[],n=null,r=null,a=6,o=6,s=3,l=typeof window<"u"&&window.devicePixelRatio>1?0:.5,c=t===Gr||t===Pn?-1:1,u=t===Pn||t===Bi?"x":"y",d=t===Gr||t===Wr?Ku:Ju;function m(h){var p=n??(i.ticks?i.ticks.apply(i,e):i.domain()),S=r??(i.tickFormat?i.tickFormat.apply(i,e):Wo),H=Math.max(a,0)+s,it=i.range(),tt=+it[0]+l,N=+it[it.length-1]+l,Y=(i.bandwidth?ed:td)(i.copy(),l),U=h.selection?h.selection():h,ot=U.selectAll(".domain").data([null]),_t=U.selectAll(".tick").data(p,i).order(),Ot=_t.exit(),ae=_t.enter().append("g").attr("class","tick"),zt=_t.select("line"),T=_t.select("text");ot=ot.merge(ot.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),_t=_t.merge(ae),zt=zt.merge(ae.append("line").attr("stroke","currentColor").attr(u+"2",c*a)),T=T.merge(ae.append("text").attr("fill","currentColor").attr(u,c*H).attr("dy",t===Gr?"0em":t===Wr?"0.71em":"0.32em")),h!==U&&(ot=ot.transition(h),_t=_t.transition(h),zt=zt.transition(h),T=T.transition(h),Ot=Ot.transition(h).attr("opacity",$o).attr("transform",function(rt){return isFinite(rt=Y(rt))?d(rt+l):this.getAttribute("transform")}),ae.attr("opacity",$o).attr("transform",function(rt){var et=this.parentNode.__axis;return d((et&&isFinite(et=et(rt))?et:Y(rt))+l)})),Ot.remove(),ot.attr("d",t===Pn||t===Bi?o?"M"+c*o+","+tt+"H"+l+"V"+N+"H"+c*o:"M"+l+","+tt+"V"+N:o?"M"+tt+","+c*o+"V"+l+"H"+N+"V"+c*o:"M"+tt+","+l+"H"+N),_t.attr("opacity",1).attr("transform",function(rt){return d(Y(rt)+l)}),zt.attr(u+"2",c*a),T.attr(u,c*H).text(S),U.filter(nd).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===Bi?"start":t===Pn?"end":"middle"),U.each(function(){this.__axis=Y})}return m.scale=function(h){return arguments.length?(i=h,m):i},m.ticks=function(){return e=Array.from(arguments),m},m.tickArguments=function(h){return arguments.length?(e=h==null?[]:Array.from(h),m):e.slice()},m.tickValues=function(h){return arguments.length?(n=h==null?null:Array.from(h),m):n&&n.slice()},m.tickFormat=function(h){return arguments.length?(r=h,m):r},m.tickSize=function(h){return arguments.length?(a=o=+h,m):a},m.tickSizeInner=function(h){return arguments.length?(a=+h,m):a},m.tickSizeOuter=function(h){return arguments.length?(o=+h,m):o},m.tickPadding=function(h){return arguments.length?(s=+h,m):s},m.offset=function(h){return arguments.length?(l=+h,m):l},m}function Yr(t){return $r(Bi,t)}function Xr(t){return $r(Wr,t)}function Qr(t){return $r(Pn,t)}var id={value:()=>{}};function Xo(){for(var t=0,i=arguments.length,e={},n;t<i;++t){if(!(n=arguments[t]+"")||n in e||/[\s.]/.test(n))throw new Error("illegal type: "+n);e[n]=[]}return new Pi(e)}function Pi(t){this._=t}function rd(t,i){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");if(r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),e&&!i.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:n}})}Pi.prototype=Xo.prototype={constructor:Pi,on:function(t,i){var e=this._,n=rd(t+"",e),r,a=-1,o=n.length;if(arguments.length<2){for(;++a<o;)if((r=(t=n[a]).type)&&(r=ad(e[r],t.name)))return r;return}if(i!=null&&typeof i!="function")throw new Error("invalid callback: "+i);for(;++a<o;)if(r=(t=n[a]).type)e[r]=Yo(e[r],t.name,i);else if(i==null)for(r in e)e[r]=Yo(e[r],t.name,null);return this},copy:function(){var t={},i=this._;for(var e in i)t[e]=i[e].slice();return new Pi(t)},call:function(t,i){if((r=arguments.length-2)>0)for(var e=new Array(r),n=0,r,a;n<r;++n)e[n]=arguments[n+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=this._[t],n=0,r=a.length;n<r;++n)a[n].value.apply(i,e)},apply:function(t,i,e){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var n=this._[t],r=0,a=n.length;r<a;++r)n[r].value.apply(i,e)}};function ad(t,i){for(var e=0,n=t.length,r;e<n;++e)if((r=t[e]).name===i)return r.value}function Yo(t,i,e){for(var n=0,r=t.length;n<r;++n)if(t[n].name===i){t[n]=id,t=t.slice(0,n).concat(t.slice(n+1));break}return e!=null&&t.push({name:i,value:e}),t}var jr=Xo;var Li="http://www.w3.org/1999/xhtml",qr={svg:"http://www.w3.org/2000/svg",xhtml:Li,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Jt(t){var i=t+="",e=i.indexOf(":");return e>=0&&(i=t.slice(0,e))!=="xmlns"&&(t=t.slice(e+1)),qr.hasOwnProperty(i)?{space:qr[i],local:t}:t}function od(t){return function(){var i=this.ownerDocument,e=this.namespaceURI;return e===Li&&i.documentElement.namespaceURI===Li?i.createElement(t):i.createElementNS(e,t)}}function sd(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function un(t){var i=Jt(t);return(i.local?sd:od)(i)}function ld(){}function De(t){return t==null?ld:function(){return this.querySelector(t)}}function Qo(t){typeof t!="function"&&(t=De(t));for(var i=this._groups,e=i.length,n=new Array(e),r=0;r<e;++r)for(var a=i[r],o=a.length,s=n[r]=new Array(o),l,c,u=0;u<o;++u)(l=a[u])&&(c=t.call(l,l.__data__,u,a))&&("__data__"in l&&(c.__data__=l.__data__),s[u]=c);return new j(n,this._parents)}function Zr(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function cd(){return[]}function Ln(t){return t==null?cd:function(){return this.querySelectorAll(t)}}function ud(t){return function(){return Zr(t.apply(this,arguments))}}function jo(t){typeof t=="function"?t=ud(t):t=Ln(t);for(var i=this._groups,e=i.length,n=[],r=[],a=0;a<e;++a)for(var o=i[a],s=o.length,l,c=0;c<s;++c)(l=o[c])&&(n.push(t.call(l,l.__data__,c,o)),r.push(l));return new j(n,r)}function Nn(t){return function(){return this.matches(t)}}function Ni(t){return function(i){return i.matches(t)}}var dd=Array.prototype.find;function md(t){return function(){return dd.call(this.children,t)}}function hd(){return this.firstElementChild}function qo(t){return this.select(t==null?hd:md(typeof t=="function"?t:Ni(t)))}var pd=Array.prototype.filter;function fd(){return Array.from(this.children)}function gd(t){return function(){return pd.call(this.children,t)}}function Zo(t){return this.selectAll(t==null?fd:gd(typeof t=="function"?t:Ni(t)))}function Ko(t){typeof t!="function"&&(t=Nn(t));for(var i=this._groups,e=i.length,n=new Array(e),r=0;r<e;++r)for(var a=i[r],o=a.length,s=n[r]=[],l,c=0;c<o;++c)(l=a[c])&&t.call(l,l.__data__,c,a)&&s.push(l);return new j(n,this._parents)}function Vi(t){return new Array(t.length)}function Jo(){return new j(this._enter||this._groups.map(Vi),this._parents)}function Vn(t,i){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=i}Vn.prototype={constructor:Vn,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,i){return this._parent.insertBefore(t,i)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function ts(t){return function(){return t}}function _d(t,i,e,n,r,a){for(var o=0,s,l=i.length,c=a.length;o<c;++o)(s=i[o])?(s.__data__=a[o],n[o]=s):e[o]=new Vn(t,a[o]);for(;o<l;++o)(s=i[o])&&(r[o]=s)}function bd(t,i,e,n,r,a,o){var s,l,c=new Map,u=i.length,d=a.length,m=new Array(u),h;for(s=0;s<u;++s)(l=i[s])&&(m[s]=h=o.call(l,l.__data__,s,i)+"",c.has(h)?r[s]=l:c.set(h,l));for(s=0;s<d;++s)h=o.call(t,a[s],s,a)+"",(l=c.get(h))?(n[s]=l,l.__data__=a[s],c.delete(h)):e[s]=new Vn(t,a[s]);for(s=0;s<u;++s)(l=i[s])&&c.get(m[s])===l&&(r[s]=l)}function vd(t){return t.__data__}function es(t,i){if(!arguments.length)return Array.from(this,vd);var e=i?bd:_d,n=this._parents,r=this._groups;typeof t!="function"&&(t=ts(t));for(var a=r.length,o=new Array(a),s=new Array(a),l=new Array(a),c=0;c<a;++c){var u=n[c],d=r[c],m=d.length,h=yd(t.call(u,u&&u.__data__,c,n)),p=h.length,S=s[c]=new Array(p),H=o[c]=new Array(p),it=l[c]=new Array(m);e(u,d,S,H,it,h,i);for(var tt=0,N=0,Y,U;tt<p;++tt)if(Y=S[tt]){for(tt>=N&&(N=tt+1);!(U=H[N])&&++N<p;);Y._next=U||null}}return o=new j(o,n),o._enter=s,o._exit=l,o}function yd(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function ns(){return new j(this._exit||this._groups.map(Vi),this._parents)}function is(t,i,e){var n=this.enter(),r=this,a=this.exit();return typeof t=="function"?(n=t(n),n&&(n=n.selection())):n=n.append(t+""),i!=null&&(r=i(r),r&&(r=r.selection())),e==null?a.remove():e(a),n&&r?n.merge(r).order():r}function rs(t){for(var i=t.selection?t.selection():t,e=this._groups,n=i._groups,r=e.length,a=n.length,o=Math.min(r,a),s=new Array(r),l=0;l<o;++l)for(var c=e[l],u=n[l],d=c.length,m=s[l]=new Array(d),h,p=0;p<d;++p)(h=c[p]||u[p])&&(m[p]=h);for(;l<r;++l)s[l]=e[l];return new j(s,this._parents)}function as(){for(var t=this._groups,i=-1,e=t.length;++i<e;)for(var n=t[i],r=n.length-1,a=n[r],o;--r>=0;)(o=n[r])&&(a&&o.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(o,a),a=o);return this}function os(t){t||(t=xd);function i(d,m){return d&&m?t(d.__data__,m.__data__):!d-!m}for(var e=this._groups,n=e.length,r=new Array(n),a=0;a<n;++a){for(var o=e[a],s=o.length,l=r[a]=new Array(s),c,u=0;u<s;++u)(c=o[u])&&(l[u]=c);l.sort(i)}return new j(r,this._parents).order()}function xd(t,i){return t<i?-1:t>i?1:t>=i?0:NaN}function ss(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function ls(){return Array.from(this)}function cs(){for(var t=this._groups,i=0,e=t.length;i<e;++i)for(var n=t[i],r=0,a=n.length;r<a;++r){var o=n[r];if(o)return o}return null}function us(){let t=0;for(let i of this)++t;return t}function ds(){return!this.node()}function ms(t){for(var i=this._groups,e=0,n=i.length;e<n;++e)for(var r=i[e],a=0,o=r.length,s;a<o;++a)(s=r[a])&&t.call(s,s.__data__,a,r);return this}function wd(t){return function(){this.removeAttribute(t)}}function kd(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Cd(t,i){return function(){this.setAttribute(t,i)}}function Sd(t,i){return function(){this.setAttributeNS(t.space,t.local,i)}}function Td(t,i){return function(){var e=i.apply(this,arguments);e==null?this.removeAttribute(t):this.setAttribute(t,e)}}function Md(t,i){return function(){var e=i.apply(this,arguments);e==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,e)}}function hs(t,i){var e=Jt(t);if(arguments.length<2){var n=this.node();return e.local?n.getAttributeNS(e.space,e.local):n.getAttribute(e)}return this.each((i==null?e.local?kd:wd:typeof i=="function"?e.local?Md:Td:e.local?Sd:Cd)(e,i))}function zi(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Dd(t){return function(){this.style.removeProperty(t)}}function Id(t,i,e){return function(){this.style.setProperty(t,i,e)}}function Rd(t,i,e){return function(){var n=i.apply(this,arguments);n==null?this.style.removeProperty(t):this.style.setProperty(t,n,e)}}function ps(t,i,e){return arguments.length>1?this.each((i==null?Dd:typeof i=="function"?Rd:Id)(t,i,e??"")):ge(this.node(),t)}function ge(t,i){return t.style.getPropertyValue(i)||zi(t).getComputedStyle(t,null).getPropertyValue(i)}function Ad(t){return function(){delete this[t]}}function Ed(t,i){return function(){this[t]=i}}function Fd(t,i){return function(){var e=i.apply(this,arguments);e==null?delete this[t]:this[t]=e}}function fs(t,i){return arguments.length>1?this.each((i==null?Ad:typeof i=="function"?Fd:Ed)(t,i)):this.node()[t]}function gs(t){return t.trim().split(/^|\s+/)}function Kr(t){return t.classList||new _s(t)}function _s(t){this._node=t,this._names=gs(t.getAttribute("class")||"")}_s.prototype={add:function(t){var i=this._names.indexOf(t);i<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var i=this._names.indexOf(t);i>=0&&(this._names.splice(i,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function bs(t,i){for(var e=Kr(t),n=-1,r=i.length;++n<r;)e.add(i[n])}function vs(t,i){for(var e=Kr(t),n=-1,r=i.length;++n<r;)e.remove(i[n])}function Od(t){return function(){bs(this,t)}}function Bd(t){return function(){vs(this,t)}}function Pd(t,i){return function(){(i.apply(this,arguments)?bs:vs)(this,t)}}function ys(t,i){var e=gs(t+"");if(arguments.length<2){for(var n=Kr(this.node()),r=-1,a=e.length;++r<a;)if(!n.contains(e[r]))return!1;return!0}return this.each((typeof i=="function"?Pd:i?Od:Bd)(e,i))}function Ld(){this.textContent=""}function Nd(t){return function(){this.textContent=t}}function Vd(t){return function(){var i=t.apply(this,arguments);this.textContent=i??""}}function xs(t){return arguments.length?this.each(t==null?Ld:(typeof t=="function"?Vd:Nd)(t)):this.node().textContent}function zd(){this.innerHTML=""}function Hd(t){return function(){this.innerHTML=t}}function Ud(t){return function(){var i=t.apply(this,arguments);this.innerHTML=i??""}}function ws(t){return arguments.length?this.each(t==null?zd:(typeof t=="function"?Ud:Hd)(t)):this.node().innerHTML}function Gd(){this.nextSibling&&this.parentNode.appendChild(this)}function ks(){return this.each(Gd)}function Wd(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Cs(){return this.each(Wd)}function Ss(t){var i=typeof t=="function"?t:un(t);return this.select(function(){return this.appendChild(i.apply(this,arguments))})}function $d(){return null}function Ts(t,i){var e=typeof t=="function"?t:un(t),n=i==null?$d:typeof i=="function"?i:De(i);return this.select(function(){return this.insertBefore(e.apply(this,arguments),n.apply(this,arguments)||null)})}function Yd(){var t=this.parentNode;t&&t.removeChild(this)}function Ms(){return this.each(Yd)}function Xd(){var t=this.cloneNode(!1),i=this.parentNode;return i?i.insertBefore(t,this.nextSibling):t}function Qd(){var t=this.cloneNode(!0),i=this.parentNode;return i?i.insertBefore(t,this.nextSibling):t}function Ds(t){return this.select(t?Qd:Xd)}function Is(t){return arguments.length?this.property("__data__",t):this.node().__data__}function jd(t){return function(i){t.call(this,i,this.__data__)}}function qd(t){return t.trim().split(/^|\s+/).map(function(i){var e="",n=i.indexOf(".");return n>=0&&(e=i.slice(n+1),i=i.slice(0,n)),{type:i,name:e}})}function Zd(t){return function(){var i=this.__on;if(i){for(var e=0,n=-1,r=i.length,a;e<r;++e)a=i[e],(!t.type||a.type===t.type)&&a.name===t.name?this.removeEventListener(a.type,a.listener,a.options):i[++n]=a;++n?i.length=n:delete this.__on}}}function Kd(t,i,e){return function(){var n=this.__on,r,a=jd(i);if(n){for(var o=0,s=n.length;o<s;++o)if((r=n[o]).type===t.type&&r.name===t.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=a,r.options=e),r.value=i;return}}this.addEventListener(t.type,a,e),r={type:t.type,name:t.name,value:i,listener:a,options:e},n?n.push(r):this.__on=[r]}}function Rs(t,i,e){var n=qd(t+""),r,a=n.length,o;if(arguments.length<2){var s=this.node().__on;if(s){for(var l=0,c=s.length,u;l<c;++l)for(r=0,u=s[l];r<a;++r)if((o=n[r]).type===u.type&&o.name===u.name)return u.value}return}for(s=i?Kd:Zd,r=0;r<a;++r)this.each(s(n[r],i,e));return this}function As(t,i,e){var n=zi(t),r=n.CustomEvent;typeof r=="function"?r=new r(i,e):(r=n.document.createEvent("Event"),e?(r.initEvent(i,e.bubbles,e.cancelable),r.detail=e.detail):r.initEvent(i,!1,!1)),t.dispatchEvent(r)}function Jd(t,i){return function(){return As(this,t,i)}}function tm(t,i){return function(){return As(this,t,i.apply(this,arguments))}}function Es(t,i){return this.each((typeof i=="function"?tm:Jd)(t,i))}function*Fs(){for(var t=this._groups,i=0,e=t.length;i<e;++i)for(var n=t[i],r=0,a=n.length,o;r<a;++r)(o=n[r])&&(yield o)}var Jr=[null];function j(t,i){this._groups=t,this._parents=i}function Os(){return new j([[document.documentElement]],Jr)}function em(){return this}j.prototype=Os.prototype={constructor:j,select:Qo,selectAll:jo,selectChild:qo,selectChildren:Zo,filter:Ko,data:es,enter:Jo,exit:ns,join:is,merge:rs,selection:em,order:as,sort:os,call:ss,nodes:ls,node:cs,size:us,empty:ds,each:ms,attr:hs,style:ps,property:fs,classed:ys,text:xs,html:ws,raise:ks,lower:Cs,append:Ss,insert:Ts,remove:Ms,clone:Ds,datum:Is,on:Rs,dispatch:Es,[Symbol.iterator]:Fs};var te=Os;function Bs(t){return typeof t=="string"?new j([[document.querySelector(t)]],[document.documentElement]):new j([[t]],Jr)}function ta(t){return Bs(un(t).call(document.documentElement))}function Ps(t){let i;for(;i=t.sourceEvent;)t=i;return t}function ea(t,i){if(t=Ps(t),i===void 0&&(i=t.currentTarget),i){var e=i.ownerSVGElement||i;if(e.createSVGPoint){var n=e.createSVGPoint();return n.x=t.clientX,n.y=t.clientY,n=n.matrixTransform(i.getScreenCTM().inverse()),[n.x,n.y]}if(i.getBoundingClientRect){var r=i.getBoundingClientRect();return[t.clientX-r.left-i.clientLeft,t.clientY-r.top-i.clientTop]}}return[t.pageX,t.pageY]}function Hi(t,i,e){t.prototype=i.prototype=e,e.constructor=t}function na(t,i){var e=Object.create(t.prototype);for(var n in i)e[n]=i[n];return e}function Un(){}var zn=.7,Wi=1/zn,dn="\\s*([+-]?\\d+)\\s*",Hn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Qt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",nm=/^#([0-9a-f]{3,8})$/,im=new RegExp(`^rgb\\(${dn},${dn},${dn}\\)$`),rm=new RegExp(`^rgb\\(${Qt},${Qt},${Qt}\\)$`),am=new RegExp(`^rgba\\(${dn},${dn},${dn},${Hn}\\)$`),om=new RegExp(`^rgba\\(${Qt},${Qt},${Qt},${Hn}\\)$`),sm=new RegExp(`^hsl\\(${Hn},${Qt},${Qt}\\)$`),lm=new RegExp(`^hsla\\(${Hn},${Qt},${Qt},${Hn}\\)$`),Ls={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Hi(Un,Vt,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Ns,formatHex:Ns,formatHex8:cm,formatHsl:um,formatRgb:Vs,toString:Vs});function Ns(){return this.rgb().formatHex()}function cm(){return this.rgb().formatHex8()}function um(){return $s(this).formatHsl()}function Vs(){return this.rgb().formatRgb()}function Vt(t){var i,e;return t=(t+"").trim().toLowerCase(),(i=nm.exec(t))?(e=i[1].length,i=parseInt(i[1],16),e===6?zs(i):e===3?new kt(i>>8&15|i>>4&240,i>>4&15|i&240,(i&15)<<4|i&15,1):e===8?Ui(i>>24&255,i>>16&255,i>>8&255,(i&255)/255):e===4?Ui(i>>12&15|i>>8&240,i>>8&15|i>>4&240,i>>4&15|i&240,((i&15)<<4|i&15)/255):null):(i=im.exec(t))?new kt(i[1],i[2],i[3],1):(i=rm.exec(t))?new kt(i[1]*255/100,i[2]*255/100,i[3]*255/100,1):(i=am.exec(t))?Ui(i[1],i[2],i[3],i[4]):(i=om.exec(t))?Ui(i[1]*255/100,i[2]*255/100,i[3]*255/100,i[4]):(i=sm.exec(t))?Gs(i[1],i[2]/100,i[3]/100,1):(i=lm.exec(t))?Gs(i[1],i[2]/100,i[3]/100,i[4]):Ls.hasOwnProperty(t)?zs(Ls[t]):t==="transparent"?new kt(NaN,NaN,NaN,0):null}function zs(t){return new kt(t>>16&255,t>>8&255,t&255,1)}function Ui(t,i,e,n){return n<=0&&(t=i=e=NaN),new kt(t,i,e,n)}function dm(t){return t instanceof Un||(t=Vt(t)),t?(t=t.rgb(),new kt(t.r,t.g,t.b,t.opacity)):new kt}function mn(t,i,e,n){return arguments.length===1?dm(t):new kt(t,i,e,n??1)}function kt(t,i,e,n){this.r=+t,this.g=+i,this.b=+e,this.opacity=+n}Hi(kt,mn,na(Un,{brighter(t){return t=t==null?Wi:Math.pow(Wi,t),new kt(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?zn:Math.pow(zn,t),new kt(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new kt(Re(this.r),Re(this.g),Re(this.b),$i(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Hs,formatHex:Hs,formatHex8:mm,formatRgb:Us,toString:Us}));function Hs(){return`#${Ie(this.r)}${Ie(this.g)}${Ie(this.b)}`}function mm(){return`#${Ie(this.r)}${Ie(this.g)}${Ie(this.b)}${Ie((isNaN(this.opacity)?1:this.opacity)*255)}`}function Us(){let t=$i(this.opacity);return`${t===1?"rgb(":"rgba("}${Re(this.r)}, ${Re(this.g)}, ${Re(this.b)}${t===1?")":`, ${t})`}`}function $i(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Re(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Ie(t){return t=Re(t),(t<16?"0":"")+t.toString(16)}function Gs(t,i,e,n){return n<=0?t=i=e=NaN:e<=0||e>=1?t=i=NaN:i<=0&&(t=NaN),new Nt(t,i,e,n)}function $s(t){if(t instanceof Nt)return new Nt(t.h,t.s,t.l,t.opacity);if(t instanceof Un||(t=Vt(t)),!t)return new Nt;if(t instanceof Nt)return t;t=t.rgb();var i=t.r/255,e=t.g/255,n=t.b/255,r=Math.min(i,e,n),a=Math.max(i,e,n),o=NaN,s=a-r,l=(a+r)/2;return s?(i===a?o=(e-n)/s+(e<n)*6:e===a?o=(n-i)/s+2:o=(i-e)/s+4,s/=l<.5?a+r:2-a-r,o*=60):s=l>0&&l<1?0:o,new Nt(o,s,l,t.opacity)}function Ys(t,i,e,n){return arguments.length===1?$s(t):new Nt(t,i,e,n??1)}function Nt(t,i,e,n){this.h=+t,this.s=+i,this.l=+e,this.opacity=+n}Hi(Nt,Ys,na(Un,{brighter(t){return t=t==null?Wi:Math.pow(Wi,t),new Nt(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?zn:Math.pow(zn,t),new Nt(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,i=isNaN(t)||isNaN(this.s)?0:this.s,e=this.l,n=e+(e<.5?e:1-e)*i,r=2*e-n;return new kt(ia(t>=240?t-240:t+120,r,n),ia(t,r,n),ia(t<120?t+240:t-120,r,n),this.opacity)},clamp(){return new Nt(Ws(this.h),Gi(this.s),Gi(this.l),$i(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){let t=$i(this.opacity);return`${t===1?"hsl(":"hsla("}${Ws(this.h)}, ${Gi(this.s)*100}%, ${Gi(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Ws(t){return t=(t||0)%360,t<0?t+360:t}function Gi(t){return Math.max(0,Math.min(1,t||0))}function ia(t,i,e){return(t<60?i+(e-i)*t/60:t<180?e:t<240?i+(e-i)*(240-t)/60:i)*255}function ra(t,i,e,n,r){var a=t*t,o=a*t;return((1-3*t+3*a-o)*i+(4-6*a+3*o)*e+(1+3*t+3*a-3*o)*n+o*r)/6}function Xs(t){var i=t.length-1;return function(e){var n=e<=0?e=0:e>=1?(e=1,i-1):Math.floor(e*i),r=t[n],a=t[n+1],o=n>0?t[n-1]:2*r-a,s=n<i-1?t[n+2]:2*a-r;return ra((e-n/i)*i,o,r,a,s)}}function Qs(t){var i=t.length;return function(e){var n=Math.floor(((e%=1)<0?++e:e)*i),r=t[(n+i-1)%i],a=t[n%i],o=t[(n+1)%i],s=t[(n+2)%i];return ra((e-n/i)*i,r,a,o,s)}}var Gn=t=>()=>t;function hm(t,i){return function(e){return t+e*i}}function pm(t,i,e){return t=Math.pow(t,e),i=Math.pow(i,e)-t,e=1/e,function(n){return Math.pow(t+n*i,e)}}function js(t){return(t=+t)==1?Yi:function(i,e){return e-i?pm(i,e,t):Gn(isNaN(i)?e:i)}}function Yi(t,i){var e=i-t;return e?hm(t,e):Gn(isNaN(t)?i:t)}var Ae=function t(i){var e=js(i);function n(r,a){var o=e((r=mn(r)).r,(a=mn(a)).r),s=e(r.g,a.g),l=e(r.b,a.b),c=Yi(r.opacity,a.opacity);return function(u){return r.r=o(u),r.g=s(u),r.b=l(u),r.opacity=c(u),r+""}}return n.gamma=t,n}(1);function qs(t){return function(i){var e=i.length,n=new Array(e),r=new Array(e),a=new Array(e),o,s;for(o=0;o<e;++o)s=mn(i[o]),n[o]=s.r||0,r[o]=s.g||0,a[o]=s.b||0;return n=t(n),r=t(r),a=t(a),s.opacity=1,function(l){return s.r=n(l),s.g=r(l),s.b=a(l),s+""}}}var fm=qs(Xs),gm=qs(Qs);function Zs(t,i){i||(i=[]);var e=t?Math.min(i.length,t.length):0,n=i.slice(),r;return function(a){for(r=0;r<e;++r)n[r]=t[r]*(1-a)+i[r]*a;return n}}function Ks(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Js(t,i){var e=i?i.length:0,n=t?Math.min(e,t.length):0,r=new Array(n),a=new Array(e),o;for(o=0;o<n;++o)r[o]=Ee(t[o],i[o]);for(;o<e;++o)a[o]=i[o];return function(s){for(o=0;o<n;++o)a[o]=r[o](s);return a}}function tl(t,i){var e=new Date;return t=+t,i=+i,function(n){return e.setTime(t*(1-n)+i*n),e}}function ut(t,i){return t=+t,i=+i,function(e){return t*(1-e)+i*e}}function el(t,i){var e={},n={},r;(t===null||typeof t!="object")&&(t={}),(i===null||typeof i!="object")&&(i={});for(r in i)r in t?e[r]=Ee(t[r],i[r]):n[r]=i[r];return function(a){for(r in e)n[r]=e[r](a);return n}}var oa=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,aa=new RegExp(oa.source,"g");function _m(t){return function(){return t}}function bm(t){return function(i){return t(i)+""}}function Wn(t,i){var e=oa.lastIndex=aa.lastIndex=0,n,r,a,o=-1,s=[],l=[];for(t=t+"",i=i+"";(n=oa.exec(t))&&(r=aa.exec(i));)(a=r.index)>e&&(a=i.slice(e,a),s[o]?s[o]+=a:s[++o]=a),(n=n[0])===(r=r[0])?s[o]?s[o]+=r:s[++o]=r:(s[++o]=null,l.push({i:o,x:ut(n,r)})),e=aa.lastIndex;return e<i.length&&(a=i.slice(e),s[o]?s[o]+=a:s[++o]=a),s.length<2?l[0]?bm(l[0].x):_m(i):(i=l.length,function(c){for(var u=0,d;u<i;++u)s[(d=l[u]).i]=d.x(c);return s.join("")})}function Ee(t,i){var e=typeof i,n;return i==null||e==="boolean"?Gn(i):(e==="number"?ut:e==="string"?(n=Vt(i))?(i=n,Ae):Wn:i instanceof Vt?Ae:i instanceof Date?tl:Ks(i)?Zs:Array.isArray(i)?Js:typeof i.valueOf!="function"&&typeof i.toString!="function"||isNaN(i)?el:ut)(t,i)}function sa(t,i){return t=+t,i=+i,function(e){return Math.round(t*(1-e)+i*e)}}var nl=180/Math.PI,Xi={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function la(t,i,e,n,r,a){var o,s,l;return(o=Math.sqrt(t*t+i*i))&&(t/=o,i/=o),(l=t*e+i*n)&&(e-=t*l,n-=i*l),(s=Math.sqrt(e*e+n*n))&&(e/=s,n/=s,l/=s),t*n<i*e&&(t=-t,i=-i,l=-l,o=-o),{translateX:r,translateY:a,rotate:Math.atan2(i,t)*nl,skewX:Math.atan(l)*nl,scaleX:o,scaleY:s}}var Qi;function il(t){let i=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return i.isIdentity?Xi:la(i.a,i.b,i.c,i.d,i.e,i.f)}function rl(t){return t==null?Xi:(Qi||(Qi=document.createElementNS("http://www.w3.org/2000/svg","g")),Qi.setAttribute("transform",t),(t=Qi.transform.baseVal.consolidate())?(t=t.matrix,la(t.a,t.b,t.c,t.d,t.e,t.f)):Xi)}function al(t,i,e,n){function r(c){return c.length?c.pop()+" ":""}function a(c,u,d,m,h,p){if(c!==d||u!==m){var S=h.push("translate(",null,i,null,e);p.push({i:S-4,x:ut(c,d)},{i:S-2,x:ut(u,m)})}else(d||m)&&h.push("translate("+d+i+m+e)}function o(c,u,d,m){c!==u?(c-u>180?u+=360:u-c>180&&(c+=360),m.push({i:d.push(r(d)+"rotate(",null,n)-2,x:ut(c,u)})):u&&d.push(r(d)+"rotate("+u+n)}function s(c,u,d,m){c!==u?m.push({i:d.push(r(d)+"skewX(",null,n)-2,x:ut(c,u)}):u&&d.push(r(d)+"skewX("+u+n)}function l(c,u,d,m,h,p){if(c!==d||u!==m){var S=h.push(r(h)+"scale(",null,",",null,")");p.push({i:S-4,x:ut(c,d)},{i:S-2,x:ut(u,m)})}else(d!==1||m!==1)&&h.push(r(h)+"scale("+d+","+m+")")}return function(c,u){var d=[],m=[];return c=t(c),u=t(u),a(c.translateX,c.translateY,u.translateX,u.translateY,d,m),o(c.rotate,u.rotate,d,m),s(c.skewX,u.skewX,d,m),l(c.scaleX,c.scaleY,u.scaleX,u.scaleY,d,m),c=u=null,function(h){for(var p=-1,S=m.length,H;++p<S;)d[(H=m[p]).i]=H.x(h);return d.join("")}}}var ca=al(il,"px, ","px)","deg)"),ua=al(rl,", ",")",")");var hn=0,Yn=0,$n=0,sl=1e3,ji,Xn,qi=0,Fe=0,Zi=0,Qn=typeof performance=="object"&&performance.now?performance:Date,ll=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function qn(){return Fe||(ll(vm),Fe=Qn.now()+Zi)}function vm(){Fe=0}function jn(){this._call=this._time=this._next=null}jn.prototype=Ki.prototype={constructor:jn,restart:function(t,i,e){if(typeof t!="function")throw new TypeError("callback is not a function");e=(e==null?qn():+e)+(i==null?0:+i),!this._next&&Xn!==this&&(Xn?Xn._next=this:ji=this,Xn=this),this._call=t,this._time=e,da()},stop:function(){this._call&&(this._call=null,this._time=1/0,da())}};function Ki(t,i,e){var n=new jn;return n.restart(t,i,e),n}function cl(){qn(),++hn;for(var t=ji,i;t;)(i=Fe-t._time)>=0&&t._call.call(void 0,i),t=t._next;--hn}function ol(){Fe=(qi=Qn.now())+Zi,hn=Yn=0;try{cl()}finally{hn=0,xm(),Fe=0}}function ym(){var t=Qn.now(),i=t-qi;i>sl&&(Zi-=i,qi=t)}function xm(){for(var t,i=ji,e,n=1/0;i;)i._call?(n>i._time&&(n=i._time),t=i,i=i._next):(e=i._next,i._next=null,i=t?t._next=e:ji=e);Xn=t,da(n)}function da(t){if(!hn){Yn&&(Yn=clearTimeout(Yn));var i=t-Fe;i>24?(t<1/0&&(Yn=setTimeout(ol,t-Qn.now()-Zi)),$n&&($n=clearInterval($n))):($n||(qi=Qn.now(),$n=setInterval(ym,sl)),hn=1,ll(ol))}}function Ji(t,i,e){var n=new jn;return i=i==null?0:+i,n.restart(r=>{n.stop(),t(r+i)},i,e),n}var wm=jr("start","end","cancel","interrupt"),km=[],ml=0,ul=1,er=2,tr=3,dl=4,nr=5,Zn=6;function _e(t,i,e,n,r,a){var o=t.__transition;if(!o)t.__transition={};else if(e in o)return;Cm(t,e,{name:i,index:n,group:r,on:wm,tween:km,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:ml})}function Kn(t,i){var e=nt(t,i);if(e.state>ml)throw new Error("too late; already scheduled");return e}function dt(t,i){var e=nt(t,i);if(e.state>tr)throw new Error("too late; already running");return e}function nt(t,i){var e=t.__transition;if(!e||!(e=e[i]))throw new Error("transition not found");return e}function Cm(t,i,e){var n=t.__transition,r;n[i]=e,e.timer=Ki(a,0,e.time);function a(c){e.state=ul,e.timer.restart(o,e.delay,e.time),e.delay<=c&&o(c-e.delay)}function o(c){var u,d,m,h;if(e.state!==ul)return l();for(u in n)if(h=n[u],h.name===e.name){if(h.state===tr)return Ji(o);h.state===dl?(h.state=Zn,h.timer.stop(),h.on.call("interrupt",t,t.__data__,h.index,h.group),delete n[u]):+u<i&&(h.state=Zn,h.timer.stop(),h.on.call("cancel",t,t.__data__,h.index,h.group),delete n[u])}if(Ji(function(){e.state===tr&&(e.state=dl,e.timer.restart(s,e.delay,e.time),s(c))}),e.state=er,e.on.call("start",t,t.__data__,e.index,e.group),e.state===er){for(e.state=tr,r=new Array(m=e.tween.length),u=0,d=-1;u<m;++u)(h=e.tween[u].value.call(t,t.__data__,e.index,e.group))&&(r[++d]=h);r.length=d+1}}function s(c){for(var u=c<e.duration?e.ease.call(null,c/e.duration):(e.timer.restart(l),e.state=nr,1),d=-1,m=r.length;++d<m;)r[d].call(t,u);e.state===nr&&(e.on.call("end",t,t.__data__,e.index,e.group),l())}function l(){e.state=Zn,e.timer.stop(),delete n[i];for(var c in n)return;delete t.__transition}}function ir(t,i){var e=t.__transition,n,r,a=!0,o;if(e){i=i==null?null:i+"";for(o in e){if((n=e[o]).name!==i){a=!1;continue}r=n.state>er&&n.state<nr,n.state=Zn,n.timer.stop(),n.on.call(r?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete e[o]}a&&delete t.__transition}}function hl(t){return this.each(function(){ir(this,t)})}function Sm(t,i){var e,n;return function(){var r=dt(this,t),a=r.tween;if(a!==e){n=e=a;for(var o=0,s=n.length;o<s;++o)if(n[o].name===i){n=n.slice(),n.splice(o,1);break}}r.tween=n}}function Tm(t,i,e){var n,r;if(typeof e!="function")throw new Error;return function(){var a=dt(this,t),o=a.tween;if(o!==n){r=(n=o).slice();for(var s={name:i,value:e},l=0,c=r.length;l<c;++l)if(r[l].name===i){r[l]=s;break}l===c&&r.push(s)}a.tween=r}}function pl(t,i){var e=this._id;if(t+="",arguments.length<2){for(var n=nt(this.node(),e).tween,r=0,a=n.length,o;r<a;++r)if((o=n[r]).name===t)return o.value;return null}return this.each((i==null?Sm:Tm)(e,t,i))}function pn(t,i,e){var n=t._id;return t.each(function(){var r=dt(this,n);(r.value||(r.value={}))[i]=e.apply(this,arguments)}),function(r){return nt(r,n).value[i]}}function rr(t,i){var e;return(typeof i=="number"?ut:i instanceof Vt?Ae:(e=Vt(i))?(i=e,Ae):Wn)(t,i)}function Mm(t){return function(){this.removeAttribute(t)}}function Dm(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Im(t,i,e){var n,r=e+"",a;return function(){var o=this.getAttribute(t);return o===r?null:o===n?a:a=i(n=o,e)}}function Rm(t,i,e){var n,r=e+"",a;return function(){var o=this.getAttributeNS(t.space,t.local);return o===r?null:o===n?a:a=i(n=o,e)}}function Am(t,i,e){var n,r,a;return function(){var o,s=e(this),l;return s==null?void this.removeAttribute(t):(o=this.getAttribute(t),l=s+"",o===l?null:o===n&&l===r?a:(r=l,a=i(n=o,s)))}}function Em(t,i,e){var n,r,a;return function(){var o,s=e(this),l;return s==null?void this.removeAttributeNS(t.space,t.local):(o=this.getAttributeNS(t.space,t.local),l=s+"",o===l?null:o===n&&l===r?a:(r=l,a=i(n=o,s)))}}function fl(t,i){var e=Jt(t),n=e==="transform"?ua:rr;return this.attrTween(t,typeof i=="function"?(e.local?Em:Am)(e,n,pn(this,"attr."+t,i)):i==null?(e.local?Dm:Mm)(e):(e.local?Rm:Im)(e,n,i))}function Fm(t,i){return function(e){this.setAttribute(t,i.call(this,e))}}function Om(t,i){return function(e){this.setAttributeNS(t.space,t.local,i.call(this,e))}}function Bm(t,i){var e,n;function r(){var a=i.apply(this,arguments);return a!==n&&(e=(n=a)&&Om(t,a)),e}return r._value=i,r}function Pm(t,i){var e,n;function r(){var a=i.apply(this,arguments);return a!==n&&(e=(n=a)&&Fm(t,a)),e}return r._value=i,r}function gl(t,i){var e="attr."+t;if(arguments.length<2)return(e=this.tween(e))&&e._value;if(i==null)return this.tween(e,null);if(typeof i!="function")throw new Error;var n=Jt(t);return this.tween(e,(n.local?Bm:Pm)(n,i))}function Lm(t,i){return function(){Kn(this,t).delay=+i.apply(this,arguments)}}function Nm(t,i){return i=+i,function(){Kn(this,t).delay=i}}function _l(t){var i=this._id;return arguments.length?this.each((typeof t=="function"?Lm:Nm)(i,t)):nt(this.node(),i).delay}function Vm(t,i){return function(){dt(this,t).duration=+i.apply(this,arguments)}}function zm(t,i){return i=+i,function(){dt(this,t).duration=i}}function bl(t){var i=this._id;return arguments.length?this.each((typeof t=="function"?Vm:zm)(i,t)):nt(this.node(),i).duration}function Hm(t,i){if(typeof i!="function")throw new Error;return function(){dt(this,t).ease=i}}function vl(t){var i=this._id;return arguments.length?this.each(Hm(i,t)):nt(this.node(),i).ease}function Um(t,i){return function(){var e=i.apply(this,arguments);if(typeof e!="function")throw new Error;dt(this,t).ease=e}}function yl(t){if(typeof t!="function")throw new Error;return this.each(Um(this._id,t))}function xl(t){typeof t!="function"&&(t=Nn(t));for(var i=this._groups,e=i.length,n=new Array(e),r=0;r<e;++r)for(var a=i[r],o=a.length,s=n[r]=[],l,c=0;c<o;++c)(l=a[c])&&t.call(l,l.__data__,c,a)&&s.push(l);return new gt(n,this._parents,this._name,this._id)}function wl(t){if(t._id!==this._id)throw new Error;for(var i=this._groups,e=t._groups,n=i.length,r=e.length,a=Math.min(n,r),o=new Array(n),s=0;s<a;++s)for(var l=i[s],c=e[s],u=l.length,d=o[s]=new Array(u),m,h=0;h<u;++h)(m=l[h]||c[h])&&(d[h]=m);for(;s<n;++s)o[s]=i[s];return new gt(o,this._parents,this._name,this._id)}function Gm(t){return(t+"").trim().split(/^|\s+/).every(function(i){var e=i.indexOf(".");return e>=0&&(i=i.slice(0,e)),!i||i==="start"})}function Wm(t,i,e){var n,r,a=Gm(i)?Kn:dt;return function(){var o=a(this,t),s=o.on;s!==n&&(r=(n=s).copy()).on(i,e),o.on=r}}function kl(t,i){var e=this._id;return arguments.length<2?nt(this.node(),e).on.on(t):this.each(Wm(e,t,i))}function $m(t){return function(){var i=this.parentNode;for(var e in this.__transition)if(+e!==t)return;i&&i.removeChild(this)}}function Cl(){return this.on("end.remove",$m(this._id))}function Sl(t){var i=this._name,e=this._id;typeof t!="function"&&(t=De(t));for(var n=this._groups,r=n.length,a=new Array(r),o=0;o<r;++o)for(var s=n[o],l=s.length,c=a[o]=new Array(l),u,d,m=0;m<l;++m)(u=s[m])&&(d=t.call(u,u.__data__,m,s))&&("__data__"in u&&(d.__data__=u.__data__),c[m]=d,_e(c[m],i,e,m,c,nt(u,e)));return new gt(a,this._parents,i,e)}function Tl(t){var i=this._name,e=this._id;typeof t!="function"&&(t=Ln(t));for(var n=this._groups,r=n.length,a=[],o=[],s=0;s<r;++s)for(var l=n[s],c=l.length,u,d=0;d<c;++d)if(u=l[d]){for(var m=t.call(u,u.__data__,d,l),h,p=nt(u,e),S=0,H=m.length;S<H;++S)(h=m[S])&&_e(h,i,e,S,m,p);a.push(m),o.push(u)}return new gt(a,o,i,e)}var Ym=te.prototype.constructor;function Ml(){return new Ym(this._groups,this._parents)}function Xm(t,i){var e,n,r;return function(){var a=ge(this,t),o=(this.style.removeProperty(t),ge(this,t));return a===o?null:a===e&&o===n?r:r=i(e=a,n=o)}}function Dl(t){return function(){this.style.removeProperty(t)}}function Qm(t,i,e){var n,r=e+"",a;return function(){var o=ge(this,t);return o===r?null:o===n?a:a=i(n=o,e)}}function jm(t,i,e){var n,r,a;return function(){var o=ge(this,t),s=e(this),l=s+"";return s==null&&(l=s=(this.style.removeProperty(t),ge(this,t))),o===l?null:o===n&&l===r?a:(r=l,a=i(n=o,s))}}function qm(t,i){var e,n,r,a="style."+i,o="end."+a,s;return function(){var l=dt(this,t),c=l.on,u=l.value[a]==null?s||(s=Dl(i)):void 0;(c!==e||r!==u)&&(n=(e=c).copy()).on(o,r=u),l.on=n}}function Il(t,i,e){var n=(t+="")=="transform"?ca:rr;return i==null?this.styleTween(t,Xm(t,n)).on("end.style."+t,Dl(t)):typeof i=="function"?this.styleTween(t,jm(t,n,pn(this,"style."+t,i))).each(qm(this._id,t)):this.styleTween(t,Qm(t,n,i),e).on("end.style."+t,null)}function Zm(t,i,e){return function(n){this.style.setProperty(t,i.call(this,n),e)}}function Km(t,i,e){var n,r;function a(){var o=i.apply(this,arguments);return o!==r&&(n=(r=o)&&Zm(t,o,e)),n}return a._value=i,a}function Rl(t,i,e){var n="style."+(t+="");if(arguments.length<2)return(n=this.tween(n))&&n._value;if(i==null)return this.tween(n,null);if(typeof i!="function")throw new Error;return this.tween(n,Km(t,i,e??""))}function Jm(t){return function(){this.textContent=t}}function th(t){return function(){var i=t(this);this.textContent=i??""}}function Al(t){return this.tween("text",typeof t=="function"?th(pn(this,"text",t)):Jm(t==null?"":t+""))}function eh(t){return function(i){this.textContent=t.call(this,i)}}function nh(t){var i,e;function n(){var r=t.apply(this,arguments);return r!==e&&(i=(e=r)&&eh(r)),i}return n._value=t,n}function El(t){var i="text";if(arguments.length<1)return(i=this.tween(i))&&i._value;if(t==null)return this.tween(i,null);if(typeof t!="function")throw new Error;return this.tween(i,nh(t))}function Fl(){for(var t=this._name,i=this._id,e=ar(),n=this._groups,r=n.length,a=0;a<r;++a)for(var o=n[a],s=o.length,l,c=0;c<s;++c)if(l=o[c]){var u=nt(l,i);_e(l,t,e,c,o,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new gt(n,this._parents,t,e)}function Ol(){var t,i,e=this,n=e._id,r=e.size();return new Promise(function(a,o){var s={value:o},l={value:function(){--r===0&&a()}};e.each(function(){var c=dt(this,n),u=c.on;u!==t&&(i=(t=u).copy(),i._.cancel.push(s),i._.interrupt.push(s),i._.end.push(l)),c.on=i}),r===0&&a()})}var ih=0;function gt(t,i,e,n){this._groups=t,this._parents=i,this._name=e,this._id=n}function Bl(t){return te().transition(t)}function ar(){return++ih}var ee=te.prototype;gt.prototype=Bl.prototype={constructor:gt,select:Sl,selectAll:Tl,selectChild:ee.selectChild,selectChildren:ee.selectChildren,filter:xl,merge:wl,selection:Ml,transition:Fl,call:ee.call,nodes:ee.nodes,node:ee.node,size:ee.size,empty:ee.empty,each:ee.each,on:kl,attr:fl,attrTween:gl,style:Il,styleTween:Rl,text:Al,textTween:El,remove:Cl,tween:pl,delay:_l,duration:bl,ease:vl,easeVarying:yl,end:Ol,[Symbol.iterator]:ee[Symbol.iterator]};function or(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var rh={time:null,delay:0,duration:250,ease:or};function ah(t,i){for(var e;!(e=t.__transition)||!(e=e[i]);)if(!(t=t.parentNode))throw new Error(`transition ${i} not found`);return e}function Pl(t){var i,e;t instanceof gt?(i=t._id,t=t._name):(i=ar(),(e=rh).time=qn(),t=t==null?null:t+"");for(var n=this._groups,r=n.length,a=0;a<r;++a)for(var o=n[a],s=o.length,l,c=0;c<s;++c)(l=o[c])&&_e(l,t,i,c,o,e||ah(l,i));return new gt(n,this._parents,t,i)}te.prototype.interrupt=hl;te.prototype.transition=Pl;var{abs:Qw,max:jw,min:qw}=Math;function Ll(t){return[+t[0],+t[1]]}function oh(t){return[Ll(t[0]),Ll(t[1])]}var Zw={name:"x",handles:["w","e"].map(ma),input:function(t,i){return t==null?null:[[+t[0],i[0][1]],[+t[1],i[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},Kw={name:"y",handles:["n","s"].map(ma),input:function(t,i){return t==null?null:[[i[0][0],+t[0]],[i[1][0],+t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},Jw={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(ma),input:function(t){return t==null?null:oh(t)},output:function(t){return t}};function ma(t){return{type:t}}var ha=Math.PI,pa=2*ha,Oe=1e-6,sh=pa-Oe;function Nl(t){this._+=t[0];for(let i=1,e=t.length;i<e;++i)this._+=arguments[i]+t[i]}function lh(t){let i=Math.floor(t);if(!(i>=0))throw new Error(`invalid digits: ${t}`);if(i>15)return Nl;let e=10**i;return function(n){this._+=n[0];for(let r=1,a=n.length;r<a;++r)this._+=Math.round(arguments[r]*e)/e+n[r]}}var Be=class{constructor(i){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=i==null?Nl:lh(i)}moveTo(i,e){this._append`M${this._x0=this._x1=+i},${this._y0=this._y1=+e}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(i,e){this._append`L${this._x1=+i},${this._y1=+e}`}quadraticCurveTo(i,e,n,r){this._append`Q${+i},${+e},${this._x1=+n},${this._y1=+r}`}bezierCurveTo(i,e,n,r,a,o){this._append`C${+i},${+e},${+n},${+r},${this._x1=+a},${this._y1=+o}`}arcTo(i,e,n,r,a){if(i=+i,e=+e,n=+n,r=+r,a=+a,a<0)throw new Error(`negative radius: ${a}`);let o=this._x1,s=this._y1,l=n-i,c=r-e,u=o-i,d=s-e,m=u*u+d*d;if(this._x1===null)this._append`M${this._x1=i},${this._y1=e}`;else if(m>Oe)if(!(Math.abs(d*l-c*u)>Oe)||!a)this._append`L${this._x1=i},${this._y1=e}`;else{let h=n-o,p=r-s,S=l*l+c*c,H=h*h+p*p,it=Math.sqrt(S),tt=Math.sqrt(m),N=a*Math.tan((ha-Math.acos((S+m-H)/(2*it*tt)))/2),Y=N/tt,U=N/it;Math.abs(Y-1)>Oe&&this._append`L${i+Y*u},${e+Y*d}`,this._append`A${a},${a},0,0,${+(d*h>u*p)},${this._x1=i+U*l},${this._y1=e+U*c}`}}arc(i,e,n,r,a,o){if(i=+i,e=+e,n=+n,o=!!o,n<0)throw new Error(`negative radius: ${n}`);let s=n*Math.cos(r),l=n*Math.sin(r),c=i+s,u=e+l,d=1^o,m=o?r-a:a-r;this._x1===null?this._append`M${c},${u}`:(Math.abs(this._x1-c)>Oe||Math.abs(this._y1-u)>Oe)&&this._append`L${c},${u}`,n&&(m<0&&(m=m%pa+pa),m>sh?this._append`A${n},${n},0,1,${d},${i-s},${e-l}A${n},${n},0,1,${d},${this._x1=c},${this._y1=u}`:m>Oe&&this._append`A${n},${n},0,${+(m>=ha)},${d},${this._x1=i+n*Math.cos(a)},${this._y1=e+n*Math.sin(a)}`)}rect(i,e,n,r){this._append`M${this._x0=this._x1=+i},${this._y0=this._y1=+e}h${n=+n}v${+r}h${-n}Z`}toString(){return this._}};function Vl(){return new Be}Vl.prototype=Be.prototype;function zl(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Pe(t,i){if((e=(t=i?t.toExponential(i-1):t.toExponential()).indexOf("e"))<0)return null;var e,n=t.slice(0,e);return[n.length>1?n[0]+n.slice(2):n,+t.slice(e+1)]}function jt(t){return t=Pe(Math.abs(t)),t?t[1]:NaN}function Hl(t,i){return function(e,n){for(var r=e.length,a=[],o=0,s=t[0],l=0;r>0&&s>0&&(l+s+1>n&&(s=Math.max(1,n-l)),a.push(e.substring(r-=s,r+s)),!((l+=s+1)>n));)s=t[o=(o+1)%t.length];return a.reverse().join(i)}}function Ul(t){return function(i){return i.replace(/[0-9]/g,function(e){return t[+e]})}}var ch=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function be(t){if(!(i=ch.exec(t)))throw new Error("invalid format: "+t);var i;return new sr({fill:i[1],align:i[2],sign:i[3],symbol:i[4],zero:i[5],width:i[6],comma:i[7],precision:i[8]&&i[8].slice(1),trim:i[9],type:i[10]})}be.prototype=sr.prototype;function sr(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}sr.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Gl(t){t:for(var i=t.length,e=1,n=-1,r;e<i;++e)switch(t[e]){case".":n=r=e;break;case"0":n===0&&(n=e),r=e;break;default:if(!+t[e])break t;n>0&&(n=0);break}return n>0?t.slice(0,n)+t.slice(r+1):t}var fa;function Wl(t,i){var e=Pe(t,i);if(!e)return t+"";var n=e[0],r=e[1],a=r-(fa=Math.max(-8,Math.min(8,Math.floor(r/3)))*3)+1,o=n.length;return a===o?n:a>o?n+new Array(a-o+1).join("0"):a>0?n.slice(0,a)+"."+n.slice(a):"0."+new Array(1-a).join("0")+Pe(t,Math.max(0,i+a-1))[0]}function ga(t,i){var e=Pe(t,i);if(!e)return t+"";var n=e[0],r=e[1];return r<0?"0."+new Array(-r).join("0")+n:n.length>r+1?n.slice(0,r+1)+"."+n.slice(r+1):n+new Array(r-n.length+2).join("0")}var _a={"%":(t,i)=>(t*100).toFixed(i),b:t=>Math.round(t).toString(2),c:t=>t+"",d:zl,e:(t,i)=>t.toExponential(i),f:(t,i)=>t.toFixed(i),g:(t,i)=>t.toPrecision(i),o:t=>Math.round(t).toString(8),p:(t,i)=>ga(t*100,i),r:ga,s:Wl,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function ba(t){return t}var $l=Array.prototype.map,Yl=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function Xl(t){var i=t.grouping===void 0||t.thousands===void 0?ba:Hl($l.call(t.grouping,Number),t.thousands+""),e=t.currency===void 0?"":t.currency[0]+"",n=t.currency===void 0?"":t.currency[1]+"",r=t.decimal===void 0?".":t.decimal+"",a=t.numerals===void 0?ba:Ul($l.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",s=t.minus===void 0?"\u2212":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function c(d){d=be(d);var m=d.fill,h=d.align,p=d.sign,S=d.symbol,H=d.zero,it=d.width,tt=d.comma,N=d.precision,Y=d.trim,U=d.type;U==="n"?(tt=!0,U="g"):_a[U]||(N===void 0&&(N=12),Y=!0,U="g"),(H||m==="0"&&h==="=")&&(H=!0,m="0",h="=");var ot=S==="$"?e:S==="#"&&/[boxX]/.test(U)?"0"+U.toLowerCase():"",_t=S==="$"?n:/[%p]/.test(U)?o:"",Ot=_a[U],ae=/[defgprs%]/.test(U);N=N===void 0?6:/[gprs]/.test(U)?Math.max(1,Math.min(21,N)):Math.max(0,Math.min(20,N));function zt(T){var rt=ot,et=_t,oe,ci,He;if(U==="c")et=Ot(T)+et,T="";else{T=+T;var Ue=T<0||1/T<0;if(T=isNaN(T)?l:Ot(Math.abs(T),N),Y&&(T=Gl(T)),Ue&&+T==0&&p!=="+"&&(Ue=!1),rt=(Ue?p==="("?p:s:p==="-"||p==="("?"":p)+rt,et=(U==="s"?Yl[8+fa/3]:"")+et+(Ue&&p==="("?")":""),ae){for(oe=-1,ci=T.length;++oe<ci;)if(He=T.charCodeAt(oe),48>He||He>57){et=(He===46?r+T.slice(oe+1):T.slice(oe))+et,T=T.slice(0,oe);break}}}tt&&!H&&(T=i(T,1/0));var Ge=rt.length+T.length+et.length,Bt=Ge<it?new Array(it-Ge+1).join(m):"";switch(tt&&H&&(T=i(Bt+T,Bt.length?it-et.length:1/0),Bt=""),h){case"<":T=rt+T+et+Bt;break;case"=":T=rt+Bt+T+et;break;case"^":T=Bt.slice(0,Ge=Bt.length>>1)+rt+T+et+Bt.slice(Ge);break;default:T=Bt+rt+T+et;break}return a(T)}return zt.toString=function(){return d+""},zt}function u(d,m){var h=c((d=be(d),d.type="f",d)),p=Math.max(-8,Math.min(8,Math.floor(jt(m)/3)))*3,S=Math.pow(10,-p),H=Yl[8+p/3];return function(it){return h(S*it)+H}}return{format:c,formatPrefix:u}}var lr,cr,ur;va({thousands:",",grouping:[3],currency:["$",""]});function va(t){return lr=Xl(t),cr=lr.format,ur=lr.formatPrefix,lr}function ya(t){return Math.max(0,-jt(Math.abs(t)))}function xa(t,i){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(jt(i)/3)))*3-jt(Math.abs(t)))}function wa(t,i){return t=Math.abs(t),i=Math.abs(i)-t,Math.max(0,jt(i)-jt(t))+1}function fn(t,i){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(i).domain(t);break}return this}var Ql=Symbol("implicit");function dr(){var t=new cn,i=[],e=[],n=Ql;function r(a){let o=t.get(a);if(o===void 0){if(n!==Ql)return n;t.set(a,o=i.push(a)-1)}return e[o%e.length]}return r.domain=function(a){if(!arguments.length)return i.slice();i=[],t=new cn;for(let o of a)t.has(o)||t.set(o,i.push(o)-1);return r},r.range=function(a){return arguments.length?(e=Array.from(a),r):e.slice()},r.unknown=function(a){return arguments.length?(n=a,r):n},r.copy=function(){return dr(i,e).unknown(n)},fn.apply(r,arguments),r}function Jn(){var t=dr().unknown(void 0),i=t.domain,e=t.range,n=0,r=1,a,o,s=!1,l=0,c=0,u=.5;delete t.unknown;function d(){var m=i().length,h=r<n,p=h?r:n,S=h?n:r;a=(S-p)/Math.max(1,m-l+c*2),s&&(a=Math.floor(a)),p+=(S-p-a*(m-l))*u,o=a*(1-l),s&&(p=Math.round(p),o=Math.round(o));var H=Oi(m).map(function(it){return p+a*it});return e(h?H.reverse():H)}return t.domain=function(m){return arguments.length?(i(m),d()):i()},t.range=function(m){return arguments.length?([n,r]=m,n=+n,r=+r,d()):[n,r]},t.rangeRound=function(m){return[n,r]=m,n=+n,r=+r,s=!0,d()},t.bandwidth=function(){return o},t.step=function(){return a},t.round=function(m){return arguments.length?(s=!!m,d()):s},t.padding=function(m){return arguments.length?(l=Math.min(1,c=+m),d()):l},t.paddingInner=function(m){return arguments.length?(l=Math.min(1,m),d()):l},t.paddingOuter=function(m){return arguments.length?(c=+m,d()):c},t.align=function(m){return arguments.length?(u=Math.max(0,Math.min(1,m)),d()):u},t.copy=function(){return Jn(i(),[n,r]).round(s).paddingInner(l).paddingOuter(c).align(u)},fn.apply(d(),arguments)}function ka(t){return function(){return t}}function Ca(t){return+t}var jl=[0,1];function gn(t){return t}function Sa(t,i){return(i-=t=+t)?function(e){return(e-t)/i}:ka(isNaN(i)?NaN:.5)}function uh(t,i){var e;return t>i&&(e=t,t=i,i=e),function(n){return Math.max(t,Math.min(i,n))}}function dh(t,i,e){var n=t[0],r=t[1],a=i[0],o=i[1];return r<n?(n=Sa(r,n),a=e(o,a)):(n=Sa(n,r),a=e(a,o)),function(s){return a(n(s))}}function mh(t,i,e){var n=Math.min(t.length,i.length)-1,r=new Array(n),a=new Array(n),o=-1;for(t[n]<t[0]&&(t=t.slice().reverse(),i=i.slice().reverse());++o<n;)r[o]=Sa(t[o],t[o+1]),a[o]=e(i[o],i[o+1]);return function(s){var l=Hr(t,s,1,n)-1;return a[l](r[l](s))}}function ql(t,i){return i.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function hh(){var t=jl,i=jl,e=Ee,n,r,a,o=gn,s,l,c;function u(){var m=Math.min(t.length,i.length);return o!==gn&&(o=uh(t[0],t[m-1])),s=m>2?mh:dh,l=c=null,d}function d(m){return m==null||isNaN(m=+m)?a:(l||(l=s(t.map(n),i,e)))(n(o(m)))}return d.invert=function(m){return o(r((c||(c=s(i,t.map(n),ut)))(m)))},d.domain=function(m){return arguments.length?(t=Array.from(m,Ca),u()):t.slice()},d.range=function(m){return arguments.length?(i=Array.from(m),u()):i.slice()},d.rangeRound=function(m){return i=Array.from(m),e=sa,u()},d.clamp=function(m){return arguments.length?(o=m?!0:gn,u()):o!==gn},d.interpolate=function(m){return arguments.length?(e=m,u()):e},d.unknown=function(m){return arguments.length?(a=m,d):a},function(m,h){return n=m,r=h,u()}}function Ta(){return hh()(gn,gn)}function Ma(t,i,e,n){var r=Ur(t,i,e),a;switch(n=be(n??",f"),n.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(i));return n.precision==null&&!isNaN(a=xa(r,o))&&(n.precision=a),ur(n,o)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(a=wa(r,Math.max(Math.abs(t),Math.abs(i))))&&(n.precision=a-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(a=ya(r))&&(n.precision=a-(n.type==="%")*2);break}}return cr(n)}function ph(t){var i=t.domain;return t.ticks=function(e){var n=i();return Fi(n[0],n[n.length-1],e??10)},t.tickFormat=function(e,n){var r=i();return Ma(r[0],r[r.length-1],e??10,n)},t.nice=function(e){e==null&&(e=10);var n=i(),r=0,a=n.length-1,o=n[r],s=n[a],l,c,u=10;for(s<o&&(c=o,o=s,s=c,c=r,r=a,a=c);u-- >0;){if(c=Bn(o,s,e),c===l)return n[r]=o,n[a]=s,i(n);if(c>0)o=Math.floor(o/c)*c,s=Math.ceil(s/c)*c;else if(c<0)o=Math.ceil(o*c)/c,s=Math.floor(s*c)/c;else break;l=c}return t},t}function Le(){var t=Ta();return t.copy=function(){return ql(t,Le())},fn.apply(t,arguments),ph(t)}var Da=new Date,Ia=new Date;function It(t,i,e,n){function r(a){return t(a=arguments.length===0?new Date:new Date(+a)),a}return r.floor=a=>(t(a=new Date(+a)),a),r.ceil=a=>(t(a=new Date(a-1)),i(a,1),t(a),a),r.round=a=>{let o=r(a),s=r.ceil(a);return a-o<s-a?o:s},r.offset=(a,o)=>(i(a=new Date(+a),o==null?1:Math.floor(o)),a),r.range=(a,o,s)=>{let l=[];if(a=r.ceil(a),s=s==null?1:Math.floor(s),!(a<o)||!(s>0))return l;let c;do l.push(c=new Date(+a)),i(a,s),t(a);while(c<a&&a<o);return l},r.filter=a=>It(o=>{if(o>=o)for(;t(o),!a(o);)o.setTime(o-1)},(o,s)=>{if(o>=o)if(s<0)for(;++s<=0;)for(;i(o,-1),!a(o););else for(;--s>=0;)for(;i(o,1),!a(o););}),e&&(r.count=(a,o)=>(Da.setTime(+a),Ia.setTime(+o),t(Da),t(Ia),Math.floor(e(Da,Ia))),r.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?r.filter(n?o=>n(o)%a===0:o=>r.count(0,o)%a===0):r)),r}var ti=It(t=>t.setHours(0,0,0,0),(t,i)=>t.setDate(t.getDate()+i),(t,i)=>(i-t-(i.getTimezoneOffset()-t.getTimezoneOffset())*6e4)/864e5,t=>t.getDate()-1),gh=ti.range,ei=It(t=>{t.setUTCHours(0,0,0,0)},(t,i)=>{t.setUTCDate(t.getUTCDate()+i)},(t,i)=>(i-t)/864e5,t=>t.getUTCDate()-1),_h=ei.range,Zl=It(t=>{t.setUTCHours(0,0,0,0)},(t,i)=>{t.setUTCDate(t.getUTCDate()+i)},(t,i)=>(i-t)/864e5,t=>Math.floor(t/864e5)),bh=Zl.range;function Ne(t){return It(i=>{i.setDate(i.getDate()-(i.getDay()+7-t)%7),i.setHours(0,0,0,0)},(i,e)=>{i.setDate(i.getDate()+e*7)},(i,e)=>(e-i-(e.getTimezoneOffset()-i.getTimezoneOffset())*6e4)/6048e5)}var ni=Ne(0),_n=Ne(1),Kl=Ne(2),Jl=Ne(3),ve=Ne(4),tc=Ne(5),ec=Ne(6),nc=ni.range,yh=_n.range,xh=Kl.range,wh=Jl.range,kh=ve.range,Ch=tc.range,Sh=ec.range;function Ve(t){return It(i=>{i.setUTCDate(i.getUTCDate()-(i.getUTCDay()+7-t)%7),i.setUTCHours(0,0,0,0)},(i,e)=>{i.setUTCDate(i.getUTCDate()+e*7)},(i,e)=>(e-i)/6048e5)}var ii=Ve(0),bn=Ve(1),ic=Ve(2),rc=Ve(3),ye=Ve(4),ac=Ve(5),oc=Ve(6),sc=ii.range,Th=bn.range,Mh=ic.range,Dh=rc.range,Ih=ye.range,Rh=ac.range,Ah=oc.range;var ne=It(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,i)=>{t.setFullYear(t.getFullYear()+i)},(t,i)=>i.getFullYear()-t.getFullYear(),t=>t.getFullYear());ne.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:It(i=>{i.setFullYear(Math.floor(i.getFullYear()/t)*t),i.setMonth(0,1),i.setHours(0,0,0,0)},(i,e)=>{i.setFullYear(i.getFullYear()+e*t)});var Eh=ne.range,ie=It(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,i)=>{t.setUTCFullYear(t.getUTCFullYear()+i)},(t,i)=>i.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());ie.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:It(i=>{i.setUTCFullYear(Math.floor(i.getUTCFullYear()/t)*t),i.setUTCMonth(0,1),i.setUTCHours(0,0,0,0)},(i,e)=>{i.setUTCFullYear(i.getUTCFullYear()+e*t)});var Fh=ie.range;function Aa(t){if(0<=t.y&&t.y<100){var i=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return i.setFullYear(t.y),i}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Ea(t){if(0<=t.y&&t.y<100){var i=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return i.setUTCFullYear(t.y),i}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function ri(t,i,e){return{y:t,m:i,d:e,H:0,M:0,S:0,L:0}}function Fa(t){var i=t.dateTime,e=t.date,n=t.time,r=t.periods,a=t.days,o=t.shortDays,s=t.months,l=t.shortMonths,c=ai(r),u=oi(r),d=ai(a),m=oi(a),h=ai(o),p=oi(o),S=ai(s),H=oi(s),it=ai(l),tt=oi(l),N={a:Ue,A:Ge,b:Bt,B:Oc,c:null,d:hc,e:hc,f:np,g:mp,G:pp,H:Jh,I:tp,j:ep,L:bc,m:ip,M:rp,p:Bc,q:Pc,Q:gc,s:_c,S:ap,u:op,U:sp,V:lp,w:cp,W:up,x:null,X:null,y:dp,Y:hp,Z:fp,"%":fc},Y={a:Lc,A:Nc,b:Vc,B:zc,c:null,d:pc,e:pc,f:vp,g:Ip,G:Ap,H:gp,I:_p,j:bp,L:yc,m:yp,M:xp,p:Hc,q:Uc,Q:gc,s:_c,S:wp,u:kp,U:Cp,V:Sp,w:Tp,W:Mp,x:null,X:null,y:Dp,Y:Rp,Z:Ep,"%":fc},U={a:zt,A:T,b:rt,B:et,c:oe,d:dc,e:dc,f:jh,g:uc,G:cc,H:mc,I:mc,j:$h,L:Qh,m:Wh,M:Yh,p:ae,q:Gh,Q:Zh,s:Kh,S:Xh,u:Nh,U:Vh,V:zh,w:Lh,W:Hh,x:ci,X:He,y:uc,Y:cc,Z:Uh,"%":qh};N.x=ot(e,N),N.X=ot(n,N),N.c=ot(i,N),Y.x=ot(e,Y),Y.X=ot(n,Y),Y.c=ot(i,Y);function ot(x,I){return function(O){var g=[],bt=-1,G=0,Ct=x.length,St,we,Va;for(O instanceof Date||(O=new Date(+O));++bt<Ct;)x.charCodeAt(bt)===37&&(g.push(x.slice(G,bt)),(we=lc[St=x.charAt(++bt)])!=null?St=x.charAt(++bt):we=St==="e"?" ":"0",(Va=I[St])&&(St=Va(O,we)),g.push(St),G=bt+1);return g.push(x.slice(G,bt)),g.join("")}}function _t(x,I){return function(O){var g=ri(1900,void 0,1),bt=Ot(g,x,O+="",0),G,Ct;if(bt!=O.length)return null;if("Q"in g)return new Date(g.Q);if("s"in g)return new Date(g.s*1e3+("L"in g?g.L:0));if(I&&!("Z"in g)&&(g.Z=0),"p"in g&&(g.H=g.H%12+g.p*12),g.m===void 0&&(g.m="q"in g?g.q:0),"V"in g){if(g.V<1||g.V>53)return null;"w"in g||(g.w=1),"Z"in g?(G=Ea(ri(g.y,0,1)),Ct=G.getUTCDay(),G=Ct>4||Ct===0?bn.ceil(G):bn(G),G=ei.offset(G,(g.V-1)*7),g.y=G.getUTCFullYear(),g.m=G.getUTCMonth(),g.d=G.getUTCDate()+(g.w+6)%7):(G=Aa(ri(g.y,0,1)),Ct=G.getDay(),G=Ct>4||Ct===0?_n.ceil(G):_n(G),G=ti.offset(G,(g.V-1)*7),g.y=G.getFullYear(),g.m=G.getMonth(),g.d=G.getDate()+(g.w+6)%7)}else("W"in g||"U"in g)&&("w"in g||(g.w="u"in g?g.u%7:"W"in g?1:0),Ct="Z"in g?Ea(ri(g.y,0,1)).getUTCDay():Aa(ri(g.y,0,1)).getDay(),g.m=0,g.d="W"in g?(g.w+6)%7+g.W*7-(Ct+5)%7:g.w+g.U*7-(Ct+6)%7);return"Z"in g?(g.H+=g.Z/100|0,g.M+=g.Z%100,Ea(g)):Aa(g)}}function Ot(x,I,O,g){for(var bt=0,G=I.length,Ct=O.length,St,we;bt<G;){if(g>=Ct)return-1;if(St=I.charCodeAt(bt++),St===37){if(St=I.charAt(bt++),we=U[St in lc?I.charAt(bt++):St],!we||(g=we(x,O,g))<0)return-1}else if(St!=O.charCodeAt(g++))return-1}return g}function ae(x,I,O){var g=c.exec(I.slice(O));return g?(x.p=u.get(g[0].toLowerCase()),O+g[0].length):-1}function zt(x,I,O){var g=h.exec(I.slice(O));return g?(x.w=p.get(g[0].toLowerCase()),O+g[0].length):-1}function T(x,I,O){var g=d.exec(I.slice(O));return g?(x.w=m.get(g[0].toLowerCase()),O+g[0].length):-1}function rt(x,I,O){var g=it.exec(I.slice(O));return g?(x.m=tt.get(g[0].toLowerCase()),O+g[0].length):-1}function et(x,I,O){var g=S.exec(I.slice(O));return g?(x.m=H.get(g[0].toLowerCase()),O+g[0].length):-1}function oe(x,I,O){return Ot(x,i,I,O)}function ci(x,I,O){return Ot(x,e,I,O)}function He(x,I,O){return Ot(x,n,I,O)}function Ue(x){return o[x.getDay()]}function Ge(x){return a[x.getDay()]}function Bt(x){return l[x.getMonth()]}function Oc(x){return s[x.getMonth()]}function Bc(x){return r[+(x.getHours()>=12)]}function Pc(x){return 1+~~(x.getMonth()/3)}function Lc(x){return o[x.getUTCDay()]}function Nc(x){return a[x.getUTCDay()]}function Vc(x){return l[x.getUTCMonth()]}function zc(x){return s[x.getUTCMonth()]}function Hc(x){return r[+(x.getUTCHours()>=12)]}function Uc(x){return 1+~~(x.getUTCMonth()/3)}return{format:function(x){var I=ot(x+="",N);return I.toString=function(){return x},I},parse:function(x){var I=_t(x+="",!1);return I.toString=function(){return x},I},utcFormat:function(x){var I=ot(x+="",Y);return I.toString=function(){return x},I},utcParse:function(x){var I=_t(x+="",!0);return I.toString=function(){return x},I}}}var lc={"-":"",_:" ",0:"0"},at=/^\s*\d+/,Oh=/^%/,Bh=/[\\^$*+?|[\]().{}]/g;function L(t,i,e){var n=t<0?"-":"",r=(n?-t:t)+"",a=r.length;return n+(a<e?new Array(e-a+1).join(i)+r:r)}function Ph(t){return t.replace(Bh,"\\$&")}function ai(t){return new RegExp("^(?:"+t.map(Ph).join("|")+")","i")}function oi(t){return new Map(t.map((i,e)=>[i.toLowerCase(),e]))}function Lh(t,i,e){var n=at.exec(i.slice(e,e+1));return n?(t.w=+n[0],e+n[0].length):-1}function Nh(t,i,e){var n=at.exec(i.slice(e,e+1));return n?(t.u=+n[0],e+n[0].length):-1}function Vh(t,i,e){var n=at.exec(i.slice(e,e+2));return n?(t.U=+n[0],e+n[0].length):-1}function zh(t,i,e){var n=at.exec(i.slice(e,e+2));return n?(t.V=+n[0],e+n[0].length):-1}function Hh(t,i,e){var n=at.exec(i.slice(e,e+2));return n?(t.W=+n[0],e+n[0].length):-1}function cc(t,i,e){var n=at.exec(i.slice(e,e+4));return n?(t.y=+n[0],e+n[0].length):-1}function uc(t,i,e){var n=at.exec(i.slice(e,e+2));return n?(t.y=+n[0]+(+n[0]>68?1900:2e3),e+n[0].length):-1}function Uh(t,i,e){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(i.slice(e,e+6));return n?(t.Z=n[1]?0:-(n[2]+(n[3]||"00")),e+n[0].length):-1}function Gh(t,i,e){var n=at.exec(i.slice(e,e+1));return n?(t.q=n[0]*3-3,e+n[0].length):-1}function Wh(t,i,e){var n=at.exec(i.slice(e,e+2));return n?(t.m=n[0]-1,e+n[0].length):-1}function dc(t,i,e){var n=at.exec(i.slice(e,e+2));return n?(t.d=+n[0],e+n[0].length):-1}function $h(t,i,e){var n=at.exec(i.slice(e,e+3));return n?(t.m=0,t.d=+n[0],e+n[0].length):-1}function mc(t,i,e){var n=at.exec(i.slice(e,e+2));return n?(t.H=+n[0],e+n[0].length):-1}function Yh(t,i,e){var n=at.exec(i.slice(e,e+2));return n?(t.M=+n[0],e+n[0].length):-1}function Xh(t,i,e){var n=at.exec(i.slice(e,e+2));return n?(t.S=+n[0],e+n[0].length):-1}function Qh(t,i,e){var n=at.exec(i.slice(e,e+3));return n?(t.L=+n[0],e+n[0].length):-1}function jh(t,i,e){var n=at.exec(i.slice(e,e+6));return n?(t.L=Math.floor(n[0]/1e3),e+n[0].length):-1}function qh(t,i,e){var n=Oh.exec(i.slice(e,e+1));return n?e+n[0].length:-1}function Zh(t,i,e){var n=at.exec(i.slice(e));return n?(t.Q=+n[0],e+n[0].length):-1}function Kh(t,i,e){var n=at.exec(i.slice(e));return n?(t.s=+n[0],e+n[0].length):-1}function hc(t,i){return L(t.getDate(),i,2)}function Jh(t,i){return L(t.getHours(),i,2)}function tp(t,i){return L(t.getHours()%12||12,i,2)}function ep(t,i){return L(1+ti.count(ne(t),t),i,3)}function bc(t,i){return L(t.getMilliseconds(),i,3)}function np(t,i){return bc(t,i)+"000"}function ip(t,i){return L(t.getMonth()+1,i,2)}function rp(t,i){return L(t.getMinutes(),i,2)}function ap(t,i){return L(t.getSeconds(),i,2)}function op(t){var i=t.getDay();return i===0?7:i}function sp(t,i){return L(ni.count(ne(t)-1,t),i,2)}function vc(t){var i=t.getDay();return i>=4||i===0?ve(t):ve.ceil(t)}function lp(t,i){return t=vc(t),L(ve.count(ne(t),t)+(ne(t).getDay()===4),i,2)}function cp(t){return t.getDay()}function up(t,i){return L(_n.count(ne(t)-1,t),i,2)}function dp(t,i){return L(t.getFullYear()%100,i,2)}function mp(t,i){return t=vc(t),L(t.getFullYear()%100,i,2)}function hp(t,i){return L(t.getFullYear()%1e4,i,4)}function pp(t,i){var e=t.getDay();return t=e>=4||e===0?ve(t):ve.ceil(t),L(t.getFullYear()%1e4,i,4)}function fp(t){var i=t.getTimezoneOffset();return(i>0?"-":(i*=-1,"+"))+L(i/60|0,"0",2)+L(i%60,"0",2)}function pc(t,i){return L(t.getUTCDate(),i,2)}function gp(t,i){return L(t.getUTCHours(),i,2)}function _p(t,i){return L(t.getUTCHours()%12||12,i,2)}function bp(t,i){return L(1+ei.count(ie(t),t),i,3)}function yc(t,i){return L(t.getUTCMilliseconds(),i,3)}function vp(t,i){return yc(t,i)+"000"}function yp(t,i){return L(t.getUTCMonth()+1,i,2)}function xp(t,i){return L(t.getUTCMinutes(),i,2)}function wp(t,i){return L(t.getUTCSeconds(),i,2)}function kp(t){var i=t.getUTCDay();return i===0?7:i}function Cp(t,i){return L(ii.count(ie(t)-1,t),i,2)}function xc(t){var i=t.getUTCDay();return i>=4||i===0?ye(t):ye.ceil(t)}function Sp(t,i){return t=xc(t),L(ye.count(ie(t),t)+(ie(t).getUTCDay()===4),i,2)}function Tp(t){return t.getUTCDay()}function Mp(t,i){return L(bn.count(ie(t)-1,t),i,2)}function Dp(t,i){return L(t.getUTCFullYear()%100,i,2)}function Ip(t,i){return t=xc(t),L(t.getUTCFullYear()%100,i,2)}function Rp(t,i){return L(t.getUTCFullYear()%1e4,i,4)}function Ap(t,i){var e=t.getUTCDay();return t=e>=4||e===0?ye(t):ye.ceil(t),L(t.getUTCFullYear()%1e4,i,4)}function Ep(){return"+0000"}function fc(){return"%"}function gc(t){return+t}function _c(t){return Math.floor(+t/1e3)}var vn,mr,wc,hr,kc;Oa({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Oa(t){return vn=Fa(t),mr=vn.format,wc=vn.parse,hr=vn.utcFormat,kc=vn.utcParse,vn}function ze(t){return function(){return t}}function Cc(t){let i=3;return t.digits=function(e){if(!arguments.length)return i;if(e==null)i=null;else{let n=Math.floor(e);if(!(n>=0))throw new RangeError(`invalid digits: ${e}`);i=n}return t},()=>new Be(i)}var G1=Array.prototype.slice;function Sc(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Tc(t){this._context=t}Tc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,i){switch(t=+t,i=+i,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,i):this._context.moveTo(t,i);break;case 1:this._point=2;default:this._context.lineTo(t,i);break}}};function Mc(t){return new Tc(t)}function Dc(t){return t[0]}function Ic(t){return t[1]}function Ba(t,i){var e=ze(!0),n=null,r=Mc,a=null,o=Cc(s);t=typeof t=="function"?t:t===void 0?Dc:ze(t),i=typeof i=="function"?i:i===void 0?Ic:ze(i);function s(l){var c,u=(l=Sc(l)).length,d,m=!1,h;for(n==null&&(a=r(h=o())),c=0;c<=u;++c)!(c<u&&e(d=l[c],c,l))===m&&((m=!m)?a.lineStart():a.lineEnd()),m&&a.point(+t(d,c,l),+i(d,c,l));if(h)return a=null,h+""||null}return s.x=function(l){return arguments.length?(t=typeof l=="function"?l:ze(+l),s):t},s.y=function(l){return arguments.length?(i=typeof l=="function"?l:ze(+l),s):i},s.defined=function(l){return arguments.length?(e=typeof l=="function"?l:ze(!!l),s):e},s.curve=function(l){return arguments.length?(r=l,n!=null&&(a=r(n)),s):r},s.context=function(l){return arguments.length?(l==null?n=a=null:a=r(n=l),s):n},s}function xe(t,i,e){this.k=t,this.x=i,this.y=e}xe.prototype={constructor:xe,scale:function(t){return t===1?this:new xe(this.k*t,this.x,this.y)},translate:function(t,i){return t===0&i===0?this:new xe(this.k,this.x+this.k*t,this.y+this.k*i)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Pa=new xe(1,0,0);La.prototype=xe.prototype;function La(t){for(;!t.__zoom;)if(!(t=t.parentNode))return Pa;return t.__zoom}var si=class t{constructor(i="Non",e=[],n=[]){this.title=i;this.xAxis=e;this.sets=n}static get Non(){return new t}};var Op=["Div"],pr=class t{constructor(i,e){this.Doc=i;this.PLATFORM_ID=e}Div;Data=si.Non;Len=0;Type=0;Candlestick=new fr;ngOnInit(){wr(this.PLATFORM_ID)||(this.Candlestick=new fr(this.Div.nativeElement))}ngOnDestroy(){}ngOnChanges(i){if(this.Data.title=="Non"||wr(this.PLATFORM_ID))return;let e=i.Type;e&&(this.Candlestick.RenderCandlest=!!e.currentValue),this.Candlestick.Update(this.Data)}static \u0275fac=function(e){return new(e||t)(q(qe),q(Ya))};static \u0275cmp=R({type:t,selectors:[["tool-chart-candlestick"]],viewQuery:function(e,n){if(e&1&&Q(Op,7),e&2){let r;V(r=z())&&(n.Div=r.first)}},inputs:{Data:"Data",Len:"Len",Type:"Type"},features:[st],decls:2,vars:0,consts:[["Div",""],["onselectstart","return false","oncontextmenu","return false","ondragstart","return false"]],template:function(e,n){e&1&&A(0,"div",1,0)},encapsulation:2})},fr=class{RenderCandlest=!1;Rect={W:400,H:200,H2:30};Margin={T:10,R:30,B:20,L:40};AX;AY0;AY1;AY2;GroupH;GroupL;GroupP;GroupCandle;GroupV;GroupMACD;GroupClossHair;SVG;constructor(i=null){if(!i)return;let e=ta("svg").attr("viewBox",[0,0,this.Rect.W,this.Rect.H]),n=e.node();if(!n)return;i.append(n);let{W:r,H:a,H2:o}=this.Rect,s=this.Margin;this.AX=new yn(e,s.L,r-s.R,a-s.B,a),this.AY0=new yn(e,r-s.R,r,s.T,a-s.B),this.AY1=new yn(e,0,s.L,s.T,a-s.B-o),this.AY2=new yn(e,0,s.L,a-s.B-o,a-s.B),this.GroupH=new re(e,this.AX,this.AY0),this.GroupL=new re(e,this.AX,this.AY0),this.GroupP=new re(e,this.AX,this.AY0),this.GroupCandle=new re(e,this.AX,this.AY0),this.GroupClossHair=new re(e,this.AX,this.AY0),this.GroupV=new re(e,this.AX,this.AY1),this.GroupMACD=new re(e,this.AX,this.AY2),this.SVG=e}Clear(){this.SVG?.selectAll("text").remove(),this.SVG?.selectAll("path").remove(),this.SVG?.selectAll("rect").remove(),this.AX?.Clear(),this.AY0?.Clear(),this.AY1?.Clear(),this.AY2?.Clear(),this.GroupH?.Clear(),this.GroupL?.Clear(),this.GroupP?.Clear(),this.GroupCandle?.Clear(),this.GroupClossHair?.Clear(),this.GroupV?.Clear(),this.GroupMACD?.Clear()}Data=si.Non;Update(i){this.Data=i,this.Render()}UpdateLen(i=0){this.Render()}Render(){let i=this.Data,e=i.xAxis.map(d=>new Date(d)),n=i.sets.find(d=>d.name=="HH")?.yAxis||[0],r=i.sets.find(d=>d.name=="LL")?.yAxis||[0],a=i.sets.find(d=>d.name=="H")?.yAxis||[0],o=i.sets.find(d=>d.name=="L")?.yAxis||[0],s=i.sets.find(d=>d.name=="O")?.yAxis||[0],l=i.sets.find(d=>d.name=="P")?.yAxis||[0],c=i.sets.find(d=>d.name=="V")?.yAxis||[0],u=i.sets.find(d=>d.name=="C")?.yAxis||[0];this.Clear(),this.AX?.GenX(e),this.AY0?.GenY(Math.min(...r),Math.max(...n)).DrawR(),this.GroupH?.DrawPath(e,n,"yellow"),this.GroupL?.DrawPath(e,r,"yellow"),this.RenderCandlest?(this.GroupCandle?.DrawLine(e,o,a),this.GroupCandle?.DrawLine(e,s,l,(d,m)=>!d||!m?"":m>d?"red":d>m?"green":"white",this.AX?.Scale.bandwidth())):(this.GroupP?.DrawPath(e,l,"red"),this.AY1?.GenY(Math.min(...c),Math.max(...c)).DrawL(),this.AY2?.GenY(Math.min(...u),Math.max(...u)),this.GroupV?.DrawBars(e,c),this.GroupMACD?.DrawBars(e,u)),this.GroupClossHair?.AddCrossHairRect(e,l,i.title)}},re=class{constructor(i,e,n){this.AX=e;this.AY=n;this.Group=i.append("g")}Group;Clear(){this.Group.selectAll("*").remove()}DrawPath(i,e,n="white"){let[r,a]=[this.AX,this.AY],o=r.Scale.bandwidth()/2,s=Ba().x((l,c)=>r.P(l)+o).y((l,c)=>a.P(e[c]));this.Group.append("path").attr("fill","none").attr("stroke",n).attr("stroke-width",.5).attr("d",s(i))}DrawBars(i,e,n="steelblue"){let[r,a]=[this.AX,this.AY];this.Group.attr("fill",n).selectAll().data(e).join("rect").attr("x",(o,s)=>r.P(i[s])).attr("y",(o,s)=>o>=0?a.P(o):a.P(0)).attr("width",o=>r.Scale.bandwidth()).attr("height",o=>Math.abs(a.P(0)-a.P(o)))}DrawLine(i,e,n,r=(o,s)=>"white",a=1){let[o,s]=[this.AX,this.AY],l=o.Scale.bandwidth()/2;this.Group.attr("stroke-linecap","round").selectAll("g").data(i).join("g").attr("transform",u=>`translate(${o.P(u)+l},0)`).append("line").attr("y1",(u,d)=>s.P(e[d])).attr("y2",(u,d)=>s.P(n[d])).attr("stroke-width",a).attr("stroke",(u,d)=>r(e[d],n[d]))}MouseDown=!1;AddCrossHairRect(i,e,n){let[r,a]=[this.AX,this.AY],o=this.Group.append("text").attr("x",this.AX.Rect.R/2).attr("y",this.AY.Rect.T).attr("text-anchor","middle").attr("font-size","8sp").attr("fill","white").attr("id","title").text(n),s=this.Group.append("text").attr("x",this.AX.Rect.L).attr("y",this.AY.Rect.B-10).attr("font-size","10px").attr("fill","white").attr("id","tip");s.append("tspan").attr("x",0).attr("dy","1em").attr("id","line1"),s.append("tspan").attr("x",0).attr("dy","1em").attr("id","line2");let l=this.Group.append("g").style("display","none"),c=l.append("line").style("stroke","white").style("stroke-width",.5).attr("y1",a.Rect.T).attr("y2",a.Rect.B).attr("id","lineV"),u=l.append("line").style("stroke","white").style("stroke-width",.5).attr("x1",r.Rect.L).attr("x2",r.Rect.R).attr("id","lineH");this.Group.append("rect").attr("x",r.Rect.L).attr("y",a.Rect.T).attr("width",r.Rect.R-r.Rect.L).attr("height",a.Rect.B-a.Rect.T).attr("fill","transparent").on("mousemove",d=>this.DrawCrossHair(d,i,e,l)).on("mouseleave",d=>l.style("display","none")).on("mousedown",d=>this.MouseDown=!0).on("mouseup",d=>this.MouseDown=!1).on("touchmove",d=>this.DrawCrossHair(d,i,e,l)).on("touchstart",d=>this.MouseDown=!0).on("touchend",d=>this.MouseDown=!1)}DrawCrossHair(i,e,n,r){let[a,o]=[this.AX,this.AY],[s,l]=ea(i),c=this.MouseDown?"block":"none";r.style("display",c);let u=this.Group.select("#lineV"),d=this.Group.select("#lineH"),m=a.GetNearBy(e,s),h=e.indexOf(m),p=a.P(m)+a.Scale.bandwidth()/2,S=o.P(n[h]);u.attr("x1",p).attr("x2",p),d.attr("y1",S).attr("y2",S),this.DrawTip(i,m,S)}DrawTip(i,e,n){let[r,a]=[this.AX,this.AY],o=this.MouseDown?`${a.Scale.invert(n).toFixed(2)}`:"",s=this.MouseDown?`${mr("%m-%d")(e)}`:"";this.Group.select("#line1").text(o),this.Group.select("#line2").text(s)}},yn=class{Scale=null;Rect={L:0,R:0,T:0,B:0};Group;constructor(i,e=0,n=0,r=0,a=0){this.Group=i.append("g"),this.Rect={L:e,R:n,T:r,B:a}}P(i){return this.Scale(i)}GetNearBy(i,e){let r=i.map(o=>this.P(o)).map(o=>Math.abs(o-e)),a=r.indexOf(Math.min(...r));return i[a]}Clear(){this.Group.selectAll("*").remove()}GenX(i){let{L:e,R:n,T:r,B:a}=this.Rect,o=Jn().domain(i).range([e,n]).padding(.2),s=i.filter(c=>c.getDay()==1),l=Xr(o).tickValues(s).tickFormat(hr("%-m/%-d"));return this.Group.attr("transform",`translate(0,${r})`).call(l).call(c=>c.select(".domain").remove()),this.Scale=o,this}GenY(i=0,e=0){let{L:n,R:r,T:a,B:o}=this.Rect,s=Le().domain([i,e]).range([o,a]);return this.Scale=s,this}DrawR(){let{L:i,R:e,T:n,B:r}=this.Rect,a=this.Scale,o=Yr(a).tickValues(Le().domain(a.domain()).ticks());this.Group.attr("transform",`translate(${i},0)`).call(o).call(s=>s.select(".domain").remove())}DrawL(){let{L:i,R:e,T:n,B:r}=this.Rect,a=this.Scale,o=Qr(a).tickValues(Le().domain(a.domain()).ticks());this.Group.attr("transform",`translate(${e},0)`).call(o).call(s=>s.select(".domain").remove())}};var xn=class t{constructor(i){this.StockService=i}Stock=new ht;Len=0;Data=ln.Non;ngOnInit(){}ngOnChanges(i){let e=i.Stock?.currentValue;if(e){let n=e.ToDD();this.Data=this.ToDatas(n,e.Title)}}ToDatas(i,e=""){let n=i.slice().reverse(),r=n.map(l=>l.date).map(l=>`${l.substring(0,4)}-${l.substring(4,6)}-${l.substring(6,8)}`);if(!r.length)return ln.Non;let a=this.BarVloume(n),o=`[${i[0].date.substring(0,6)}] - `,s=[n[0].date,n.at(-1).date].map(l=>`${l.substring(0,4)}-${l.substring(4,6)}-${l.substring(6,8)}`).map(l=>new Date(l));return new ln(o+e,r,[new Ft("V","bar_0","",a.map(l=>l.V)),new Ft("P","line_2","",n.map(l=>l.price)),new Ft("HH","line_0","",n.map(l=>l.MA20+2*l.SD20)),new Ft("LL","line_0","",n.map(l=>l.MA20-2*l.SD20)),new Ft("F","bar_0","",a.map(l=>l.F)),new Ft("O","non_2","",n.map(l=>l.open)),new Ft("H","non_2","",n.map(l=>l.high)),new Ft("L","non_2","",n.map(l=>l.low)),new Ft("C","non_2","",n.map(l=>l.OSC))],s)}BarVloume(i){return i.map(e=>{let n={V:e.volume,F:e.volume_fund,_:e.volume_total};return e.volume>=0&&e.volume_fund>=0||e.volume<0&&e.volume_fund<0?(n._=0,n):(e.volume+e.volume_fund>=0?e.volume>=0?(n.V=e.volume_total,n.F=0,n._=-e.volume_fund):e.volume_fund>=0&&(n.V=0,n.F=e.volume_total,n._=-e.volume):e.volume+e.volume_fund<0&&(e.volume>=0?(n.V=0,n.F=e.volume_total,n._=-e.volume):e.volume_fund>=0&&(n.V=e.volume_total,n.F=0,n._=-e.volume_fund)),n)})}static \u0275fac=function(e){return new(e||t)(q(J))};static \u0275cmp=R({type:t,selectors:[["invest-stock-chart"]],inputs:{Stock:"Stock",Len:"Len"},standalone:!1,features:[st],decls:1,vars:3,consts:[[3,"Len","Data","Type"]],template:function(e,n){e&1&&A(0,"tool-chart-candlestick",0),e&2&&b("Len",n.Len)("Data",n.Data)("Type",n.StockService.ChartType)},dependencies:[pr],encapsulation:2})};var W=t=>({display:t}),gr=class t{constructor(i){this.Service=i}Stocks=[];Days=14;Res=new $;ngOnInit(){}ngOnDestroy(){}ngOnChanges(i){}static \u0275fac=function(e){return new(e||t)(q(J))};static \u0275cmp=R({type:t,selectors:[["invest-stock-chart-list"]],inputs:{Stocks:"Stocks",Days:"Days"},outputs:{Res:"Res"},standalone:!1,features:[st],decls:26,vars:125,consts:[[2,"width","400px","height","90%"],[3,"ngStyle","Stock","Len"]],template:function(e,n){e&1&&(v(0,"div",0),A(1,"invest-stock-chart",1)(2,"invest-stock-chart",1)(3,"invest-stock-chart",1)(4,"invest-stock-chart",1)(5,"invest-stock-chart",1)(6,"invest-stock-chart",1)(7,"invest-stock-chart",1)(8,"invest-stock-chart",1)(9,"invest-stock-chart",1)(10,"invest-stock-chart",1)(11,"invest-stock-chart",1)(12,"invest-stock-chart",1)(13,"invest-stock-chart",1)(14,"invest-stock-chart",1)(15,"invest-stock-chart",1)(16,"invest-stock-chart",1)(17,"invest-stock-chart",1)(18,"invest-stock-chart",1)(19,"invest-stock-chart",1)(20,"invest-stock-chart",1)(21,"invest-stock-chart",1)(22,"invest-stock-chart",1)(23,"invest-stock-chart",1)(24,"invest-stock-chart",1)(25,"invest-stock-chart",1),y()),e&2&&(f(),b("ngStyle",D(75,W,n.Stocks[0]?"block":"none"))("Stock",n.Stocks[0])("Len",-n.Service.Days.value),f(),b("ngStyle",D(77,W,n.Stocks[1]?"block":"none"))("Stock",n.Stocks[1])("Len",-n.Service.Days.value),f(),b("ngStyle",D(79,W,n.Stocks[2]?"block":"none"))("Stock",n.Stocks[2])("Len",-n.Service.Days.value),f(),b("ngStyle",D(81,W,n.Stocks[3]?"block":"none"))("Stock",n.Stocks[3])("Len",-n.Service.Days.value),f(),b("ngStyle",D(83,W,n.Stocks[4]?"block":"none"))("Stock",n.Stocks[4])("Len",-n.Service.Days.value),f(),b("ngStyle",D(85,W,n.Stocks[5]?"block":"none"))("Stock",n.Stocks[5])("Len",-n.Service.Days.value),f(),b("ngStyle",D(87,W,n.Stocks[6]?"block":"none"))("Stock",n.Stocks[6])("Len",-n.Service.Days.value),f(),b("ngStyle",D(89,W,n.Stocks[7]?"block":"none"))("Stock",n.Stocks[7])("Len",-n.Service.Days.value),f(),b("ngStyle",D(91,W,n.Stocks[8]?"block":"none"))("Stock",n.Stocks[8])("Len",-n.Service.Days.value),f(),b("ngStyle",D(93,W,n.Stocks[9]?"block":"none"))("Stock",n.Stocks[9])("Len",-n.Service.Days.value),f(),b("ngStyle",D(95,W,n.Stocks[10]?"block":"none"))("Stock",n.Stocks[10])("Len",-n.Service.Days.value),f(),b("ngStyle",D(97,W,n.Stocks[11]?"block":"none"))("Stock",n.Stocks[11])("Len",-n.Service.Days.value),f(),b("ngStyle",D(99,W,n.Stocks[12]?"block":"none"))("Stock",n.Stocks[12])("Len",-n.Service.Days.value),f(),b("ngStyle",D(101,W,n.Stocks[13]?"block":"none"))("Stock",n.Stocks[13])("Len",-n.Service.Days.value),f(),b("ngStyle",D(103,W,n.Stocks[14]?"block":"none"))("Stock",n.Stocks[14])("Len",-n.Service.Days.value),f(),b("ngStyle",D(105,W,n.Stocks[15]?"block":"none"))("Stock",n.Stocks[15])("Len",-n.Service.Days.value),f(),b("ngStyle",D(107,W,n.Stocks[16]?"block":"none"))("Stock",n.Stocks[16])("Len",-n.Service.Days.value),f(),b("ngStyle",D(109,W,n.Stocks[17]?"block":"none"))("Stock",n.Stocks[17])("Len",-n.Service.Days.value),f(),b("ngStyle",D(111,W,n.Stocks[18]?"block":"none"))("Stock",n.Stocks[18])("Len",-n.Service.Days.value),f(),b("ngStyle",D(113,W,n.Stocks[19]?"block":"none"))("Stock",n.Stocks[19])("Len",-n.Service.Days.value),f(),b("ngStyle",D(115,W,n.Stocks[20]?"block":"none"))("Stock",n.Stocks[20])("Len",-n.Service.Days.value),f(),b("ngStyle",D(117,W,n.Stocks[21]?"block":"none"))("Stock",n.Stocks[21])("Len",-n.Service.Days.value),f(),b("ngStyle",D(119,W,n.Stocks[22]?"block":"none"))("Stock",n.Stocks[22])("Len",-n.Service.Days.value),f(),b("ngStyle",D(121,W,n.Stocks[23]?"block":"none"))("Stock",n.Stocks[23])("Len",-n.Service.Days.value),f(),b("ngStyle",D(123,W,n.Stocks[24]?"block":"none"))("Stock",n.Stocks[24])("Len",-n.Service.Days.value))},dependencies:[Ke,xn],encapsulation:2})};var Lp=t=>({display:t});function Np(t,i){if(t&1&&A(0,"tool-table",8),t&2){let e=C();b("Source",e.TableSource)("Column",e.TableColumn)}}function Vp(t,i){if(t&1&&A(0,"tool-table",8),t&2){let e=C();b("Source",e.TableSource)("Column",e.TableColumn1)}}var wn=class t{constructor(i){this.Service=i;this.DayIdx=new ue,this.DayIdx.setValue(-this.Days),this.DayIdx.valueChanges.subscribe(e=>this.DayChange(e))}Stock=new ht;Days=-1;TableColumn=["date","volume","volume_fund","price"];TableColumn1=["date","total","money","cost","price"];TableSource;DayLimit=-10;ngOnInit(){}StockDDAll=[];ngOnChanges(i){this.Stock&&(this.StockDDAll=this.Stock.ToDD(),this.StockDDAll.forEach(e=>e.date=e.date.substring(4)),this.DayLimit=-this.StockDDAll.length,this.DayIdx.setValue(this.Days))}DayIdx;DayChange(i){if(!i)return;let e=-i,n=this.StockDDAll.filter((r,a)=>a<e);n.length&&(An.FillCost(n),this.TableSource=n)}TabName="pv";ChangeTable(i){this.TabName=i.value}static \u0275fac=function(e){return new(e||t)(q(J))};static \u0275cmp=R({type:t,selectors:[["invest-stock-table-dd"]],inputs:{Stock:"Stock",Days:"Days"},standalone:!1,features:[st],decls:12,vars:10,consts:[[3,"ngStyle"],[3,"Stock","Len"],["max","-1",2,"width","80%",3,"min"],["matSliderThumb","",3,"formControl"],[3,"change"],["value","pv"],["value","cost"],["style","overflow-x: scroll;",3,"Source","Column",4,"ngIf"],[2,"overflow-x","scroll",3,"Source","Column"]],template:function(e,n){e&1&&(v(0,"div",0),A(1,"invest-stock-chart",1),v(2,"mat-slider",2),A(3,"input",3),y(),M(4),v(5,"mat-button-toggle-group",4),k("change",function(a){return n.ChangeTable(a)}),v(6,"mat-button-toggle",5),M(7,"Price & Volume"),y(),v(8,"mat-button-toggle",6),M(9,"Cost"),y()(),F(10,Np,1,2,"tool-table",7)(11,Vp,1,2,"tool-table",7),y()),e&2&&(b("ngStyle",D(8,Lp,n.TableSource!=null&&n.TableSource.length?"block":"none")),f(),b("Stock",n.Stock)("Len",-n.DayIdx.value),f(),b("min",n.DayLimit),f(),b("formControl",n.DayIdx),f(),Et("\u65E5\u671F: ",-n.DayIdx.value," "),f(6),b("ngIf",n.TabName=="pv"),f(),b("ngIf",n.TabName=="cost"))},dependencies:[Ze,Ke,Je,ce,de,vi,On,sn,on,Te,xn],encapsulation:2})};var Hp=["LDrawer"],Up=["RDrawer"],Gp=t=>({maxWidth:t}),Ac=t=>({display:t}),kn=t=>({$implicit:t});function Wp(t,i){if(t&1){let e=X();v(0,"button",15),k("click",function(r){B(e);let a=C(2);return P(a.LOpen(r))}),M(1,"Menu"),y()}}function $p(t,i){if(t&1){let e=X();v(0,"div",8)(1,"div"),F(2,Wp,2,0,"button",9),v(3,"button",10),k("click",function(){B(e);let r=C();return P(r.OnChartChanged())}),M(4,"Chart"),y(),v(5,"button",10),k("click",function(){B(e);let r=C();return P(r.OnRandom())}),M(6,"Random"),y()(),v(7,"div",11)(8,"mat-slider",12),A(9,"input",13),y(),v(10,"span"),M(11),y()(),v(12,"invest-stock-table-list",14),k("Select",function(r){B(e);let a=C();return P(a.Selected(r))})("Sort",function(r){B(e);let a=C();return P(a.Sorted(r))}),y()()}if(t&2){let e=C();f(2),b("ngIf",e.IsMobile),f(6),b("min",e.Service.MinDays)("max",-1),f(),b("formControl",e.Service.Days),f(2),Et("\u65E5\u671F: ",-e.Service.Days.value,""),f(),b("Stocks",e.Stocks)}}function Yp(t,i){if(t&1){let e=X();v(0,"div")(1,"button",19),k("click",function(r){B(e);let a=C(2);return P(a.LClose(r))}),M(2,"X"),y()()}}function Xp(t,i){if(t&1){let e=X();v(0,"div",16),F(1,Yp,3,0,"div",17),v(2,"invest-stock-nav",18),k("Res",function(r){B(e);let a=C();return P(a.FilterResult(r))}),y()()}if(t&2){let e=C();f(),b("ngIf",e.IsMobile)}}function Qp(t,i){if(t&1){let e=X();v(0,"button",15),k("click",function(r){B(e);let a=C(2);return P(a.RClose(r))}),M(1,"X"),y()}}function jp(t,i){if(t&1){let e=X();v(0,"div",16)(1,"div",20),F(2,Qp,2,0,"button",9),v(3,"button",19),k("click",function(r){B(e);let a=C();return a.AddTrace(),P(a.RClose(r))}),M(4,"+"),y(),v(5,"button",19),k("click",function(r){B(e);let a=C();return a.RemoveTrace(),P(a.RClose(r))}),M(6,"-"),y(),v(7,"button",19),k("click",function(){B(e);let r=C();return P(r.ChangeChartType())}),M(8,"Type"),y()(),A(9,"invest-stock-table-dd",21)(10,"invest-stock-chart-list",22),y()}if(t&2){let e=C();f(2),b("ngIf",e.IsMobile),f(7),b("ngStyle",D(6,Ac,e.IsChart?"none":"block"))("Stock",e.Stock)("Days",e.StockDays),f(),b("ngStyle",D(8,Ac,e.IsChart?"block":"none"))("Stocks",e.ChartStocks)}}function qp(t,i){t&1&&Se(0)}function Zp(t,i){t&1&&Se(0)}function Kp(t,i){t&1&&Se(0)}function Jp(t,i){if(t&1&&(v(0,"div",23),F(1,qp,1,0,"ng-container",24)(2,Zp,1,0,"ng-container",24)(3,Kp,1,0,"ng-container",24),y()),t&2){let e=C(),n=xt(1),r=xt(3),a=xt(5);f(),b("ngTemplateOutlet",r)("ngTemplateOutletContext",D(6,kn,e)),f(),b("ngTemplateOutlet",n)("ngTemplateOutletContext",D(8,kn,e)),f(),b("ngTemplateOutlet",a)("ngTemplateOutletContext",D(10,kn,e))}}function tf(t,i){t&1&&Se(0)}function ef(t,i){t&1&&Se(0)}function nf(t,i){t&1&&Se(0)}function rf(t,i){if(t&1&&(v(0,"mat-drawer-container",25),F(1,tf,1,0,"ng-container",24),v(2,"mat-drawer",26,3),F(4,ef,1,0,"ng-container",24),y(),v(5,"mat-drawer",27,4),F(7,nf,1,0,"ng-container",24),y()()),t&2){let e=C(),n=xt(1),r=xt(3),a=xt(5);f(),b("ngTemplateOutlet",n)("ngTemplateOutletContext",D(6,kn,e)),f(3),b("ngTemplateOutlet",r)("ngTemplateOutletContext",D(8,kn,e)),f(3),b("ngTemplateOutlet",a)("ngTemplateOutletContext",D(10,kn,e))}}var li=class t{constructor(i){this.Service=i;this.Env=Co.production?"prod":"local"}LDrawer=null;RDrawer=null;Stocks=[];Env="";IsMobile=!1;ngOnInit(){console.log(this.Env),this.Init().then(i=>{this.Service.StockRoot=i,i.SetFilterBase(E.Type.Favor),this.Stocks=i.Filter("")}),this.onResize(new Event(""))}ngOnChanges(i){}onResize(i){if(typeof window>"u")return;let e=window.innerWidth<1177;e!=this.IsMobile&&(this.IsMobile=e)}Stock=new ht;StockDays=-20;Selected(i){console.log(i),this.Stock=i,this.RDrawer?.toggle(),this.StockDays=this.Service.Days.value<-20?this.Service.Days.value:-20}SortStocks=[];Sorted(i){this.SortStocks=i}IsChart=!1;ChartStocks=[];OnChartChanged(){this.IsChart=!this.IsChart,this.IsChart?this.ChartStocks=this.SortStocks.map(i=>i):this.ChartStocks=[],this.RDrawer?.toggle()}OnRandom(i=0){if(i>5)return console.log("falid to find");i++;let e=mt.Random.Int(this.Stocks.length-1,0),n=this.Stocks[e];if(!n)return this.OnRandom(i);let r=n.move_unit.find(o=>o>10);if(!r)return this.OnRandom(i);let a=n.move_unit.indexOf(r);if(a>n.date.length-10)return this.OnRandom(i);this.Stock=n.DeepClone(a),console.log(this.Stock),this.RDrawer?.toggle()}LOpen(i){this.LDrawer?.toggle()}LClose(i){this.LDrawer?.toggle()}RClose(i){this.RDrawer?.toggle(),this.IsChart=!1,this.ChartStocks=[]}FilterResult(i){this.Stocks=i}ChangeChartType(){this.Service.ChartType=(this.Service.ChartType+1)%2}AddTrace(){let i=this.Service.StockRoot;this.Service.FavorAdd({code:this.Stock.code,name:this.Stock.name}),i.SetFilterBase(E.Type.Favor),this.Stocks=i.Filter()}RemoveTrace(){let i=this.Service.StockRoot;this.Service.FavorDelete({code:this.Stock.code,name:this.Stock.name}),i.SetFilterBase(E.Type.Favor),this.Stocks=i.Filter()}Init(){return qt(this,null,function*(){let i=yield this.Service.GetStocks(this.Env),e=new Fn(i);return this.Service.SetDaysLen(e.Len),this.Service.ConditionInit(e),e.Favor=this.Service.FavorLoad(),e.PreCalculate(),e.FillCost(-this.Service.Days.value-1),e})}static \u0275fac=function(e){return new(e||t)(q(J))};static \u0275cmp=R({type:t,selectors:[["invest-stock"]],viewQuery:function(e,n){if(e&1&&(Q(Hp,5),Q(Up,5)),e&2){let r;V(r=z())&&(n.LDrawer=r.first),V(r=z())&&(n.RDrawer=r.first)}},hostBindings:function(e,n){e&1&&k("resize",function(a){return n.onResize(a)},!1,Qa)},standalone:!1,features:[st],decls:9,vars:5,consts:[["Main",""],["Rule",""],["Detail",""],["LDrawer",""],["RDrawer",""],[2,"width","100%","height","100%",3,"ngStyle"],["class","Flex-R-AS","style","width: 100%; height: 100%;",4,"ngIf"],["autosize","","style","width: 100%; height: 100%;",4,"ngIf"],[1,"Flex-C-SB",2,"min-width","390px","height","100%","flex-wrap","nowrap","overflow-y","scroll"],["mat-button","","style","float: left;",3,"click",4,"ngIf"],["mat-button","",3,"click"],[1,"Flex-R-SC",2,"width","100%"],[2,"width","60%",3,"min","max"],["matSliderThumb","",3,"formControl"],[3,"Select","Sort","Stocks"],["mat-button","",2,"float","left",3,"click"],[1,"Flex-C-SB",2,"min-width","390px","height","100%","overflow-y","scroll"],[4,"ngIf"],[3,"Res"],["mat-button","",2,"float","right",3,"click"],[2,"width","100%"],[2,"width","100%","height","90%",3,"ngStyle","Stock","Days"],[2,"width","100%","height","90%",3,"ngStyle","Stocks"],[1,"Flex-R-AS",2,"width","100%","height","100%"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["autosize","",2,"width","100%","height","100%"],["mode","side","position","start",2,"width","100%"],["mode","side","position","end",2,"width","100%"]],template:function(e,n){e&1&&(F(0,$p,13,6,"ng-template",null,0,je)(2,Xp,3,1,"ng-template",null,1,je)(4,jp,11,10,"ng-template",null,2,je),v(6,"div",5),F(7,Jp,4,12,"div",6)(8,rf,8,12,"mat-drawer-container",7),y()),e&2&&(f(6),b("ngStyle",D(3,Gp,n.IsMobile?"400px":"100%")),f(),b("ngIf",!n.IsMobile),f(),b("ngIf",n.IsMobile))},dependencies:[Ze,Ja,Ke,Je,ce,de,me,on,Te,Pr,Lr,Ii,Ri,gr,wn],styles:[".Stock[_ngcontent-%COMP%]{--mat-sidenav-content-background-color: #282A35;--mat-sidenav-container-background-color: #282A35;--mat-table-row-item-label-text-size: 10pt}.Stock[_ngcontent-%COMP%]   .Menu[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{height:100%;padding:0 8px;transition:color .4s}.Stock[_ngcontent-%COMP%]   .Menu[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:hover{cursor:pointer;color:#1e90ff}.Stock[_ngcontent-%COMP%]   .Menu[_ngcontent-%COMP%]   .Broder-L[_ngcontent-%COMP%]{border-left:1px solid gray}.Stock[_ngcontent-%COMP%]   .Menu[_ngcontent-%COMP%]   .Broder-R[_ngcontent-%COMP%]{border-right:1px solid gray}"]})};var af=[{path:"",component:Ci,children:[{path:"",component:li}]},{path:"stock",component:li},{path:"stock/month",component:wn}],_r=class t{static \u0275fac=function(e){return new(e||t)};static \u0275mod=ft({type:t});static \u0275inj=pt({imports:[kr.forChild(af),kr]})};var Ec=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275mod=ft({type:t});static \u0275inj=pt({imports:[wt,wt]})}return t})();var Fc=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275mod=ft({type:t});static \u0275inj=pt({imports:[wt,wt]})}return t})();var Na=class t{static \u0275fac=function(e){return new(e||t)};static \u0275mod=ft({type:t});static \u0275inj=pt({providers:[pe,J],imports:[_r,ko,ro,Mr,No,xo,go,Eo,Bo,Ec,Fc]})};export{Na as default};
